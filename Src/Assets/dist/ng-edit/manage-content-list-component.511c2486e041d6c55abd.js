(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{EqWC:function(t,i,e){"use strict";e.r(i),e.d(i,"ManageContentListComponent",(function(){return k}));var n=e("5/c3"),o=e("LR82"),r=e("z5yO"),c=e("9Saw"),s=e("uuTa"),a=e("1C3z"),d=e("BLjT"),p=e("PlBB"),b=e("2pW/"),u=e("8AiQ"),h=e("9HSk"),l=e("Qc/f"),g=e("r4gC"),f=e("kVtj");function m(t,i){if(1&t){var e=a.Xb();a.Ub(0),a.Wb(1,"span"),a.Rc(2),a.Vb(),a.Wb(3,"button",11),a.ec("click",(function(){return a.Fc(e),a.ic(2).editHeader()})),a.Wb(4,"mat-icon"),a.Rc(5,"edit"),a.Vb(),a.Vb(),a.Tb()}if(2&t){var n=a.ic(2);a.Bb(2),a.Sc(n.header.Title)}}function v(t,i){1&t&&(a.Ub(0),a.Rc(1,"(this list has no header)"),a.Tb())}function x(t,i){if(1&t&&(a.Ub(0),a.Wb(1,"p",10),a.Rc(2," You can manage the list header here (if it is defined): "),a.Vb(),a.Wb(3,"p",10),a.Pc(4,m,6,1,"ng-container",3),a.Pc(5,v,2,0,"ng-container",3),a.Vb(),a.Tb()),2&t){var e=a.ic();a.Bb(4),a.oc("ngIf",e.header.Type),a.Bb(1),a.oc("ngIf",!e.header.Type)}}function C(t,i){if(1&t){var e=a.Xb();a.Wb(0,"div"),a.Wb(1,"button",16),a.ec("click",(function(){a.Fc(e);var t=a.ic().$implicit;return a.ic().editItem(t.Id)})),a.Wb(2,"mat-icon"),a.Rc(3,"edit"),a.Vb(),a.Vb(),a.Vb()}}function y(t,i){if(1&t&&(a.Wb(0,"div",12),a.Wb(1,"div",13),a.Wb(2,"mat-icon",14),a.Rc(3,"drag_handle"),a.Vb(),a.Wb(4,"span",15),a.Rc(5),a.Vb(),a.Vb(),a.Pc(6,C,4,0,"div",3),a.Vb()),2&t){var e=i.$implicit;a.Bb(5),a.Uc("",e.Title," (",e.Id,")"),a.Bb(1),a.oc("ngIf",0!==e.Id)}}var k=function(){function t(t,i,e,n,r){this.dialogRef=t,this.contentGroupService=i,this.route=e,this.router=n,this.snackBar=r,this.hostClass="dialog-component",this.subscription=new o.a,this.hasChild=!!this.route.snapshot.firstChild,this.contentGroup={id:null,guid:this.route.snapshot.paramMap.get("guid"),part:this.route.snapshot.paramMap.get("part"),index:parseInt(this.route.snapshot.paramMap.get("index"),10)}}return t.prototype.ngOnInit=function(){this.fetchList(),this.fetchHeader(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe(),this.subscription=null},t.prototype.saveList=function(){var t=this;this.snackBar.open("Saving..."),this.contentGroupService.saveList(this.contentGroup,this.items).subscribe((function(i){t.snackBar.open("Saved"),t.closeDialog()}))},t.prototype.editHeader=function(){var t={items:[{Group:{Guid:this.contentGroup.guid,Index:0,Part:"listcontent",Add:0===this.header.Id}},{Group:{Guid:this.contentGroup.guid,Index:0,Part:"listpresentation",Add:0===this.header.Id}}]};this.router.navigate(["edit/"+Object(s.b)(JSON.stringify(t))],{relativeTo:this.route})},t.prototype.editItem=function(t){var i={items:[{EntityId:t.toString()}]};this.router.navigate(["edit/"+Object(s.b)(JSON.stringify(i))],{relativeTo:this.route})},t.prototype.drop=function(t){Object(c.d)(this.items,t.previousIndex,t.currentIndex)},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.fetchList=function(){var t=this;this.contentGroupService.getList(this.contentGroup).subscribe((function(i){t.items=i}))},t.prototype.fetchHeader=function(){var t=this;this.contentGroupService.getHeader(this.contentGroup).subscribe((function(i){t.header=i}))},t.prototype.refreshOnChildClosed=function(){var t=this;this.subscription.add(this.router.events.pipe(Object(r.a)((function(t){return t instanceof n.b}))).subscribe((function(i){var e=t.hasChild;t.hasChild=!!t.route.snapshot.firstChild,!t.hasChild&&e&&(t.fetchList(),t.fetchHeader())})))},t.\u0275fac=function(i){return new(i||t)(a.Qb(d.h),a.Qb(p.a),a.Qb(n.a),a.Qb(n.c),a.Qb(b.b))},t.\u0275cmp=a.Kb({type:t,selectors:[["app-manage-content-list"]],hostVars:1,hostBindings:function(t,i){2&t&&a.Zb("className",i.hostClass)},decls:15,vars:2,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-component-content","fancy-scrollbar-light"],[4,"ngIf"],[1,"dialog-description","sort-title"],["cdkDropList","",1,"dnd-list",3,"cdkDropListDropped"],["class","dnd-item","cdkDrag","",4,"ngFor","ngForOf"],[1,"dialog-component-actions"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"click"],[1,"dialog-description"],["mat-icon-button","","matTooltip","Edit header",3,"click"],["cdkDrag","",1,"dnd-item"],[1,"dnd-item__title"],["matTooltip","Drag to reorder the list",1,"dnd-item__title-icon"],[1,"dnd-item__title-text"],["mat-icon-button","","matTooltip","Edit item","appMousedownStopPropagation","",3,"click"]],template:function(t,i){1&t&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Rc(2,"Manage content-item lists"),a.Vb(),a.Vb(),a.Rb(3,"router-outlet"),a.Wb(4,"div",2),a.Pc(5,x,6,2,"ng-container",3),a.Wb(6,"p",4),a.Rc(7,"Sort the items by dragging as you need, then save:"),a.Vb(),a.Wb(8,"div",5),a.ec("cdkDropListDropped",(function(t){return i.drop(t)})),a.Pc(9,y,7,3,"div",6),a.Vb(),a.Vb(),a.Wb(10,"div",7),a.Wb(11,"button",8),a.ec("click",(function(){return i.closeDialog()})),a.Rc(12,"Cancel"),a.Vb(),a.Wb(13,"button",9),a.ec("click",(function(){return i.saveList()})),a.Rc(14,"Save"),a.Vb(),a.Vb()),2&t&&(a.Bb(5),a.oc("ngIf",i.header),a.Bb(4),a.oc("ngForOf",i.items))},directives:[d.i,n.h,u.t,c.b,u.s,h.b,l.a,g.a,c.a,f.a],styles:[".sort-title[_ngcontent-%COMP%]{padding-top:16px}.dnd-list[_ngcontent-%COMP%]{margin:16px 0;border:1px solid #ccc;border-radius:4px;overflow:hidden}.dnd-item[_ngcontent-%COMP%]{cursor:move;height:40px;border-bottom:1px solid #ccc;padding:0 8px;display:flex;align-items:center;justify-content:space-between;background:#fff;box-sizing:border-box;font-size:14px}.dnd-item[_ngcontent-%COMP%]:last-child{border:none}.dnd-item__title[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden}.dnd-item__title-icon[_ngcontent-%COMP%]{margin-right:8px;opacity:.4}.dnd-item__title-text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .dnd-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .dnd-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.04.00/ng-edit/manage-content-list-component.511c2486e041d6c55abd.js.map