
<div xng-cloak xng-show="vm.manageInfo.templateChooserVisible" class="dnnFormMessage dnnFormInfo">
    <div class="sc-selectors">
        <!-- App Selector - only relevant in App-Mode -->
        <div ng-show="!vm.manageInfo.isContentApp">
            <select ng-model="vm.appId" class="sc-selector-app input-lg"
                    ng-options="a.AppId as (a.Name.indexOf('TemplatePicker.') === 0 ? '[+] ' + (a.Name | translate) : a.Name) for a in vm.apps"
                    ng-disabled="vm.manageInfo.hasContent || vm.manageInfo.isList">
                <option value="" ng-disabled="vm.appId != null" translate="TemplatePicker.AppPickerDefault"></option>
            </select>

            <span>
                <span ng-if="vm.showAdvanced && !vm.manageInfo.isContentApp">
                    <button type="button" class="btn btn-default btn-square"
                            ng-if="vm.appId != null"
                            ng-click="vm.appSettings();"
                            title="{{ 'Toolbar.App' | translate }}">
                        <i class="icon-settings"></i>
                    </button>
                    <button type="button" class="btn btn-default btn-square"
                            ng-click="vm.installApp();"
                            title="{{ 'TemplatePicker.GetMoreApps' | translate }}">
                        <i class="icon-plus"></i>
                    </button>
                    <button type="button" class="btn btn-default btn-square"
                            ng-click="vm.manageApps();"
                            title="{{ 'Toolbar.Zone' | translate }}">
                        <i class="icon-manage"></i>
                    </button>

                </span>
            </span>

        </div>


        <!-- Content Type selector, only for Content-Mode -->
        <select ng-show="vm.manageInfo.isContentApp" ng-model="vm.contentTypeId"
                class="input-lg"
                ng-options="c.StaticName as c.Name for c in vm.contentTypes"
                ng-disabled="vm.manageInfo.hasContent || vm.manageInfo.isList">
            <option ng-disabled="vm.contentTypeId != ''" value="" translate="TemplatePicker.ContentTypePickerDefault"></option>
        </select>

        <!-- View / template selector -->
        <div>
            <select ng-show="vm.manageInfo.isContentApp ? vm.contentTypeId != 0 : (vm.savedAppId != null &&  vm.filteredTemplates().length > 1)"
                    class="input-lg"
                    ng-model="vm.templateId" 
                    ng-options="t.TemplateId as t.Name for t in vm.filteredTemplates(vm.contentTypeId)"></select>

                <button ng-show="vm.templateId != null && vm.savedTemplateId != vm.templateId"
                        class="btn btn-primary btn-square"
                        ng-click="vm.persistTemplate(false, false);"
                        title="{{ 'TemplatePicker.Save' | translate }}"
                        type="button">
                    <i class="icon-ok"></i>
                </button>
                <button ng-show="vm.undoTemplateId != null"
                        class="btn btn-default btn-square"
                        ng-click="vm.cancelTemplateChange();"
                        type="button"
                        title="{{ 'TemplatePicker.' + (vm.manageInfo.isContentApp ? 'Cancel' : 'Close') | translate }}">
                    <i class="icon-cancel"></i>
                </button>
        </div>
    </div>



    <div class="sc-loading" ng-show="vm.loading">
        <i class="icon-sxc-spinner fa-spin"></i>
    </div>

    <!-- the auto-installer IFrame, with spinner and everything -->
    <div style="position: relative;" ng-if="vm.showRemoteInstaller">
        <iframe id="frGettingStarted" ng-src="{{vm.remoteInstallerUrl}}" width="100%" height="300px"></iframe>
        <div class="sc-loading" id="pnlLoading" style="display:none;">
            <i class="icon-sxc-spinner animate-spin"></i>
            <br />
            <br />
            <span class="sc-loading-label">
                installing <span id="packageName">.</span>
            </span>
        </div>
    </div>
</div>
