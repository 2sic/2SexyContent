!function(){function a(a,b,c,d,e,f){return $2sxc._lib.extend({name:a,title:"Toolbar."+b,iclass:"icon-sxc-"+c,showOn:d,uiActionOnly:e},f)}$2sxc._actions={};$2sxc._actions.create=function(b){var c=b.user.canDesign,d={"dash-view":a("dash","Dashboard","","",!0,{inlineWindow:!0}),edit:a("edit","Edit","pencil","default",!1,{params:{mode:"edit"}}),"new":a("new","New","plus","default",!1,{params:{mode:"new"},dialog:"edit",addCondition:function(a,b){return b.isList&&a.useModuleList&&-1!==a.sortOrder},code:function(a,b,c){c._openNgDialog($2sxc._lib.extend({},a,{sortOrder:a.sortOrder+1}),b)}}),add:a("add","AddDemo","plus-circled","edit",!1,{addCondition:function(a,b){return b.isList&&a.useModuleList&&-1!==a.sortOrder},code:function(a,b,c){c._getAngularVm().addItem(a.sortOrder+1)}}),metadata:a("metadata","Metadata","tag","default",!1,{params:{mode:"new"},dialog:"edit",dynamicClasses:function(a){return a.entityId?"":"empty"},addCondition:function(a){return!!a.metadata},configureCommand:function(a){var b={Title:"EditFormTitle.Metadata",Metadata:$2sxc._lib.extend({keyType:"string",targetType:10},a.settings.metadata)};$2sxc._lib.extend(a.items[0],b)}}),remove:{title:"Toolbar.Remove",iclass:"icon-sxc-minus-circled",disabled:!0,showOn:"edit",addCondition:function(a,b){return b.isList&&a.useModuleList&&-1!==a.sortOrder},code:function(a,b){confirm(tbContr.translate("Toolbar.ConfirmRemove"))&&tbContr._getAngularVm().removeFromList(a.sortOrder)}},moveup:{title:"Toolbar.MoveUp",iclass:"icon-sxc-move-up",disabled:!1,showOn:"edit",addCondition:function(a,b){return b.isList&&a.useModuleList&&-1!==a.sortOrder&&0!==a.sortOrder},code:function(a,b,c){c._getAngularVm().changeOrder(a.sortOrder,Math.max(a.sortOrder-1,0))}},movedown:{title:"Toolbar.MoveDown",iclass:"icon-sxc-move-down",disabled:!1,showOn:"edit",addCondition:function(a,b){return b.isList&&a.useModuleList&&-1!==a.sortOrder},code:function(a,b,c){c._getAngularVm().changeOrder(a.sortOrder,a.sortOrder+1)}},sort:{title:"Toolbar.Sort",iclass:"icon-sxc-list-numbered",showOn:"edit",addCondition:function(a,b){return b.isList&&a.useModuleList&&-1!==a.sortOrder}},publish:a("publish","Published","eye","edit",!1,{iclass2:"icon-sxc-eye-off",disabled:!0,code:function(a,b,c){if(a.isPublished)return void alert(c.translate("Toolbar.AlreadyPublished"));var d=-1===a.sortOrder?"listcontent":"content",e=-1===a.sortOrder?0:a.sortOrder;c._getAngularVm().publish(d,e)}}),replace:a("replace","Replace","replace","edit",!1,{addCondition:function(a){return a.useModuleList}}),layout:{title:"Toolbar.ChangeLayout",iclass:"icon-sxc-glasses",showOn:"default",uiActionOnly:!0,code:function(a,b,c){c.dialog.toggle()}},develop:a("develop","Develop","code","admin",!0,{newWindow:!0,addCondition:c,configureCommand:function(a){a.items=[{EntityId:b.templateId}]}}),contenttype:{title:"Toolbar.ContentType",iclass:"icon-sxc-fields",showOn:"admin",uiActionOnly:!0,addCondition:c},contentitems:{title:"Toolbar.ContentItems",iclass:"icon-sxc-table",showOn:"admin",params:{contentTypeName:b.contentTypeId},uiActionOnly:!0,addCondition:c&&b.contentTypeId},app:{title:"Toolbar.App",iclass:"icon-sxc-settings",showOn:"admin",uiActionOnly:!0,addCondition:c},zone:{title:"Toolbar.Zone",iclass:"icon-sxc-manage",showOn:"admin",uiActionOnly:!0,addCondition:c},more:{title:"Toolbar.MoreActions",iclass:"icon-sxc-options btn-mode",showOn:"default,edit,design,admin",uiActionOnly:!0,code:function(a,b,d){var e=$(b.target).closest("ul.sc-menu"),f=Number(e.attr("data-state")||0),g=f+1;2===g&&(g=3),g%=c?4:3,e.removeClass("show-set-"+f).addClass("show-set-"+g).attr("data-state",g)}}};return d}}(),function(){$2sxc._lib={extend:function(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}}}();var $2sxcActionMenuMapper=function(a){return{changeLayoutOrContent:function(){$2sxc(a).manage.action({action:"layout"})},addItem:function(){$2sxc(a).manage.action({action:"add",useModuleList:!0,sortOrder:0})},edit:function(){$2sxc(a).manage.action({action:"edit",useModuleList:!0,sortOrder:0})},adminApp:function(){$2sxc(a).manage.action({action:"app"})},adminZone:function(){$2sxc(a).manage.action({action:"zone"})},develop:function(){$2sxc(a).manage.action({action:"develop"})}}};!function(){var a=$2sxc.dialog={mode:"iframe",templates:{inline:"<iframe width='100%' height='200px' src='{{url}}'onresize=\"console.log('resize')\"style=\"display: none\"></iframe>"}};a.create=function(b,c,d,e){var f=".DnnModule-"+b+" .sc-viewport";c=$(c);var g=$(a.templates.inline.replace("{{url}}",d)),h=g[0];return h.callback=function(){alert("got called")},h.closeCallback=e,h.getManageInfo=function(){return $2sxc(b).manage._manageInfo},h.getCommands=function(){return h.vm},h.syncHeight=function(a){console.log("tried resize to "+a),h.style.height=a+"px"},h.toggle=function(){h.style.display="none"===h.style.display?"":"none"},h.replaceContent=function(a){$(f).html(a),$2sxc(b).manage._processToolbars()},c.prepend(h),h}}(),$2sxc.getManageController=function(a){var b=$(".DnnModule-"+a),c=$.parseJSON(b.find("div[data-2sxc]").attr("data-2sxc")).manage,d=$.parseJSON(b.find("div[data-2sxc-globals]").attr("data-2sxc-globals"));c.ngDialogUrl=c.applicationRoot+"desktopmodules/tosic_sexycontent/dist/dnn/ui.html?sxcver="+c.config.version,c.ngDialogParams={zoneId:c.zoneId,appId:c.appId,tid:c.config.tabId,mid:c.config.moduleId,lang:c.lang,langpri:c.langPrimary,langs:JSON.stringify(c.languages),portalroot:d.PortalRoot,websiteroot:c.applicationRoot,user:c.user,approot:c.config&&c.config.appPath?c.config.appPath:null},c.config.contentType=c.config.contentType||c.config.attributeSetName;var e=$2sxc.urlParams.get("debug")?"&debug=true":"",f=$2sxc._actions.create(c),g={isEditMode:function(){return c.isEditMode},_manageInfo:c,_toolbarConfig:c.config,createCommandObject:function(a){var b=$2sxc._lib.extend({},g._toolbarConfig,a),d={settings:b,items:b.items||[],params:$2sxc._lib.extend({dialog:b.dialog||b.action},b.params),addSimpleItem:function(){var a={},b=d.settings.contentType||d.settings.attributeSetName;d.settings.entityId&&(a.EntityId=d.settings.entityId),b&&(a.ContentTypeName=b),(a.EntityId||a.ContentTypeName)&&d.items.push(a)},addContentGroupItem:function(a,b,c,e,f){d.items.push({Group:{Guid:a,Index:b,Part:c,Add:e},Title:g.translate(f)})},addContentGroupItemSetsToEditList:function(a){var b=-1!==d.settings.sortOrder,c=b?d.settings.sortOrder:0,e=b?"":"List",f=e+"Content",g=e+"Presentation",h="new"===d.settings.action,i=d.settings.contentGroupId;d.addContentGroupItem(i,c,f.toLowerCase(),h,"EditFormTitle."+f),a&&d.addContentGroupItem(i,c,g.toLowerCase(),h,"EditFormTitle."+g)},generateLink:function(){if(d.settings.items||(d.settings.items=[]),d.settings.prefill)for(var a=0;a<d.items.length;a++)d.items[a].Prefill=d.settings.prefill;return d.params.items=JSON.stringify(d.items),c.ngDialogUrl+"#"+$.param(c.ngDialogParams)+"&"+$.param(d.params)+e}};return d},getNgLink:function(a){var b=g.createCommandObject(a);return b.settings.useModuleList?b.addContentGroupItemSetsToEditList(!0):b.addSimpleItem(),b.settings.configureCommand&&b.settings.configureCommand(b),b.generateLink()},_openNgDialog:function(c,d,e){var f=function(){g._getAngularVm().reload(),e()},h=g.getNgLink(c);return c.newWindow||d&&d.shiftKey?window.open(h):c.inlineWindow?$2sxc.dialog.create(a,b,h,f):$2sxc.totalPopup.open(h,f)},action:function(a,b){var c=f[a.action];a=$2sxc._lib.extend({},c,a),a.dialog||(a.dialog=a.action),a.code||(a.code=g._openNgDialog);var d=b||window.event;return c.uiActionOnly?a.code(a,d,g):void g._getAngularVm().prepareToAddContent().then(function(){return a.code(a,d,g)})},getButton:function(b){b.entity&&b.entity._2sxcEditInformation&&(b.entity._2sxcEditInformation.entityId&&(b.entityId=b.entity._2sxcEditInformation.entityId,b.useModuleList=!1),b.entity._2sxcEditInformation.sortOrder&&(b.sortOrder=b.entity._2sxcEditInformation.sortOrder,b.useModuleList=!0),delete b.entity);for(var c=f[b.action],d="",e=c.showOn.split(","),h=$("<div/>"),i=$('<i class="'+c.iclass+'" aria-hidden="true"></i>'),j=0;j<e.length;j++)d+=" show-"+e[j];var k=$("<a />",{"class":"sc-"+b.action+" "+d+(c.dynamicClasses?" "+c.dynamicClasses(b):""),onclick:"javascript:$2sxc("+a+").manage.action("+JSON.stringify(b)+", event);",title:g.translate(c.title)});return"publish"===b.action&&b.isPublished===!1&&(k.addClass("show-default").removeClass("show-edit").attr("title",g.translate("Toolbar.Unpublished")),i.removeClass(c.iclass).addClass(c.iclass2)),k.html(h.html(i)),k[0].outerHTML},getToolbar:function(a){for(var b=a.action?[a]:$.isArray(a)?a:g.createDefaultToolbar(a),c="sc-menu show-set-0"+(-1===a.sortOrder?" listContent":""),d=$("<ul />",{"class":c,onclick:"javascript: var e = arguments[0] || window.event; e.stopPropagation();"}),e=0;e<b.length;e++)d.append($("<li />").append($(g.getButton(b[e]))));return d[0].outerHTML},createDefaultToolbar:function(a){var b=[];b.add=function(c){var d=f[c].addCondition;(void 0===d||("function"==typeof d?d(a,g._toolbarConfig):d))&&b.push($2sxc._lib.extend({},a,{action:c}))};for(var c in f)f.hasOwnProperty(c)&&b.add(c);return b},_processToolbars:function(){$(".sc-menu[data-toolbar]",$(".DnnModule-"+a)).each(function(){var b=$.parseJSON($(this).attr("data-toolbar"));$(this).replaceWith($2sxc(a).manage.getToolbar(b))})},_getAngularVm:function(){return g.dialog.getCommands()},translate:function(a){return"translate:"+a}};return g.dialog=g.action({action:"dash-view"}),g},$(document).ready(function(){$(".sc-menu").click(function(a){a.stopPropagation()});var a=$("div[data-2sxc]");window.setTimeout(function(){a.each(function(){try{var a=$(this).data("2sxc").moduleId;$2sxc(a).manage._processToolbars()}catch(b){console&&console.error&&console.error(b)}})},0),window.EavEditDialogs=[]});
//# sourceMappingURL=inpage.min.js.map