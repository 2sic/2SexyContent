!function(){function a(a,b,c,d,e,f){return $2sxc._lib.extend({name:a,title:"Toolbar."+b,iclass:"icon-sxc-"+c,showOn:d,uiActionOnly:e},f)}$2sxc._actions={};$2sxc._actions.create=function(b){var c=b.canDesign,d={"dash-view":a("dash","Dashboard","","",!0,{inlineWindow:!0}),"app-import":a("app-import","Dashboard","","",!0,{}),edit:a("edit","Edit","pencil","default",!1,{params:{mode:"edit"}}),"new":a("new","New","plus","default",!1,{params:{mode:"new"},dialog:"edit",addCondition:function(a,b){return b.isList&&a.useModuleList&&-1!==a.sortOrder},code:function(a,b,c){c.commands._openNgDialog($2sxc._lib.extend({},a,{sortOrder:a.sortOrder+1}),b)}}),add:a("add","AddDemo","plus-circled","edit",!1,{addCondition:function(a,b){return b.isList&&a.useModuleList&&-1!==a.sortOrder},code:function(a,b,c){c.contentBlock.addItem(a.sortOrder+1)}}),metadata:a("metadata","Metadata","tag","default",!1,{params:{mode:"new"},dialog:"edit",dynamicClasses:function(a){return a.entityId?"":"empty"},addCondition:function(a){return!!a.metadata},configureCommand:function(a){var b={Title:"EditFormTitle.Metadata",Metadata:$2sxc._lib.extend({keyType:"string",targetType:10},a.settings.metadata)};$2sxc._lib.extend(a.items[0],b)}}),remove:{title:"Toolbar.Remove",iclass:"icon-sxc-minus-circled",disabled:!0,showOn:"edit",addCondition:function(a,b){return b.isList&&a.useModuleList&&-1!==a.sortOrder},code:function(a,b,c){confirm($2sxc.translate("Toolbar.ConfirmRemove"))&&c.contentBlock.removeFromList(a.sortOrder)}},moveup:{title:"Toolbar.MoveUp",iclass:"icon-sxc-move-up",disabled:!1,showOn:"edit",addCondition:function(a,b){return b.isList&&a.useModuleList&&-1!==a.sortOrder&&0!==a.sortOrder},code:function(a,b,c){c.contentBlock.changeOrder(a.sortOrder,Math.max(a.sortOrder-1,0))}},movedown:{title:"Toolbar.MoveDown",iclass:"icon-sxc-move-down",disabled:!1,showOn:"edit",addCondition:function(a,b){return b.isList&&a.useModuleList&&-1!==a.sortOrder},code:function(a,b,c){c.contentBlock.changeOrder(a.sortOrder,a.sortOrder+1)}},sort:{title:"Toolbar.Sort",iclass:"icon-sxc-list-numbered",showOn:"edit",addCondition:function(a,b){return b.isList&&a.useModuleList&&-1!==a.sortOrder}},publish:a("publish","Published","eye","edit",!1,{iclass2:"icon-sxc-eye-off",disabled:!0,code:function(a,b,c){if(a.isPublished)return void alert($2sxc.translate("Toolbar.AlreadyPublished"));var d=-1===a.sortOrder?"listcontent":"content",e=-1===a.sortOrder?0:a.sortOrder;c.contentBlock.publish(d,e)}}),replace:a("replace","Replace","replace","edit",!1,{addCondition:function(a){return a.useModuleList}}),layout:{title:"Toolbar.ChangeLayout",iclass:"icon-sxc-glasses",showOn:"default",uiActionOnly:!0,code:function(a,b,c){c.contentBlock.dialogToggle()}},develop:a("develop","Develop","code","admin",!0,{newWindow:!0,addCondition:c,configureCommand:function(a){a.items=[{EntityId:b.templateId}]}}),contenttype:{title:"Toolbar.ContentType",iclass:"icon-sxc-fields",showOn:"admin",uiActionOnly:!0,addCondition:c},contentitems:{title:"Toolbar.ContentItems",iclass:"icon-sxc-table",showOn:"admin",params:{contentTypeName:b.contentTypeId},uiActionOnly:!0,addCondition:c&&b.contentTypeId},app:{title:"Toolbar.App",iclass:"icon-sxc-settings",showOn:"admin",uiActionOnly:!0,addCondition:c},zone:{title:"Toolbar.Zone",iclass:"icon-sxc-manage",showOn:"admin",uiActionOnly:!0,addCondition:c},more:{title:"Toolbar.MoreActions",iclass:"icon-sxc-options btn-mode",showOn:"default,edit,design,admin",uiActionOnly:!0,code:function(a,b){var d=$(b.target).closest("ul.sc-menu"),e=Number(d.attr("data-state")||0),f=e+1;2===f&&(f=3),f%=c?4:3,d.removeClass("show-set-"+e).addClass("show-set-"+f).attr("data-state",f)}}};return d}}(),function(){$2sxc._contentManagementCommands=function(a,b){var c={editManager:"must-be-added-after-initialization",init:function(a){c.editManager=a},create:function(a){var b=$2sxc._lib.extend({},c.editManager.toolbarConfig,a),d=c.editManager.editContext.Environment.SxcRootUrl+"desktopmodules/tosic_sexycontent/dist/dnn/ui.html?sxcver="+c.editManager.editContext.Environment.SxcVersion,e=$2sxc.urlParams.get("debug")?"&debug=true":"",f={settings:b,items:b.items||[],params:$2sxc._lib.extend({dialog:b.dialog||b.action},b.params),addSimpleItem:function(){var a={},b=f.settings.contentType||f.settings.attributeSetName;f.settings.entityId&&(a.EntityId=f.settings.entityId),b&&(a.ContentTypeName=b),(a.EntityId||a.ContentTypeName)&&f.items.push(a)},addContentGroupItem:function(a,b,c,d,e,g,h){f.items.push({Group:{Guid:a,Index:b,Part:c,Add:d},Title:$2sxc.translate(h)})},addContentGroupItemSetsToEditList:function(a){var b=-1!==f.settings.sortOrder,c=b?f.settings.sortOrder:0,d=b?"":"List",e=d+"Content",g=d+"Presentation",h="new"===f.settings.action,i=f.settings.contentGroupId;f.addContentGroupItem(i,c,e.toLowerCase(),h,f.settings.cbIsEntity,f.settings.cbId,"EditFormTitle."+e),a&&f.addContentGroupItem(i,c,g.toLowerCase(),h,f.settings.cbIsEntity,f.settings.cbId,"EditFormTitle."+g)},generateLink:function(){if(f.settings.items||(f.settings.items=[]),f.settings.prefill)for(var a=0;a<f.items.length;a++)f.items[a].Prefill=f.settings.prefill;return f.params.items=JSON.stringify(f.items),d+"#"+$.param(c.editManager.dialogParameters)+"&"+$.param(f.params)+e}};return f},_linkToNgDialog:function(a){var b=c.editManager.commands.create(a);return b.settings.useModuleList?b.addContentGroupItemSetsToEditList(!0):b.addSimpleItem(),b.settings.configureCommand&&b.settings.configureCommand(b),b.generateLink()},_openNgDialog:function(d,e,f){var g=function(){c.editManager.contentBlock.reloadAndReInitialize(),f()},h=c._linkToNgDialog(d);return d.newWindow||e&&e.shiftKey?window.open(h):d.inlineWindow?$2sxc._dialog.create(a,b,h,g):$2sxc.totalPopup.open(h,g)},executeAction:function(a,b){var d=c.editManager.toolbar.actions[a.action];a=$2sxc._lib.extend({},d,a),a.dialog||(a.dialog=a.action),a.code||(a.code=c._openNgDialog);var e=b||window.event;return d.uiActionOnly?a.code(a,e,c.editManager):void c.editManager.contentBlock.prepareToAddContent().then(function(){return a.code(a,e,c.editManager)})}};return c}}(),function(){$2sxc._lib={extend:function(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}}}(),function(){$2sxc._toolbarManager=function(a,b){function c(){var a={portalId:b.Environment.WebsiteId,tabId:b.Environment.PageId,moduleId:b.Environment.InstanceId,version:b.Environment.SxcVersion,contentGroupId:b.ContentGroup.Guid,cbIsEntity:b.ContentBlock.IsEntity,cbId:b.ContentBlock.Id,appPath:b.ContentGroup.AppUrl,isList:b.ContentGroup.IsList};return a}var d=a.id,e=a.cbid,f={canDesign:b.User.CanDesign,templateId:b.ContentGroup.TemplateId,contentTypeId:b.ContentGroup.ContentTypeName},g=$2sxc._actions.create(f),h={config:c(),refreshConfig:function(){h.config=c()},actions:g,getButton:function(a){if(a.entity&&a.entity._2sxcEditInformation){var b=a.entity._2sxcEditInformation;a.useModuleList=void 0!==b.sortOrder,void 0!==b.entityId&&(a.entityId=b.entityId),void 0!==b.sortOrder&&(a.sortOrder=b.sortOrder),delete a.entity}for(var c=g[a.action],f="",h=c.showOn.split(","),i=$("<div/>"),j=$('<i class="'+c.iclass+'" aria-hidden="true"></i>'),k=0;k<h.length;k++)f+=" show-"+h[k];var l=$("<a />",{"class":"sc-"+a.action+" "+f+(c.dynamicClasses?" "+c.dynamicClasses(a):""),onclick:"javascript:$2sxc("+d+", "+e+").manage.action("+JSON.stringify(a)+", event);","data-i18n":"[title]"+c.title});return"publish"===a.action&&a.isPublished===!1&&(l.addClass("show-default").removeClass("show-edit").attr("data-i18n","[title]Toolbar.Unpublished"),j.removeClass(c.iclass).addClass(c.iclass2)),l.html(i.html(j)),l[0].outerHTML},createDefaultToolbar:function(a){var b=[];b.add=function(c){var d=g[c].addCondition;(void 0===d||("function"==typeof d?d(a,h.config):d))&&b.push($2sxc._lib.extend({},a,{action:c}))};for(var c in g)g.hasOwnProperty(c)&&b.add(c);return b},getToolbar:function(a){for(var b=a.action?[a]:$.isArray(a)?a:h.createDefaultToolbar(a),c="sc-menu show-set-0"+(-1===a.sortOrder?" listContent":""),d=$("<ul />",{"class":c,onclick:"javascript: var e = arguments[0] || window.event; e.stopPropagation();"}),e=0;e<b.length;e++)d.append($("<li />").append($(h.getButton(b[e]))));return d[0].outerHTML},_processToolbars:function(a){a=a?$(a):$(".DnnModule-"+d),$(".sc-menu[data-toolbar]",a).each(function(){var a=$.parseJSON($(this).attr("data-toolbar")),b=$(this);b.replaceWith($2sxc(b).manage.getToolbar(a))})}};return h}}(),function(){var a=!1;$2sxc.translate=function(a){return $.t(a)},$2sxc._initTranslate=function(b){a||(window.i18next.use(window.i18nextXHRBackend).init({lng:b.editContext.Language.Current.substr(0,2),fallbackLng:"en",whitelist:["en","de","fr","it","uk","nl"],preload:["en"],backend:{loadPath:b.editContext.Environment.SxcRootUrl+"desktopmodules/tosic_sexycontent/dist/i18n/inpage-{{lng}}.js"}},function(a,b){jqueryI18next.init(i18next,$),$("ul.sc-menu").localize(),$(".sc-i18n").localize()}),a=!0)}}(),$2sxc.contentBlock=function(a,b,c){var d="_LayoutElement",e=b.editContext,f=""===e.ContentGroup.ContentTypeName&&null!==e.ContentGroup.TemplateId?d:e.ContentGroup.ContentTypeName,g={sxc:a,editContext:e,templateId:e.ContentGroup.TemplateId,undoTemplateId:e.ContentGroup.TemplateId,contentTypeId:f,undoContentTypeId:f,buttonsAreLoaded:!0,replace:function(a,b){try{var d=$(a);$(c).replaceWith(d),c=d,g.buttonsAreLoaded=!1}catch(e){console.log("Error while rendering template:"),console.log(e)}},replacePreview:function(a){g.replace(a,!0)},reloadAndReInitialize:function(c){return c&&(b.reloadWithAjax=!0),b.reloadWithAjax?(c?g.reload(-1):g.reload()).then(function(){b.reloadWithAjax&&a.manage.dialog&&a.manage.dialog.destroy(),g.sxc=g.sxc.recreate(),g.sxc.manage.toolbar._processToolbars(),g.buttonsAreLoaded=!0}):window.location.reload()},reload:function(a){return a||(a=g.templateId),a?b.reloadWithAjax?(g.templateId=a,g._getPreviewWithTemplate(a).then(g.replace)):window.location.reload():null},publish:function(a,b){return g.sxc.webApi.get({url:"view/module/publish",params:{part:a,sortOrder:b}}).then(g.reloadAndReInitialize)},removeFromList:function(a){return g.sxc.webApi.get({url:"view/module/removefromlist",params:{sortOrder:a}}).then(g.reloadAndReInitialize)},changeOrder:function(a,b){return g.sxc.webApi.get({url:"view/module/changeorder",params:{sortOrder:a,destinationSortOrder:b}}).then(g.reloadAndReInitialize)},addItem:function(a){return g.sxc.webApi.get({url:"View/Module/AddItem",params:{sortOrder:a}}).then(g.reloadAndReInitialize)},_getPreviewWithTemplate:function(a){return g.sxc.webApi.get({url:"view/module/rendertemplate",params:{templateId:a,lang:g.editContext.Language.Current,cbisentity:e.ContentBlock.IsEntity,cbid:e.ContentBlock.Id,originalparameters:JSON.stringify(e.Environment.parameters)},dataType:"html"})},_setTemplateChooserState:function(a){return g.sxc.webApi.get({url:"view/module/SetTemplateChooserState",params:{state:a}})},_saveTemplate:function(a,b,c){return g.sxc.webApi.get({url:"view/module/savetemplateid",params:{templateId:a,forceCreateContentGroup:b,newTemplateChooserState:c}})},_cancelTemplateChange:function(){g.templateId=g.undoTemplateId,g.contentTypeId=g.undoContentTypeId,a.manage.dialog.justHide(),g._setTemplateChooserState(!1).then(g.reloadAndReInitialize)},dialogToggle:function(){var a=b.dialog;a?a.toggle():a=b.dialog=b.action({action:"dash-view"});var c=a.isVisible();b.editContext.ContentBlock.ShowTemplatePicker!==c&&g._setTemplateChooserState(c).then(function(){b.editContext.ContentBlock.ShowTemplatePicker=c})},prepareToAddContent:function(){return g.persistTemplate(!0,!1)},persistTemplate:function(a,c){var d,e=!!g.editContext.ContentGroup.HasContent&&g.undoTemplateId===g.templateId;d=e?g.editContext.ContentBlock.ShowTemplatePicker?g._setTemplateChooserState(!1):$.when(null):g._saveTemplate(g.templateId,a,c).then(function(a,c,d){if(200!==d.status)return void alert("error - result not ok, was not able to create ContentGroup");var e=a;e&&(e=e.replace(/[\",\']/g,""),console&&console.log("created content group {"+e+"}"),b.updateContentGroupGuid(e))});var f=d.then(function(){g.undoTemplateId=g.templateId,g.undoContentTypeId=g.contentTypeId,g.editContext.ContentBlock.ShowTemplatePicker=!1,b.dialog&&b.dialog.justHide(),g.editContext.ContentGroup.HasContent||(g.editContext.ContentGroup.HasContent=a),(!g.buttonsAreLoaded||!e&&b.reloadWithAjax)&&g.reloadAndReInitialize()});return f}};return g},function(){function a(a){return $("div[data-cb-id='"+a.cbid+"']")[0]}function b(a){var b=a.getAttribute("data-edit-context");return $.parseJSON(b||"")}$2sxc.getManageController=function(c){var d=a(c),e=b(d),f={zoneId:e.ContentGroup.ZoneId,appId:e.ContentGroup.AppId,tid:e.Environment.PageId,mid:e.Environment.InstanceId,cbid:c.cbid,lang:e.Language.Current,langpri:e.Language.Primary,langs:JSON.stringify(e.Language.All),portalroot:e.Environment.WebsiteUrl,websiteroot:e.Environment.SxcRootUrl,user:{canDesign:e.User.CanDesign,canDevelop:e.User.CanDesign},approot:e.ContentGroup.AppUrl||null},g={appId:e.ContentGroup.AppId,isContent:e.ContentGroup.IsContent,hasContent:e.ContentGroup.HasContent,isList:e.ContentGroup.IsList,templateId:e.ContentGroup.TemplateId,contentTypeId:e.ContentGroup.ContentTypeName,templateChooserVisible:e.ContentBlock.ShowTemplatePicker,user:{canDesign:e.User.CanDesign,canDevelop:e.User.CanDesign},supportsAjax:e.ContentGroup.SupportsAjax},h=$2sxc._toolbarManager(c,e),i=$2sxc._contentManagementCommands(c,d),j={isEditMode:function(){return e.Environment.IsEditable},reloadWithAjax:e.ContentGroup.SupportsAjax,dialogParameters:f,toolbarConfig:h.config,editContext:e,dashboardConfig:g,commands:i,action:i.executeAction,toolbar:h,getButton:h.getButton,createDefaultToolbar:h.createDefaultToolbar,getToolbar:h.getToolbar,init:function(){e.error.type&&j.handleErrors(e.error.type,d),j.commands.init(j),j.contentBlock=$2sxc.contentBlock(c,j,d),!e.error.type&&e.ContentBlock.ShowTemplatePicker&&j.action({action:"layout"})},handleErrors:function(a,b){var c=$('<div class="dnnFormMessage dnnFormWarning sc-element"></div>'),d="",e=$("<ul class='sc-menu'></ul>"),f=[];"DataIsMissing"===a&&(d="Error: System.Exception: Data is missing - usually when a site is copied but the content / apps have not been imported yet - check 2sxc.org/help?tag=export-import",f=["zone","more"],e.attr("data-toolbar",'[{"action": "zone"}, {"action": "more"}]')),c.append(d),c.append(e),$(b).append(c)},updateContentGroupGuid:function(a){e.ContentGroup.Guid=a,h.refreshConfig(),j.toolbarConfig=h.config},createContentBlock:function(a,b,d,e,f){var g=f;if(0===g.length)return alert("can't add content-block as we couldn't find the list");var h=g.find("div.sc-content-block");return d>h.length&&(d=h.length),c.webApi.get({url:"view/module/generatecontentblock",params:{parentId:a,field:b,sortOrder:d,app:e}}).then(function(a){var b=$(a);h.length>0&&d>0?$(h[h.length>d-1?d-1:h.length-1]).after(b):g.prepend(b);var c=$2sxc(b);c.manage.toolbar._processToolbars(b)})},moveContentBlock:function(a,b,d,e){return c.webApi.get({url:"view/module/MoveItemInList",params:{parentId:a,field:b,indexFrom:d,indexTo:e}}).then(function(){console.log("done moving!"),window.location.reload()})},deleteContentBlock:function(a,b,d){return confirm($2sxc.translate("QuickInsertMenu.ConfirmDelete"))?c.webApi.get({url:"view/module/RemoveItemInList",params:{parentId:a,field:b,index:d}}).then(function(){console.log("done deleting!"),window.location.reload()}):null}};return j.init(),j}}(),function(){var a=$2sxc._dialog={mode:"iframe",templates:{inline:"<iframe width='100%' height='100px' src='{{url}}'onresize=\"console.log('resize')\"></iframe>"}};a.create=function(b,c,d,e){function f(){g.syncHeight(),g.resizeInterval=window.setInterval(g.syncHeight,200)}var g=$(a.templates.inline.replace("{{url}}",d))[0];return g.closeCallback=e,g.sxc=b,g.getManageInfo=function(){return g.sxc.manage.dialogParameters},g.getAdditionalDashboardConfig=function(){return g.sxc.manage.dashboardConfig},g.getCommands=function(){return g.vm},g.syncHeight=function(){var a=g.contentDocument.body.offsetHeight;g.previousHeight!==a&&(window.diagBox=g,g.height=a+"px",g.previousHeight=a)},g.addEventListener("load",f),g.isVisible=function(){return"none"!==g.style.display},g.toggle=function(){g.style.display="none"===g.style.display?"":"none"},g.justHide=function(){g.style.display="none"},g.destroy=function(){window.clearInterval(g.resizeInterval),g.remove()},$(c).before(g),g}}();var $2sxcActionMenuMapper=function(a){return{changeLayoutOrContent:function(){$2sxc(a).manage.action({action:"layout"})},addItem:function(){$2sxc(a).manage.action({action:"add",useModuleList:!0,sortOrder:0})},edit:function(){$2sxc(a).manage.action({action:"edit",useModuleList:!0,sortOrder:0})},adminApp:function(){$2sxc(a).manage.action({action:"app"})},adminZone:function(){$2sxc(a).manage.action({action:"zone"})},develop:function(){$2sxc(a).manage.action({action:"develop"})}}};!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define("i18next",b):a.i18next=b()}(this,function(){"use strict";function a(a){return null==a?"":""+a}function b(a,b,c){a.forEach(function(a){b[a]&&(c[a]=b[a])})}function c(a,b,c){function d(a){return a&&a.indexOf("###")>-1?a.replace(/###/g,"."):a}for(var e="string"!=typeof b?[].concat(b):b.split(".");e.length>1;){if(!a)return{};var f=d(e.shift());!a[f]&&c&&(a[f]=new c),a=a[f]}return a?{obj:a,k:d(e.shift())}:{}}function d(a,b,d){var e=c(a,b,Object),f=e.obj,g=e.k;f[g]=d}function e(a,b,d,e){var f=c(a,b,Object),g=f.obj,h=f.k;g[h]=g[h]||[],e&&(g[h]=g[h].concat(d)),e||g[h].push(d)}function f(a,b){var d=c(a,b),e=d.obj,f=d.k;return e?e[f]:void 0}function g(a,b,c){for(var d in b)d in a?"string"==typeof a[d]||a[d]instanceof String||"string"==typeof b[d]||b[d]instanceof String?c&&(a[d]=b[d]):g(a[d],b[d],c):a[d]=b[d];return a}function h(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function i(a){return"string"==typeof a?a.replace(/[&<>"'\/]/g,function(a){return y[a]}):a}function j(a){return a.interpolation={unescapeSuffix:"HTML"},a.interpolation.prefix=a.interpolationPrefix||"__",a.interpolation.suffix=a.interpolationSuffix||"__",a.interpolation.escapeValue=a.escapeInterpolation||!1,a.interpolation.nestingPrefix=a.reusePrefix||"$t(",a.interpolation.nestingSuffix=a.reuseSuffix||")",a}function k(a){return a.resStore&&(a.resources=a.resStore),a.ns&&a.ns.defaultNs?(a.defaultNS=a.ns.defaultNs,a.ns=a.ns.namespaces):a.defaultNS=a.ns||"translation",a.fallbackToDefaultNS&&a.defaultNS&&(a.fallbackNS=a.defaultNS),a.saveMissing=a.sendMissing,a.saveMissingTo=a.sendMissingTo||"current",a.returnNull=!a.fallbackOnNull,a.returnEmptyString=!a.fallbackOnEmpty,a.returnObjects=a.returnObjectTrees,a.joinArrays="\n",a.returnedObjectHandler=a.objectTreeKeyHandler,a.parseMissingKeyHandler=a.parseMissingKey,a.appendNamespaceToMissingKey=!0,a.nsSeparator=a.nsseparator,a.keySeparator=a.keyseparator,"sprintf"===a.shortcutFunction&&(a.overloadTranslationOptionHandler=function(a){for(var b=[],c=1;c<a.length;c++)b.push(a[c]);return{postProcess:"sprintf",sprintf:b}}),a.whitelist=a.lngWhitelist,a.preload=a.preload,"current"===a.load&&(a.load="currentOnly"),"unspecific"===a.load&&(a.load="languageOnly"),a.backend=a.backend||{},a.backend.loadPath=a.resGetPath||"locales/__lng__/__ns__.json",a.backend.addPath=a.resPostPath||"locales/add/__lng__/__ns__",a.backend.allowMultiLoading=a.dynamicLoad,a.cache=a.cache||{},a.cache.prefix="res_",a.cache.expirationTime=6048e5,a.cache.enabled=!!a.useLocalStorage,a=j(a),a.defaultVariables&&(a.interpolation.defaultVariables=a.defaultVariables),a}function l(a){return a=j(a),a.joinArrays="\n",a}function m(a){return(a.interpolationPrefix||a.interpolationSuffix||a.escapeInterpolation)&&(a=j(a)),a.nsSeparator=a.nsseparator,a.keySeparator=a.keyseparator,a.returnObjects=a.returnObjectTrees,a}function n(a){a.lng=function(){return w.deprecate("i18next.lng() can be replaced by i18next.language for detected language or i18next.languages for languages ordered by translation lookup."),a.services.languageUtils.toResolveHierarchy(a.language)[0]},a.preload=function(b,c){w.deprecate("i18next.preload() can be replaced with i18next.loadLanguages()"),a.loadLanguages(b,c)},a.setLng=function(b,c,d){return w.deprecate("i18next.setLng() can be replaced with i18next.changeLanguage() or i18next.getFixedT() to get a translation function with fixed language or namespace."),"function"==typeof c&&(d=c,c={}),c||(c={}),c.fixLng===!0&&d?d(null,a.getFixedT(b)):void a.changeLanguage(b,d)},a.addPostProcessor=function(b,c){w.deprecate("i18next.addPostProcessor() can be replaced by i18next.use({ type: 'postProcessor', name: 'name', process: fc })"),a.use({type:"postProcessor",name:b,process:c})}}function o(a){return a.charAt(0).toUpperCase()+a.slice(1)}function p(){var a={};return D.forEach(function(b){b.lngs.forEach(function(c){return a[c]={numbers:b.nr,plurals:E[b.fc]}})}),a}function q(a,b){for(var c=a.indexOf(b);-1!==c;)a.splice(c,1),c=a.indexOf(b)}function r(){return{debug:!1,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,load:"all",preload:!1,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:!1,saveMissingTo:"fallback",missingKeyHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,overloadTranslationOptionHandler:function(a){return{defaultValue:a[1]}},interpolation:{escapeValue:!0,prefix:"{{",suffix:"}}",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",defaultVariables:void 0}}}function s(a){return"string"==typeof a.ns&&(a.ns=[a.ns]),"string"==typeof a.fallbackLng&&(a.fallbackLng=[a.fallbackLng]),"string"==typeof a.fallbackNS&&(a.fallbackNS=[a.fallbackNS]),a.whitelist&&a.whitelist.indexOf("cimode")<0&&a.whitelist.push("cimode"),a}var t={};t["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},t.classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},t["extends"]=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},t.inherits=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},t.possibleConstructorReturn=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b},t.slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var u={type:"logger",log:function(a){this._output("log",a)},warn:function(a){this._output("warn",a)},error:function(a){this._output("error",a)},_output:function(a,b){console&&console[a]&&console[a].apply(console,Array.prototype.slice.call(b))}},v=function(){function a(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t.classCallCheck(this,a),this.subs=[],this.init(b,c)}return a.prototype.init=function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.prefix=b.prefix||"i18next:",this.logger=a||u,this.options=b,this.debug=b.debug!==!1},a.prototype.setDebug=function(a){this.debug=a,this.subs.forEach(function(b){b.setDebug(a)})},a.prototype.log=function(){this.forward(arguments,"log","",!0)},a.prototype.warn=function(){this.forward(arguments,"warn","",!0)},a.prototype.error=function(){this.forward(arguments,"error","")},a.prototype.deprecate=function(){this.forward(arguments,"warn","WARNING DEPRECATED: ",!0)},a.prototype.forward=function(a,b,c,d){d&&!this.debug||("string"==typeof a[0]&&(a[0]=c+this.prefix+" "+a[0]),this.logger[b](a))},a.prototype.create=function(b){var c=new a(this.logger,t["extends"]({prefix:this.prefix+":"+b+":"},this.options));return this.subs.push(c),c},a}(),w=new v,x=function(){function a(){t.classCallCheck(this,a),this.observers={}}return a.prototype.on=function(a,b){var c=this;a.split(" ").forEach(function(a){c.observers[a]=c.observers[a]||[],c.observers[a].push(b)})},a.prototype.off=function(a,b){var c=this;this.observers[a]&&this.observers[a].forEach(function(){if(b){var d=c.observers[a].indexOf(b);d>-1&&c.observers[a].splice(d,1)}else delete c.observers[a]})},a.prototype.emit=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];this.observers[a]&&this.observers[a].forEach(function(a){a.apply(void 0,c)}),this.observers["*"]&&this.observers["*"].forEach(function(b){var d;b.apply(b,(d=[a]).concat.apply(d,c))})},a}(),y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},z=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],d=arguments.length<=1||void 0===arguments[1]?{ns:["translation"],defaultNS:"translation"}:arguments[1];t.classCallCheck(this,b);var e=t.possibleConstructorReturn(this,a.call(this));return e.data=c,e.options=d,e}return t.inherits(b,a),b.prototype.addNamespaces=function(a){this.options.ns.indexOf(a)<0&&this.options.ns.push(a)},b.prototype.removeNamespaces=function(a){var b=this.options.ns.indexOf(a);b>-1&&this.options.ns.splice(b,1)},b.prototype.getResource=function(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],e=d.keySeparator||this.options.keySeparator;void 0===e&&(e=".");var g=[a,b];return c&&"string"!=typeof c&&(g=g.concat(c)),c&&"string"==typeof c&&(g=g.concat(e?c.split(e):c)),a.indexOf(".")>-1&&(g=a.split(".")),f(this.data,g)},b.prototype.addResource=function(a,b,c,e){var f=arguments.length<=4||void 0===arguments[4]?{silent:!1}:arguments[4],g=this.options.keySeparator;void 0===g&&(g=".");var h=[a,b];c&&(h=h.concat(g?c.split(g):c)),a.indexOf(".")>-1&&(h=a.split("."),e=b,b=h[1]),this.addNamespaces(b),d(this.data,h,e),f.silent||this.emit("added",a,b,c,e)},b.prototype.addResources=function(a,b,c){for(var d in c)"string"==typeof c[d]&&this.addResource(a,b,d,c[d],{silent:!0});this.emit("added",a,b,c)},b.prototype.addResourceBundle=function(a,b,c,e,h){var i=[a,b];a.indexOf(".")>-1&&(i=a.split("."),e=c,c=b,b=i[1]),this.addNamespaces(b);var j=f(this.data,i)||{};e?g(j,c,h):j=t["extends"]({},j,c),d(this.data,i,j),this.emit("added",a,b,c)},b.prototype.removeResourceBundle=function(a,b){this.hasResourceBundle(a,b)&&delete this.data[a][b],this.removeNamespaces(b),this.emit("removed",a,b)},b.prototype.hasResourceBundle=function(a,b){return void 0!==this.getResource(a,b)},b.prototype.getResourceBundle=function(a,b){return b||(b=this.options.defaultNS),"v1"===this.options.compatibilityAPI?t["extends"]({},this.getResource(a,b)):this.getResource(a,b)},b.prototype.toJSON=function(){return this.data},b}(x),A={processors:{},addPostProcessor:function(a){this.processors[a.name]=a},handle:function(a,b,c,d,e){var f=this;return a.forEach(function(a){f.processors[a]&&(b=f.processors[a].process(b,c,d,e))}),b}},B=function(a){function c(d){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t.classCallCheck(this,c);var f=t.possibleConstructorReturn(this,a.call(this));return b(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector"],d,f),f.options=e,f.logger=w.create("translator"),f}return t.inherits(c,a),c.prototype.changeLanguage=function(a){a&&(this.language=a)},c.prototype.exists=function(a){var b=arguments.length<=1||void 0===arguments[1]?{interpolation:{}}:arguments[1];return"v1"===this.options.compatibilityAPI&&(b=m(b)),void 0!==this.resolve(a,b)},c.prototype.extractFromKey=function(a,b){var c=b.nsSeparator||this.options.nsSeparator;void 0===c&&(c=":");var d=b.ns||this.options.defaultNS;if(c&&a.indexOf(c)>-1){var e=a.split(c);d=e[0],a=e[1]}return"string"==typeof d&&(d=[d]),{key:a,namespaces:d}},c.prototype.translate=function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if("object"!==("undefined"==typeof b?"undefined":t["typeof"](b))?b=this.options.overloadTranslationOptionHandler(arguments):"v1"===this.options.compatibilityAPI&&(b=m(b)),void 0===a||null===a||""===a)return"";"number"==typeof a&&(a=String(a)),"string"==typeof a&&(a=[a]);var c=b.lng||this.language;if(c&&"cimode"===c.toLowerCase())return a[a.length-1];var d=b.keySeparator||this.options.keySeparator||".",e=this.extractFromKey(a[a.length-1],b),f=e.key,g=e.namespaces,h=g[g.length-1],i=this.resolve(a,b),j=Object.prototype.toString.apply(i),k=["[object Number]","[object Function]","[object RegExp]"],l=void 0!==b.joinArrays?b.joinArrays:this.options.joinArrays;if(i&&"string"!=typeof i&&k.indexOf(j)<0&&(!l||"[object Array]"!==j)){if(!b.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,i,b):"key '"+f+" ("+this.language+")' returned an object instead of string.";var n="[object Array]"===j?[]:{};for(var o in i)n[o]=this.translate(""+f+d+o,t["extends"]({joinArrays:!1,ns:g},b));i=n}else if(l&&"[object Array]"===j)i=i.join(l),i&&(i=this.extendTranslation(i,f,b));else{var p=!1,q=!1;if(!this.isValidLookup(i)&&b.defaultValue&&(p=!0,i=b.defaultValue),this.isValidLookup(i)||(q=!0,i=f),(q||p)&&(this.logger.log("missingKey",c,h,f,i),this.options.saveMissing)){var r=[];if("fallback"===this.options.saveMissingTo&&this.options.fallbackLng&&this.options.fallbackLng[0])for(var s=0;s<this.options.fallbackLng.length;s++)r.push(this.options.fallbackLng[s]);else"all"===this.options.saveMissingTo?r=this.languageUtils.toResolveHierarchy(b.lng||this.language):r.push(b.lng||this.language);this.options.missingKeyHandler?this.options.missingKeyHandler(r,h,f,i):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(r,h,f,i),this.emit("missingKey",r,h,f,i)}i=this.extendTranslation(i,f,b),q&&i===f&&this.options.appendNamespaceToMissingKey&&(i=h+":"+f),q&&this.options.parseMissingKeyHandler&&(i=this.options.parseMissingKeyHandler(i))}return i},c.prototype.extendTranslation=function(a,b,c){var d=this;c.interpolation&&this.interpolator.init(c);var e=c.replace&&"string"!=typeof c.replace?c.replace:c;this.options.interpolation.defaultVariables&&(e=t["extends"]({},this.options.interpolation.defaultVariables,e)),a=this.interpolator.interpolate(a,e),a=this.interpolator.nest(a,function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return d.translate.apply(d,b)},c),c.interpolation&&this.interpolator.reset();var f=c.postProcess||this.options.postProcess,g="string"==typeof f?[f]:f;return void 0!==a&&g&&g.length&&c.applyPostProcessor!==!1&&(a=A.handle(g,a,b,c,this)),a},c.prototype.resolve=function(a){var b=this,c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],d=void 0;return"string"==typeof a&&(a=[a]),a.forEach(function(a){if(!b.isValidLookup(d)){var e=b.extractFromKey(a,c),f=e.key,g=e.namespaces;b.options.fallbackNS&&(g=g.concat(b.options.fallbackNS));var h=void 0!==c.count&&"string"!=typeof c.count,i=void 0!==c.context&&"string"==typeof c.context&&""!==c.context,j=c.lngs?c.lngs:b.languageUtils.toResolveHierarchy(c.lng||b.language);g.forEach(function(a){b.isValidLookup(d)||j.forEach(function(e){if(!b.isValidLookup(d)){
var g=f,j=[g],k=void 0;h&&(k=b.pluralResolver.getSuffix(e,c.count)),h&&i&&j.push(g+k),i&&j.push(g+=""+b.options.contextSeparator+c.context),h&&j.push(g+=k);for(var l=void 0;l=j.pop();)b.isValidLookup(d)||(d=b.getResource(e,a,l,c))}})})}}),d},c.prototype.isValidLookup=function(a){return!(void 0===a||!this.options.returnNull&&null===a||!this.options.returnEmptyString&&""===a)},c.prototype.getResource=function(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return this.resourceStore.getResource(a,b,c,d)},c}(x),C=function(){function a(b){t.classCallCheck(this,a),this.options=b,this.whitelist=this.options.whitelist||!1,this.logger=w.create("languageUtils")}return a.prototype.getLanguagePartFromCode=function(a){if(a.indexOf("-")<0)return a;var b=["NB-NO","NN-NO","nb-NO","nn-NO","nb-no","nn-no"],c=a.split("-");return this.formatLanguageCode(b.indexOf(a)>-1?c[1].toLowerCase():c[0])},a.prototype.formatLanguageCode=function(a){if("string"==typeof a&&a.indexOf("-")>-1){var b=["hans","hant","latn","cyrl","cans","mong","arab"],c=a.split("-");return this.options.lowerCaseLng?c=c.map(function(a){return a.toLowerCase()}):2===c.length?(c[0]=c[0].toLowerCase(),c[1]=c[1].toUpperCase(),b.indexOf(c[1].toLowerCase())>-1&&(c[1]=o(c[1].toLowerCase()))):3===c.length&&(c[0]=c[0].toLowerCase(),2===c[1].length&&(c[1]=c[1].toUpperCase()),"sgn"!==c[0]&&2===c[2].length&&(c[2]=c[2].toUpperCase()),b.indexOf(c[1].toLowerCase())>-1&&(c[1]=o(c[1].toLowerCase())),b.indexOf(c[2].toLowerCase())>-1&&(c[2]=o(c[2].toLowerCase()))),c.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?a.toLowerCase():a},a.prototype.isWhitelisted=function(a){return"languageOnly"===this.options.load&&(a=this.getLanguagePartFromCode(a)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(a)>-1},a.prototype.toResolveHierarchy=function(a,b){var c=this;b=b||this.options.fallbackLng||[],"string"==typeof b&&(b=[b]);var d=[],e=function(a){c.isWhitelisted(a)?d.push(a):c.logger.warn("rejecting non-whitelisted language code: "+a)};return"string"==typeof a&&a.indexOf("-")>-1?("languageOnly"!==this.options.load&&e(this.formatLanguageCode(a)),"currentOnly"!==this.options.load&&e(this.getLanguagePartFromCode(a))):"string"==typeof a&&e(this.formatLanguageCode(a)),b.forEach(function(a){d.indexOf(a)<0&&e(c.formatLanguageCode(a))}),d},a}(),D=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","es_ar","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt","pt_br","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21}],E={1:function(a){return Number(a>1)},2:function(a){return Number(1!=a)},3:function(a){return 0},4:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)},5:function(a){return Number(0===a?0:1==a?1:2==a?2:a%100>=3&&10>=a%100?3:a%100>=11?4:5)},6:function(a){return Number(1==a?0:a>=2&&4>=a?1:2)},7:function(a){return Number(1==a?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)},8:function(a){return Number(1==a?0:2==a?1:8!=a&&11!=a?2:3)},9:function(a){return Number(a>=2)},10:function(a){return Number(1==a?0:2==a?1:7>a?2:11>a?3:4)},11:function(a){return Number(1==a||11==a?0:2==a||12==a?1:a>2&&20>a?2:3)},12:function(a){return Number(a%10!=1||a%100==11)},13:function(a){return Number(0!==a)},14:function(a){return Number(1==a?0:2==a?1:3==a?2:3)},15:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&(10>a%100||a%100>=20)?1:2)},16:function(a){return Number(a%10==1&&a%100!=11?0:0!==a?1:2)},17:function(a){return Number(1==a||a%10==1?0:1)},18:function(a){return Number(0==a?0:1==a?1:2)},19:function(a){return Number(1==a?0:0===a||a%100>1&&11>a%100?1:a%100>10&&20>a%100?2:3)},20:function(a){return Number(1==a?0:0===a||a%100>0&&20>a%100?1:2)},21:function(a){return Number(a%100==1?1:a%100==2?2:a%100==3||a%100==4?3:0)}},F=function(){function a(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t.classCallCheck(this,a),this.languageUtils=b,this.options=c,this.logger=w.create("pluralResolver"),this.rules=p()}return a.prototype.addRule=function(a,b){this.rules[a]=b},a.prototype.getRule=function(a){return this.rules[this.languageUtils.getLanguagePartFromCode(a)]},a.prototype.needsPlural=function(a){var b=this.getRule(a);return!(b&&b.numbers.length<=1)},a.prototype.getSuffix=function(a,b){var c=this.getRule(a);if(c){if(1===c.numbers.length)return"";var d=c.noAbs?c.plurals(b):c.plurals(Math.abs(b)),e=c.numbers[d];if(2===c.numbers.length&&1===c.numbers[0]&&(2===e?e="plural":1===e&&(e="")),"v1"===this.options.compatibilityJSON){if(1===e)return"";if("number"==typeof e)return"_plural_"+e.toString()}return this.options.prepend&&e.toString()?this.options.prepend+e.toString():e.toString()}return this.logger.warn("no plural rule found for: "+a),""},a}(),G=function(){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];t.classCallCheck(this,b),this.logger=w.create("interpolator"),this.init(a,!0)}return b.prototype.init=function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=arguments[1];b&&(this.options=a),a.interpolation||(a.interpolation={escapeValue:!0});var c=a.interpolation;this.escapeValue=c.escapeValue,this.prefix=c.prefix?h(c.prefix):c.prefixEscaped||"{{",this.suffix=c.suffix?h(c.suffix):c.suffixEscaped||"}}",this.unescapePrefix=c.unescapeSuffix?"":c.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":c.unescapeSuffix||"",this.nestingPrefix=c.nestingPrefix?h(c.nestingPrefix):c.nestingPrefixEscaped||h("$t("),this.nestingSuffix=c.nestingSuffix?h(c.nestingSuffix):c.nestingSuffixEscaped||h(")");var d=this.prefix+"(.+?)"+this.suffix;this.regexp=new RegExp(d,"g");var e=this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(e,"g");var f=this.nestingPrefix+"(.+?)"+this.nestingSuffix;this.nestingRegexp=new RegExp(f,"g")},b.prototype.reset=function(){this.options&&this.init(this.options)},b.prototype.interpolate=function(b,c){function d(a){return a.replace(/\$/g,"$$$$")}for(var e=void 0,g=void 0;e=this.regexpUnescape.exec(b);){var h=f(c,e[1].trim());b=b.replace(e[0],h)}for(;e=this.regexp.exec(b);)g=f(c,e[1].trim()),"string"!=typeof g&&(g=a(g)),g||(this.logger.warn("missed to pass in variable "+e[1]+" for interpolating "+b),g=""),g=d(this.escapeValue?i(g):g),b=b.replace(e[0],g),this.regexp.lastIndex=0;return b},b.prototype.nest=function(b,c){function d(a){return a.replace(/\$/g,"$$$$")}function e(a){if(a.indexOf(",")<0)return a;var b=a.split(",");a=b.shift();var c=b.join(",");c=this.interpolate(c,j);try{j=JSON.parse(c)}catch(d){this.logger.error("failed parsing options string in nesting for key "+a,d)}return a}var f=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],g=void 0,h=void 0,j=JSON.parse(JSON.stringify(f));for(j.applyPostProcessor=!1;g=this.nestingRegexp.exec(b);)h=c(e.call(this,g[1].trim()),j),"string"!=typeof h&&(h=a(h)),h||(this.logger.warn("missed to pass in variable "+g[1]+" for interpolating "+b),h=""),h=d(this.escapeValue?i(h):h),b=b.replace(g[0],h),this.regexp.lastIndex=0;return b},b}(),H=function(a){function b(c,d,e){var f=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];t.classCallCheck(this,b);var g=t.possibleConstructorReturn(this,a.call(this));return g.backend=c,g.store=d,g.services=e,g.options=f,g.logger=w.create("backendConnector"),g.state={},g.queue=[],g.backend&&g.backend.init&&g.backend.init(e,f.backend,f),g}return t.inherits(b,a),b.prototype.queueLoad=function(a,b,c){var d=this,e=[],f=[],g=[],h=[];return a.forEach(function(a){var c=!0;b.forEach(function(b){var g=a+"|"+b;d.store.hasResourceBundle(a,b)?d.state[g]=2:d.state[g]<0||(1===d.state[g]?f.indexOf(g)<0&&f.push(g):(d.state[g]=1,c=!1,f.indexOf(g)<0&&f.push(g),e.indexOf(g)<0&&e.push(g),h.indexOf(b)<0&&h.push(b)))}),c||g.push(a)}),(e.length||f.length)&&this.queue.push({pending:f,loaded:{},errors:[],callback:c}),{toLoad:e,pending:f,toLoadLanguages:g,toLoadNamespaces:h}},b.prototype.loaded=function(a,b,c){var d=this,f=a.split("|"),g=t.slicedToArray(f,2),h=g[0],i=g[1];b&&this.emit("failedLoading",h,i,b),c&&this.store.addResourceBundle(h,i,c),this.state[a]=b?-1:2,this.queue.forEach(function(c){e(c.loaded,[h],i),q(c.pending,a),b&&c.errors.push(b),0!==c.pending.length||c.done||(c.errors.length?c.callback(c.errors):c.callback(),d.emit("loaded",c.loaded),c.done=!0)}),this.queue=this.queue.filter(function(a){return!a.done})},b.prototype.read=function(a,b,c,d,e,f){var g=this;return d||(d=0),e||(e=250),a.length?void this.backend[c](a,b,function(h,i){return h&&i&&5>d?void setTimeout(function(){g.read.call(g,a,b,c,++d,2*e,f)},e):void f(h,i)}):f(null,{})},b.prototype.load=function(a,b,c){var d=this;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),c&&c();var e=t["extends"]({},this.backend.options,this.options.backend);"string"==typeof a&&(a=this.services.languageUtils.toResolveHierarchy(a)),"string"==typeof b&&(b=[b]);var g=this.queueLoad(a,b,c);return g.toLoad.length?void(e.allowMultiLoading&&this.backend.readMulti?this.read(g.toLoadLanguages,g.toLoadNamespaces,"readMulti",null,null,function(a,b){a&&d.logger.warn("loading namespaces "+g.toLoadNamespaces.join(", ")+" for languages "+g.toLoadLanguages.join(", ")+" via multiloading failed",a),!a&&b&&d.logger.log("loaded namespaces "+g.toLoadNamespaces.join(", ")+" for languages "+g.toLoadLanguages.join(", ")+" via multiloading",b),g.toLoad.forEach(function(c){var e=c.split("|"),g=t.slicedToArray(e,2),h=g[0],i=g[1],j=f(b,[h,i]);if(j)d.loaded(c,a,j);else{var k="loading namespace "+i+" for language "+h+" via multiloading failed";d.loaded(c,k),d.logger.error(k)}})}):!function(){var a=function(a){var b=this,c=a.split("|"),d=t.slicedToArray(c,2),e=d[0],f=d[1];this.read(e,f,"read",null,null,function(c,d){c&&b.logger.warn("loading namespace "+f+" for language "+e+" failed",c),!c&&d&&b.logger.log("loaded namespace "+f+" for language "+e,d),b.loaded(a,c,d)})};g.toLoad.forEach(function(b){a.call(d,b)})}()):void(g.pending.length||c())},b.prototype.saveMissing=function(a,b,c,d){this.backend&&this.backend.create&&this.backend.create(a,b,c,d),this.store.addResource(a[0],b,c,d)},b}(x),I=function(a){function b(c,d,e){var f=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];t.classCallCheck(this,b);var g=t.possibleConstructorReturn(this,a.call(this));return g.cache=c,g.store=d,g.services=e,g.options=f,g.logger=w.create("cacheConnector"),g.cache&&g.cache.init&&g.cache.init(e,f.cache,f),g}return t.inherits(b,a),b.prototype.load=function(a,b,c){var d=this;if(!this.cache)return c&&c();var e=t["extends"]({},this.cache.options,this.options.cache);"string"==typeof a&&(a=this.services.languageUtils.toResolveHierarchy(a)),"string"==typeof b&&(b=[b]),e.enabled?this.cache.load(a,function(b,e){if(b&&d.logger.error("loading languages "+a.join(", ")+" from cache failed",b),e)for(var f in e)for(var g in e[f])if("i18nStamp"!==g){var h=e[f][g];h&&d.store.addResourceBundle(f,g,h)}c&&c()}):c&&c()},b.prototype.save=function(){this.cache&&this.options.cache&&this.options.cache.enabled&&this.cache.save(this.store.data)},b}(x),J=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],d=arguments[1];t.classCallCheck(this,b);var e=t.possibleConstructorReturn(this,a.call(this));return e.options=s(c),e.services={},e.logger=w,e.modules={},d&&!e.isInitialized&&e.init(c,d),e}return t.inherits(b,a),b.prototype.init=function(a,b){function c(a){return a?"function"==typeof a?new a:a:void 0}var d=this;if("function"==typeof a&&(b=a,a={}),a||(a={}),"v1"===a.compatibilityAPI?this.options=t["extends"]({},r(),s(k(a)),{}):"v1"===a.compatibilityJSON?this.options=t["extends"]({},r(),s(l(a)),{}):this.options=t["extends"]({},r(),this.options,s(a)),b||(b=function(){}),!this.options.isClone){this.modules.logger?w.init(c(this.modules.logger),this.options):w.init(null,this.options);var e=new C(this.options);this.store=new z(this.options.resources,this.options);var f=this.services;f.logger=w,f.resourceStore=this.store,f.resourceStore.on("added removed",function(a,b){f.cacheConnector.save()}),f.languageUtils=e,f.pluralResolver=new F(e,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON}),f.interpolator=new G(this.options),f.backendConnector=new H(c(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),e=1;b>e;e++)c[e-1]=arguments[e];d.emit.apply(d,[a].concat(c))}),f.backendConnector.on("loaded",function(a){f.cacheConnector.save()}),f.cacheConnector=new I(c(this.modules.cache),f.resourceStore,f,this.options),f.cacheConnector.on("*",function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),e=1;b>e;e++)c[e-1]=arguments[e];d.emit.apply(d,[a].concat(c))}),this.modules.languageDetector&&(f.languageDetector=c(this.modules.languageDetector),f.languageDetector.init(f,this.options.detection,this.options)),this.translator=new B(this.services,this.options),this.translator.on("*",function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),e=1;b>e;e++)c[e-1]=arguments[e];d.emit.apply(d,[a].concat(c))})}var g=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle"];g.forEach(function(a){d[a]=function(){return this.store[a].apply(this.store,arguments)}}),"v1"===this.options.compatibilityAPI&&n(this);var h=function(){d.changeLanguage(d.options.lng,function(a,c){d.emit("initialized",d.options),d.logger.log("initialized",d.options),b(a,c)})};return this.options.resources?h():setTimeout(h,10),this},b.prototype.loadResources=function(a){var b=this;if(a||(a=function(){}),this.options.resources)a(null);else{var c=function(){if(b.language&&"cimode"===b.language.toLowerCase())return{v:a()};var c=[],d=function(a){var d=b.services.languageUtils.toResolveHierarchy(a);d.forEach(function(a){c.indexOf(a)<0&&c.push(a)})};d(b.language),b.options.preload&&b.options.preload.forEach(function(a){d(a)}),b.services.cacheConnector.load(c,b.options.ns,function(){b.services.backendConnector.load(c,b.options.ns,a)})}();if("object"===("undefined"==typeof c?"undefined":t["typeof"](c)))return c.v}},b.prototype.use=function(a){return"backend"===a.type&&(this.modules.backend=a),"cache"===a.type&&(this.modules.cache=a),("logger"===a.type||a.log&&a.warn&&a.warn)&&(this.modules.logger=a),"languageDetector"===a.type&&(this.modules.languageDetector=a),"postProcessor"===a.type&&A.addPostProcessor(a),this},b.prototype.changeLanguage=function(a,b){var c=this,d=function(d){a&&(c.emit("languageChanged",a),c.logger.log("languageChanged",a)),b&&b(d,function(){for(var a=arguments.length,b=Array(a),d=0;a>d;d++)b[d]=arguments[d];return c.t.apply(c,b)})};!a&&this.services.languageDetector&&(a=this.services.languageDetector.detect()),a&&(this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.translator.changeLanguage(a),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage(a)),this.loadResources(function(a){d(a)})},b.prototype.getFixedT=function(a,b){var c=this,d=function e(a,b){return b=b||{},b.lng=b.lng||e.lng,b.ns=b.ns||e.ns,c.t(a,b)};return d.lng=a,d.ns=b,d},b.prototype.t=function(){return this.translator&&this.translator.translate.apply(this.translator,arguments)},b.prototype.exists=function(){return this.translator&&this.translator.exists.apply(this.translator,arguments)},b.prototype.setDefaultNamespace=function(a){this.options.defaultNS=a},b.prototype.loadNamespaces=function(a,b){var c=this;return this.options.ns?("string"==typeof a&&(a=[a]),a.forEach(function(a){c.options.ns.indexOf(a)<0&&c.options.ns.push(a)}),void this.loadResources(b)):b&&b()},b.prototype.loadLanguages=function(a,b){"string"==typeof a&&(a=[a]);var c=this.options.preload||[],d=a.filter(function(a){return c.indexOf(a)<0});return d.length?(this.options.preload=c.concat(d),void this.loadResources(b)):b()},b.prototype.dir=function(a){a||(a=this.language);var b=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return b.indexOf(this.services.languageUtils.getLanguagePartFromCode(a))?"ltr":"rtl"},b.prototype.createInstance=function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=arguments[1];return new b(a,c)},b.prototype.cloneInstance=function(){var a=this,c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],d=arguments[1],e=new b(t["extends"]({},c,this.options,{isClone:!0}),d),f=["store","translator","services","language"];return f.forEach(function(b){e[b]=a[b]}),e},b}(x),K=new J;return K}),!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define("i18nextXHRBackend",b):a.i18nextXHRBackend=b()}(this,function(){"use strict";function a(a){return f.call(g.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a}function b(a,b,c,e,f){if(e&&"object"===("undefined"==typeof e?"undefined":d["typeof"](e))){var g="",h=encodeURIComponent;for(var i in e)g+="&"+h(i)+"="+h(e[i]);e=g.slice(1)+(f?"":"&_t="+new Date)}try{var j=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");j.open(e?"POST":"GET",a,1),b.crossDomain||j.setRequestHeader("X-Requested-With","XMLHttpRequest"),j.setRequestHeader("Content-type","application/x-www-form-urlencoded"),j.onreadystatechange=function(){j.readyState>3&&c&&c(j.responseText,j)},j.send(e)}catch(h){window.console&&console.log(h)}}function c(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:b}}var d={};d["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},d.classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},d.createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();var e=[],f=e.forEach,g=e.slice,h=function(){function b(a){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];d.classCallCheck(this,b),this.init(a,c),this.type="backend"}return d.createClass(b,[{key:"init",value:function(b){var d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.services=b,this.options=a(d,this.options||{},c())}},{key:"readMulti",value:function(a,b,c){var d=this.services.interpolator.interpolate(this.options.loadPath,{lng:a.join("+"),ns:b.join("+")});this.loadUrl(d,c)}},{key:"read",value:function(a,b,c){var d=this.services.interpolator.interpolate(this.options.loadPath,{lng:a,ns:b});this.loadUrl(d,c)}},{key:"loadUrl",value:function(a,b){var c=this;this.options.ajax(a,this.options,function(d,e){var f=e.status.toString();if(0===f.indexOf("5"))return b("failed loading "+a,!0);if(0===f.indexOf("4"))return b("failed loading "+a,!1);var g=void 0,h=void 0;try{g=c.options.parse(d)}catch(i){h="failed parsing "+a+" to json"}return h?b(h,!1):void b(null,g)})}},{key:"create",value:function(a,b,c,d){var e=this;"string"==typeof a&&(a=[a]);var f={};f[c]=d||"",a.forEach(function(a){var c=e.services.interpolator.interpolate(e.options.addPath,{lng:a,ns:b});e.options.ajax(c,e.options,function(a,b){},f)})}}]),b}();return h.type="backend",h}),!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define("jqueryI18next",b):a.jqueryI18next=b()}(this,function(){"use strict";function a(a,d){function e(c,d,e){function f(a,c){return h.parseDefaultValueFromContent?b["extends"]({},a,{defaultValue:c}):a}if(0!==d.length){var g="text";if(0===d.indexOf("[")){var i=d.split("]");d=i[1],g=i[0].substr(1,i[0].length-1)}if(d.indexOf(";")===d.length-1&&(d=d.substr(0,d.length-2)),"html"===g)c.html(a.t(d,f(e,c.html())));else if("text"===g)c.text(a.t(d,f(e,c.text())));else if("prepend"===g)c.prepend(a.t(d,f(e,c.html())));else if("append"===g)c.append(a.t(d,f(e,c.html())));else if(0===g.indexOf("data-")){var j=g.substr("data-".length),k=a.t(d,f(e,c.data(j)));c.data(j,k),c.attr(g,k)}else c.attr(g,a.t(d,f(e,c.attr(g))))}}function f(a,c){var f=a.attr(h.selectorAttr);if(f||"undefined"==typeof f||f===!1||(f=a.text()||a.val()),f){var g=a,i=a.data(h.targetAttr);if(i&&(g=a.find(i)||a),c||h.useOptionsAttr!==!0||(c=a.data(h.optionsAttr)),c=c||{},f.indexOf(";")>=0){var j=f.split(";");d.each(j,function(a,b){""!==b&&e(g,b,c)})}else e(g,f,c);if(h.useOptionsAttr===!0){var k={};k=b["extends"]({clone:k},c),delete k.lng,a.data(h.optionsAttr,k)}}}function g(a){return this.each(function(){f(d(this),a);var b=d(this).find("["+h.selectorAttr+"]");b.each(function(){f(d(this),a)})})}var h=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];h=b["extends"]({},c,h),d[h.tName]=a.t.bind(a),d[h.i18nName]=a,d.fn[h.handleName]=g}var b={};b["extends"]=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};var c={tName:"t",i18nName:"i18n",handleName:"localize",selectorAttr:"data-i18n",targetAttr:"i18n-target",optionsAttr:"i18n-options",useOptionsAttr:!1,parseDefaultValueFromContent:!0},d={init:a};return d}),$(document).ready(function(){$(".sc-menu").click(function(a){a.stopPropagation()});var a=$("div[data-edit-context]");console&&console.log("found "+a.length+" content blocks"),window.setTimeout(function(){a.each(function(){try{$2sxc(this).manage.toolbar._processToolbars(this)}catch(a){console&&console.error&&console.error(a)}})},0),window.EavEditDialogs=[]}),$(function(){"use strict";function a(a,b,c,d,e,f){return"<a class='sc-content-block-menu-btn sc-cb-action icon-sxc-"+b+" "+(d?" sc-invisible ":"")+(e?" sc-unavailable ":"")+f+"' data-action='"+a+"' data-i18n='[title]QuickInsertMenu."+c+"'></a>"}var b={cb:{id:"cb","class":"sc-content-block",selector:".sc-content-block",listSelector:".sc-content-block-list",context:"data-list-context"},mod:{id:"mod","class":"DnnModule",selector:".DnnModule",listSelector:".DNNEmptyPane, .dnnDropEmptyPanes, :has(>.DnnModule)",context:null},eitherCbOrMod:".DnnModule, .sc-content-block",selected:"sc-cb-is-selected"},c=$(b.cb.listSelector).length>0,d={enableCb:c,enableMod:!c,body:$("body"),win:$(window),main:$("<div class='sc-content-block-menu sc-content-block-quick-insert sc-i18n'></div>"),template:"<a class='sc-content-block-menu-addcontent sc-invisible' data-type='Default' data-i18n='[titleTemplate]QuickInsertMenu.AddBlockContent'>x</a><a class='sc-content-block-menu-addapp sc-invisible' data-type='' data-i18n='[titleTemplate]QuickInsertMenu.AddBlockApp'>x</a>"+a("select","ok","Select",!0)+a("paste","paste","Paste",!0,!0),selected:$("<div class='sc-content-block-menu sc-content-block-selected-menu sc-i18n'></div>").append(a("delete","trash-empty","Delete")),contentBlocks:null,modules:null,nearestCb:null,nearestMod:null};$2sxc._lib.extend(d,{cbActions:$(d.template),modActions:$(d.template.replace(/QuickInsertMenu.AddBlock/g,"QuickInsertMenu.AddModule")).attr("data-context","module").addClass("sc-content-block-menu-module")}),d.init=function(){d.body.append(d.main),d.body.append(d.selected),d.enableCb&&d.main.append(d.cbActions),d.enableMod&&d.main.append(d.modActions)},d.init(),d.selected.toggle=function(a){if(!a)return d.selected.hide();var b=d.getCoordinates(a);b.yh=b.y+20,d.positionAndAlign(d.selected,b),d.selected.target=a},$("a",d.selected).click(function(){var a=$(this).data("action"),b=d.clipboard.data;switch(a){case"cancel":return d.clipboard.clear();case"delete":d.cmds[b.type]["delete"](b)}}),d.cmds={cb:{"delete":function(a){return $2sxc(a.list).manage.deleteContentBlock(a.parent,a.field,a.index)}},mod:{"delete":function(a){alert("module delete not implemented yet")},move:function(a,b){}}},d.cbActions.click(function(){var a=d.main.actionsForCb.closest(b.cb.listSelector),c=a.find(b.cb.selector),e=JSON.parse(a.attr(b.cb.context)),f=0;d.main.actionsForCb.hasClass(b.cb["class"])&&(f=c.index(d.main.actionsForCb[0])+1);var g=$(this).data("action");if(g)return d.copyPasteInPage(g,a,f,b.cb.id);var h=$(this).data("type");return $2sxc(a).manage.createContentBlock(e.parent,e.field,f,h,a)}),d.copyPasteInPage=function(a,b,c,e){var f=d.clipboard.createSpecs(e,b,c);if("select"===a)d.clipboard.mark(f);else if("paste"===a){var g=d.clipboard.data.index,h=f.index;if(isNaN(g)||isNaN(h)||g===h||g+1===h)return d.clipboard.clear();$2sxc(b).manage.moveContentBlock(f.parent,f.field,g,h),d.clipboard.clear()}},d.clipboard={data:{},mark:function(a){if(a){if(d.clipboard.data&&d.clipboard.data.item===a.item)return d.clipboard.clear();d.clipboard.data=a}$("."+b.selected).removeClass(b.selected);var c=$(d.clipboard.data.item);c.addClass(b.selected),c.prev().is("iframe")&&c.prev().addClass(b.selected),d.setSecondaryActionsState(!0),d.selected.toggle(c)},clear:function(){$("."+b.selected).removeClass(b.selected),d.clipboard.data=null,d.setSecondaryActionsState(!1),d.selected.toggle(!1)},createSpecs:function(a,c,d){var e=c.find(b[a].selector);d>=e.length&&(d=e.length-1);var f=e[d],g=JSON.parse(c.attr(b.cb.context)||null)||{parent:"dnn",field:c.id};return{parent:g.parent,field:g.field,list:c,item:f,index:d,type:a}}},d.setSecondaryActionsState=function(a){var b=$("a.sc-content-block-menu-btn");b=b.filter(".icon-sxc-paste"),b.toggleClass("sc-unavailable",!a)},d.modActions.click(function(){var a=$(this).data("type"),c=d.main.actionsForModule.closest(b.mod.listSelector),e=c.attr("id").replace("dnn_",""),f=0;d.main.actionsForModule.hasClass("DnnModule")&&(f=c.find(".DnnModule").index(d.main.actionsForModule[0])+1);var g=$(this).data("action");if(g)return d.copyPasteInPage(g,c,f,b.mod.id);var h=$.dnnSF(),i=h.getServiceRoot("internalservices")+"controlbar/",j=function(a){alert("Error while adding module."),console.log(a)};$.ajax({url:i+"GetPortalDesktopModules",type:"GET",data:"category=All&loadingStartIndex=0&loadingPageSize=100&searchTerm=",beforeSend:h.setModuleHeaders,success:function(b){var c="Default"===a?" Content":" App",d=null;if(b.forEach(function(a,b){a.ModuleName===c&&(d=a)}),!d)return alert(c+" module not found.");var g={Module:d.ModuleID,Page:"",Pane:e,Position:-1,Sort:f,Visibility:0,AddExistingModule:!1,CopyModule:!1};$.ajax({url:i+"AddModule",type:"POST",data:g,beforeSend:h.setModuleHeaders,success:function(a){window.location.reload()},error:j})},error:j})});var e=null;$("body").on("mousemove",function(a){null===e&&(e=window.setTimeout(function(){requestAnimationFrame(function(){d.refresh(a),e=null})},20))}),d.getBodyPosition=function(){var a=d.body.css("position");return"relative"===a||"absolute"===a?{x:d.body.offset().left,y:d.body.offset().top}:{x:0,y:0}},d.bodyOffset=d.getBodyPosition(),d.refreshDomObjects=function(){d.bodyOffset=d.getBodyPosition(),d.cachedPanes||(d.cachedPanes=$(b.mod.listSelector)),d.enableCb&&(d.contentBlocks=$(b.cb.listSelector).find(b.cb.selector).add(b.cb.listSelector)),d.enableMod&&(d.modules=d.cachedPanes.find(b.mod.selector).add(d.cachedPanes))},d.positionAndAlign=function(a,b){return a.css({left:b.x-d.bodyOffset.x,top:b.yh-d.bodyOffset.y,width:b.element.width()}).show()},d.refresh=function(a){if((!d.refreshDomObjects.lastCall||new Date-d.refreshDomObjects.lastCall>1e3)&&(d.refreshDomObjects.lastCall=new Date,d.refreshDomObjects()),d.enableCb&&d.contentBlocks&&(d.nearestCb=d.findNearest(d.contentBlocks,{x:a.clientX,y:a.clientY},b.cb.selector)),d.enableMod&&d.modules&&(d.nearestMod=d.findNearest(d.modules,{x:a.clientX,y:a.clientY},b.mod.selector)),d.modActions.toggleClass("sc-invisible",null===d.nearestMod),d.cbActions.toggleClass("sc-invisible",null===d.nearestCb),d.main.parentContainer&&$(d.main.parentContainer).removeClass("sc-cb-highlight-for-insert"),null!==d.nearestCb||null!==d.nearestMod){var c=d.nearestCb||d.nearestMod,e=$(c.element).closest(b.mod.listSelector),f=$(c.element).closest(b.cb.listSelector),g=(f.length?f:e)[0];if(e.length>0){var h=e.attr("id")||"";h.length>4&&(h=h.substr(4)),d.modActions.filter("[titleTemplate]").each(function(){var a=$(this);a.attr("title",a.attr("titleTemplate").replace("{0}",h))})}d.positionAndAlign(d.main,c,!0),d.main.actionsForCb=d.nearestCb?d.nearestCb.element:null,d.main.actionsForModule=d.nearestMod?d.nearestMod.element:null,d.main.parentContainer=g,$(g).addClass("sc-cb-highlight-for-insert")}else d.main.hide()},d.findNearest=function(a,b){var c=30,e=null,f=c,g=b.x+d.win.scrollLeft(),h=b.y+d.win.scrollTop();return a.each(function(){var a=d.getCoordinates($(this));if(!(g<a.x||g>a.x+a.w)){var b=Math.abs(h-a.yh);c>b&&f>b&&(e=a,f=b)}}),e},d.getCoordinates=function(a){return{element:a,x:a.offset().left,w:a.width(),y:a.offset().top,yh:a.offset().top+(a.is(b.eitherCbOrMod)?a.height():0)}}});
//# sourceMappingURL=inpage.min.js.map