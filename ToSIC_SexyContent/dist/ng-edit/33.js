(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{F7GT:function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return M})),n.d(t,"c",(function(){return O}));var i=n("owml"),o=n("1C3z"),a=n("OeRG"),r=n("D57K"),c=n("O3VH"),l=n("ZSGP"),s=n("wget"),d=n("rRQw"),p=n("q4gG"),u=["thumbContainer"],g=["toggleBar"],f=["input"],b=function(){return{enterDuration:150}},m=["*"],h=new o.q("mat-slide-toggle-default-options",{providedIn:"root",factory:function(){return{disableToggleValue:!1}}}),y=0,v={provide:l.p,useExisting:Object(o.T)((function(){return C})),multi:!0},x=function(){return function(e,t){this.source=e,this.checked=t}}(),P=function(){return function(e){this._elementRef=e}}(),C=function(e){function t(t,n,i,a,r,c,l,s){var d=e.call(this,t)||this;return d._focusMonitor=n,d._changeDetectorRef=i,d.defaults=c,d._animationMode=l,d._onChange=function(e){},d._onTouched=function(){},d._uniqueId="mat-slide-toggle-"+ ++y,d._required=!1,d._checked=!1,d.name=null,d.id=d._uniqueId,d.labelPosition="after",d.ariaLabel=null,d.ariaLabelledby=null,d.change=new o.n,d.toggleChange=new o.n,d.dragChange=new o.n,d.tabIndex=parseInt(a)||0,d}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"required",{get:function(){return this._required},set:function(e){this._required=Object(c.b)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return this._checked},set:function(e){this._checked=Object(c.b)(e),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputId",{get:function(){return(this.id||this._uniqueId)+"-input"},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var e=this;this._focusMonitor.monitor(this._elementRef,!0).subscribe((function(t){"keyboard"===t||"program"===t?e._inputElement.nativeElement.focus():t||Promise.resolve().then((function(){return e._onTouched()}))}))},t.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._elementRef)},t.prototype._onChangeEvent=function(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())},t.prototype._onInputClick=function(e){e.stopPropagation()},t.prototype.writeValue=function(e){this.checked=!!e},t.prototype.registerOnChange=function(e){this._onChange=e},t.prototype.registerOnTouched=function(e){this._onTouched=e},t.prototype.setDisabledState=function(e){this.disabled=e,this._changeDetectorRef.markForCheck()},t.prototype.focus=function(e){this._focusMonitor.focusVia(this._inputElement,"keyboard",e)},t.prototype.toggle=function(){this.checked=!this.checked,this._onChange(this.checked)},t.prototype._emitChangeEvent=function(){this._onChange(this.checked),this.change.emit(new x(this,this.checked))},t.prototype._onLabelTextChange=function(){this._changeDetectorRef.detectChanges()},t.\u0275fac=function(e){return new(e||t)(o.Qb(o.l),o.Qb(d.h),o.Qb(o.h),o.bc("tabindex"),o.Qb(o.z),o.Qb(h),o.Qb(s.a,8),o.Qb(p.c,8))},t.\u0275cmp=o.Kb({type:t,selectors:[["mat-slide-toggle"]],viewQuery:function(e,t){var n;1&e&&(o.Vc(u,!0),o.Vc(g,!0),o.Vc(f,!0)),2&e&&(o.Bc(n=o.fc())&&(t._thumbEl=n.first),o.Bc(n=o.fc())&&(t._thumbBarEl=n.first),o.Bc(n=o.fc())&&(t._inputElement=n.first))},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(e,t){2&e&&(o.Zb("id",t.id),o.Cb("tabindex",t.disabled?null:-1)("aria-label",null)("aria-labelledby",null),o.Gb("mat-checked",t.checked)("mat-disabled",t.disabled)("mat-slide-toggle-label-before","before"==t.labelPosition)("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",required:"required",checked:"checked",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},outputs:{change:"change",toggleChange:"toggleChange",dragChange:"dragChange"},exportAs:["matSlideToggle"],features:[o.Ab([v]),o.yb],ngContentSelectors:m,decls:16,vars:18,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,t){if(1&e&&(o.pc(),o.Wb(0,"label",0,1),o.Wb(2,"div",2,3),o.Wb(4,"input",4,5),o.ec("change",(function(e){return t._onChangeEvent(e)}))("click",(function(e){return t._onInputClick(e)})),o.Vb(),o.Wb(6,"div",6,7),o.Rb(8,"div",8),o.Wb(9,"div",9),o.Rb(10,"div",10),o.Vb(),o.Vb(),o.Vb(),o.Wb(11,"span",11,12),o.ec("cdkObserveContent",(function(){return t._onLabelTextChange()})),o.Wb(13,"span",13),o.Pc(14,"\xa0"),o.Vb(),o.oc(15),o.Vb(),o.Vb()),2&e){var n=o.Cc(1),i=o.Cc(12);o.Cb("for",t.inputId),o.Bb(2),o.Gb("mat-slide-toggle-bar-no-side-margin",!i.textContent||!i.textContent.trim()),o.Bb(2),o.qc("id",t.inputId)("required",t.required)("tabIndex",t.tabIndex)("checked",t.checked)("disabled",t.disabled),o.Cb("name",t.name)("aria-checked",t.checked.toString())("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby),o.Bb(5),o.qc("matRippleTrigger",n)("matRippleDisabled",t.disableRipple||t.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",o.uc(17,b))}},directives:[a.q,i.a],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),t}(Object(a.z)(Object(a.v)(Object(a.w)(Object(a.x)(P)),"accent"))),_={provide:l.o,useExisting:Object(o.T)((function(){return O})),multi:!0},O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.d)(t,e),t.\u0275fac=function(e){return n(e||t)},t.\u0275dir=o.Lb({type:t,selectors:[["mat-slide-toggle","required","","formControlName",""],["mat-slide-toggle","required","","formControl",""],["mat-slide-toggle","required","","ngModel",""]],features:[o.Ab([_]),o.yb]});var n=o.Yb(t);return t}(l.b),w=function(){function e(){}return e.\u0275mod=o.Ob({type:e}),e.\u0275inj=o.Nb({factory:function(t){return new(t||e)}}),e}(),M=function(){function e(){}return e.\u0275mod=o.Ob({type:e}),e.\u0275inj=o.Nb({factory:function(t){return new(t||e)},imports:[[w,a.r,a.h,i.c],w,a.h]}),e}()},TpGC:function(e,t,n){"use strict";n.r(t);var i=n("8AiQ"),o=n("r4gC"),a=n("Qc/f"),r=n("9HSk"),c=n("F7GT"),l=n("5/c3"),s=n("1C3z"),d=n("Iv+g"),p=n("D57K"),u=n("zsK+"),g=n("t5c9"),f=n("dkRO"),b=function(){function e(e,t,n){this.http=e,this.context=t,this.dnnContext=n}return e.prototype.loadQuery=function(e){return Object(p.b)(this,void 0,void 0,(function(){var t,n,i,o;return Object(p.e)(this,(function(a){switch(a.label){case 0:return[4,this.http.get(this.dnnContext.$2sxc.http.apiUrl("eav/PipelineDesigner/GetPipeline"),{params:{appId:this.context.appId.toString(),id:e.toString()}}).toPromise()];case 1:return t=a.sent(),n=t,[4,this.http.get(this.dnnContext.$2sxc.http.apiUrl("eav/PipelineDesigner/GetInstalledDataSources")).toPromise()];case 2:return n.InstalledDataSources=a.sent(),e||(t.Pipeline={AllowEdit:"True"}),t.InstalledDataSources.push({PartAssemblyAndType:(i=u.a.pipelineDesigner.outDataSource).className,Name:i.name||i.className,In:i.in,Out:null,allowNew:!1,PrimaryType:"Target",DynamicOut:!1,Difficulty:100}),this.postProcessDataSources(t),(o={id:e,data:t,readOnly:!1}).id&&1!==o.data.DataSources.length?o.readOnly=!t.Pipeline.AllowEdit:(o.readOnly=!1,this.loadQueryFromDefaultTemplate(o)),[2,o]}}))}))},e.prototype.postProcessDataSources=function(e){var t,n,i=this,o=u.a.pipelineDesigner.outDataSource;e.DataSources.push({Name:o.name,Description:o.description,EntityGuid:"Out",PartAssemblyAndType:o.className,VisualDesignerData:o.visualDesignerData,ReadOnly:!0,Difficulty:100});var a=function(t){t.Definition=function(){return i.getDataSourceDefinitionProperty(e,t)},t.ReadOnly=t.ReadOnly||!e.Pipeline.AllowEdit,t.VisualDesignerData=t.VisualDesignerData||{Top:50,Left:50}};try{for(var r=Object(p.i)(e.DataSources),c=r.next();!c.done;c=r.next())a(c.value)}catch(l){t={error:l}}finally{try{c&&!c.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.getDataSourceDefinitionProperty=function(e,t){var n=e.InstalledDataSources.filter((function(e){return e.PartAssemblyAndType===t.PartAssemblyAndType}))[0];if(!n)throw new Error("DataSource Definition not found: "+t.PartAssemblyAndType);return n},e.prototype.loadQueryFromDefaultTemplate=function(e){var t,n,i=u.a.pipelineDesigner.defaultPipeline.dataSources;try{for(var o=Object(p.i)(i),a=o.next();!a.done;a=o.next()){var r=a.value;this.addDataSource(e,r.partAssemblyAndType,r.visualDesignerData,r.entityGuid,null)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}e.data.Pipeline.StreamWiring=u.a.pipelineDesigner.defaultPipeline.streamWiring},e.prototype.addDataSource=function(e,t,n,i,o){n||(n={Top:100,Left:100});var a={VisualDesignerData:n,Name:o||this.typeNameFilter(t,"className"),Description:"",PartAssemblyAndType:t,EntityGuid:i||"unsaved"+(e.dsCount+1)};a=Object.assign(a,this.getNewDataSource(e.data,a)),e.data.DataSources.push(a)},e.prototype.typeNameFilter=function(e,t){var n=e.match(/[^,\s]+/g);switch(t){case"classFullName":if(n)return n[0];break;case"className":if(n){var i=n[0].match(/[^\.]+/g);return i[i.length-1]}}return e},e.prototype.getNewDataSource=function(e,t){var n=this;return{Definition:function(){return n.getDataSourceDefinitionProperty(e,t)}}},e.prototype.dsTypeInfo=function(e,t){var n=e.EntityGuid;if(t._typeInfos||(t._typeInfos={}),t._typeInfos[n])return t._typeInfos[n];var i=null,o=t.data.InstalledDataSources.find((function(t){return t.PartAssemblyAndType===e.PartAssemblyAndType})),a=this.buildGuiTypes();if(o){var r=o,c=r.PrimaryType;i=Object.assign({},c?a[c]:a.Unknown),r.Icon&&(i.icon=a.iconPrefix+r.Icon),r.DynamicOut&&(i.dynamicOut=!0),r.HelpLink&&(i.helpLink=r.HelpLink),r.EnableConfig&&(i.config=r.EnableConfig)}return i||(i=a.Unknown),t._typeInfos[n]=i,i},e.prototype.buildGuiTypes=function(){var e={iconPrefix:""};function t(t,n,i){e[t]={name:t,icon:e.iconPrefix+n,notes:i}}return t("Unknown","fiber_manual_record","unknown type"),t("Cache","history","caching of data"),t("Filter","filter_list","filter data - usually returning less items than came in"),t("Logic","share","logic operations - usually choosing between different streams"),t("Lookup","search","lookup operation - usually looking for other data based on a criteria"),t("Modify","star_half","modify data - usually changing, adding or removing values"),t("Security","account_circle","security - usually limit what the user sees based on his identity"),t("Sort","sort","sort the items"),t("Source","cloud_upload","source of new data - usually SQL, CSV or similar"),t("Target","adjust","target - usually just a destination of data"),e},e.\u0275fac=function(t){return new(t||e)(s.ac(g.b),s.ac(d.a),s.ac(f.a))},e.\u0275prov=s.Mb({token:e,factory:e.\u0275fac}),e}(),m=n("Ata6");function h(e,t){if(1&e&&(s.Wb(0,"li"),s.Pc(1),s.Vb()),2&e){var n=t.$implicit;s.Bb(1),s.Qc(n)}}function y(e,t){if(1&e&&(s.Wb(0,"li"),s.Pc(1),s.Vb()),2&e){var n=t.$implicit;s.Bb(1),s.Qc(n)}}function v(e,t){if(1&e&&(s.Wb(0,"li"),s.Pc(1),s.Vb()),2&e){var n=t.$implicit;s.Bb(1),s.Qc(n)}}function x(e,t){if(1&e&&(s.Wb(0,"div",15),s.Wb(1,"div",7),s.Wb(2,"span"),s.Pc(3,"Warnings"),s.Vb(),s.Wb(4,"mat-icon",16),s.Pc(5,"warning"),s.Vb(),s.Vb(),s.Wb(6,"ol",11),s.Nc(7,v,2,1,"li",12),s.Vb(),s.Vb()),2&e){var n=s.ic(2);s.Bb(7),s.qc("ngForOf",n.warnings)}}function P(e,t){if(1&e&&(s.Wb(0,"div",17),s.Wb(1,"div",7),s.Pc(2,"Query Description"),s.Vb(),s.Wb(3,"div"),s.Pc(4),s.Vb(),s.Vb()),2&e){var n=s.ic(2);s.Bb(4),s.Qc(n.queryDef.data.Pipeline.Description)}}function C(e,t){if(1&e){var n=s.Xb();s.Wb(0,"div",1),s.Wb(1,"div",2),s.Wb(2,"div",3),s.Wb(3,"button",4),s.Pc(4,"Save and run"),s.Vb(),s.Wb(5,"button",5),s.Pc(6,"Run"),s.Vb(),s.Wb(7,"button",5),s.Pc(8,"Save"),s.Vb(),s.Vb(),s.Wb(9,"div",6),s.Wb(10,"div",7),s.Wb(11,"div"),s.Pc(12,"Parameters"),s.Vb(),s.Wb(13,"div"),s.Wb(14,"button",8),s.Wb(15,"mat-icon",9),s.ec("click",(function(){return s.Ec(n),s.ic().editPipelineEntity()})),s.Pc(16,"edit"),s.Vb(),s.Vb(),s.Wb(17,"button",10),s.Wb(18,"mat-icon",9),s.ec("click",(function(){return s.Ec(n),s.ic().openParamsHelp()})),s.Pc(19,"info"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(20,"ul",11),s.Nc(21,h,2,1,"li",12),s.Vb(),s.Vb(),s.Wb(22,"div",6),s.Wb(23,"div",7),s.Pc(24,"Test Parameters"),s.Vb(),s.Wb(25,"ul",11),s.Nc(26,y,2,1,"li",12),s.Vb(),s.Vb(),s.Nc(27,x,8,1,"div",13),s.Nc(28,P,5,1,"div",14),s.Vb(),s.Vb()}if(2&e){var i=s.ic();s.Bb(21),s.qc("ngForOf",null==i.queryDef.data.Pipeline.Params?null:i.queryDef.data.Pipeline.Params.split("\n")),s.Bb(5),s.qc("ngForOf",null==i.queryDef.data.Pipeline.TestParameters?null:i.queryDef.data.Pipeline.TestParameters.split("\n")),s.Bb(1),s.qc("ngIf",i.warnings.length),s.Bb(1),s.qc("ngIf",i.queryDef.data.Pipeline.Description)}}var _=function(){function e(e){this.context=e}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){var t;(null===(t=e.queryDef)||void 0===t?void 0:t.currentValue)&&(this.warnings=function(e,t){var n=[];try{var i=/^\[module:moduleid\]=([0-9]*)$/gim.exec(e.Pipeline.TestParameters)[1],o=t.moduleId.toString();i!==o&&n.push("Your test moduleid ("+i+") is different from the current moduleid ("+o+"). Note that 2sxc 9.33 automatically provides the moduleid - so you usually do not need to set it any more.")}catch(a){}return n}(this.queryDef.data,this.context))},e.prototype.editPipelineEntity=function(){alert("Not implemented!")},e.prototype.openParamsHelp=function(){window.open("https://r.2sxc.org/QueryParams","_blank")},e.\u0275fac=function(t){return new(t||e)(s.Qb(d.a))},e.\u0275cmp=s.Kb({type:e,selectors:[["app-run-explorer"]],inputs:{queryDef:"queryDef"},features:[s.zb],decls:1,vars:1,consts:[["class","editor-active-explorer editor-fancy-scrollbar",4,"ngIf"],[1,"editor-active-explorer","editor-fancy-scrollbar"],[1,"wrapper"],[1,"actions"],["mat-raised-button","","color","accent",1,"action"],["mat-raised-button","",1,"action"],[1,"parameters"],[1,"title"],["mat-icon-button","","matTooltip","Edit parameters"],[3,"click"],["mat-icon-button","","matTooltip","Query Params Docs"],[1,"values"],[4,"ngFor","ngForOf"],["class","warnings",4,"ngIf"],["class","description",4,"ngIf"],[1,"warnings"],[2,"color","red"],[1,"description"]],template:function(e,t){1&e&&s.Nc(0,C,29,4,"div",0),2&e&&s.qc("ngIf",t.queryDef)},directives:[i.t,r.b,a.a,o.a,i.s],styles:[".wrapper[_ngcontent-%COMP%]{padding:24px}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-bottom:32px}.actions[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:8px}.description[_ngcontent-%COMP%], .parameters[_ngcontent-%COMP%], .warnings[_ngcontent-%COMP%]{margin:16px 0}.description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .parameters[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .warnings[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{height:40px;display:flex;align-items:center;justify-content:space-between;font-size:14px}.description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .parameters[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .warnings[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.parameters[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%], .warnings[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]{margin:0;padding-left:16px}.parameters[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .warnings[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1px 0}"],changeDetection:0}),e}(),O=n("9RHM");function w(e,t){var n,i,o=Object(O.a)(e).filter((function(e){return e.Difficulty<=t}));o.sort((function(e,t){return e.Name.toLocaleLowerCase().localeCompare(t.Name.toLocaleLowerCase())}));var a={};try{for(var r=Object(p.i)(o),c=r.next();!c.done;c=r.next()){var l=c.value,s=l.PrimaryType;a[s]?a[s].push(l):a[s]=[l]}}catch(d){n={error:d}}finally{try{c&&!c.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return a}function M(e,t){if(1&e){var n=s.Xb();s.Wb(0,"div",8),s.ec("click",(function(){s.Ec(n);var e=t.$implicit;return s.ic(4).addDataSource(e)})),s.Pc(1),s.Vb()}if(2&e){var i=t.$implicit;s.qc("matTooltip",i.Name),s.Bb(1),s.Rc(" ",i.Name," ")}}function D(e,t){if(1&e&&(s.Wb(0,"div",6),s.Nc(1,M,2,2,"div",7),s.Vb()),2&e){var n=s.ic().$implicit;s.Bb(1),s.qc("ngForOf",n.value)}}function k(e,t){if(1&e){var n=s.Xb();s.Ub(0),s.Wb(1,"div",4),s.ec("click",(function(){s.Ec(n);var e=t.$implicit;return s.ic(2).toggleItem(e.key)})),s.Wb(2,"mat-icon"),s.Pc(3),s.Vb(),s.Wb(4,"span"),s.Pc(5),s.Vb(),s.Vb(),s.Nc(6,D,2,1,"div",5),s.Tb()}if(2&e){var i=t.$implicit,o=s.ic(2);s.Bb(1),s.qc("matTooltip",i.key),s.Bb(2),s.Qc(o.toggledItems.includes(i.key)?"keyboard_arrow_down":"keyboard_arrow_right"),s.Bb(2),s.Qc(i.key),s.Bb(1),s.qc("ngIf",o.toggledItems.includes(i.key))}}function S(e,t){if(1&e){var n=s.Xb();s.Wb(0,"div",1),s.Wb(1,"mat-slide-toggle",2),s.ec("change",(function(e){return s.Ec(n),s.ic().onDifficultyChanged(e)})),s.Pc(2," Show Advanced "),s.Vb(),s.Nc(3,k,7,4,"ng-container",3),s.jc(4,"keyvalue"),s.Vb()}if(2&e){var i=s.ic();s.Bb(3),s.qc("ngForOf",s.kc(4,1,i.sorted))}}var V=function(){function e(){this.difficulty={default:100,advanced:200},this.activeDiff=this.difficulty.default,this.toggledItems=[]}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){var t;(null===(t=e.dataSources)||void 0===t?void 0:t.currentValue)&&(this.sorted=w(this.dataSources,this.activeDiff))},e.prototype.onDifficultyChanged=function(e){this.activeDiff=e.checked?this.difficulty.advanced:this.difficulty.default,this.sorted=w(this.dataSources,this.activeDiff)},e.prototype.addDataSource=function(e){alert("Not implemented")},e.prototype.toggleItem=function(e){!function(e,t){var n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1)}(e,this.toggledItems)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Kb({type:e,selectors:[["app-add-explorer"]],inputs:{dataSources:"dataSources"},features:[s.zb],decls:1,vars:1,consts:[["class","editor-active-explorer editor-fancy-scrollbar",4,"ngIf"],[1,"editor-active-explorer","editor-fancy-scrollbar"],["labelPosition","before",3,"change"],[4,"ngFor","ngForOf"],["matTooltipShowDelay","750",1,"collapsible",3,"matTooltip","click"],["class","list",4,"ngIf"],[1,"list"],["class","list-item","matTooltipShowDelay","750",3,"matTooltip","click",4,"ngFor","ngForOf"],["matTooltipShowDelay","750",1,"list-item",3,"matTooltip","click"]],template:function(e,t){1&e&&s.Nc(0,S,5,3,"div",0),2&e&&s.qc("ngIf",t.dataSources)},directives:[i.t,c.a,i.s,a.a,o.a],pipes:[i.l],styles:[".mat-slide-toggle[_ngcontent-%COMP%]{margin:6px}.collapsible[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:3px 0}.collapsible[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 24px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}"]}),e}();function q(e,t){if(1&e){var n=s.Xb();s.Wb(0,"div",13),s.ec("click",(function(){s.Ec(n);var e=s.ic().$implicit;return s.ic(2).configureDataSource(e)})),s.Wb(1,"mat-icon",14),s.Pc(2,"settings"),s.Vb(),s.Vb()}}function I(e,t){1&e&&(s.Wb(0,"div",15),s.Wb(1,"mat-icon",16),s.Pc(2,"keyboard_arrow_up"),s.Vb(),s.Vb())}function W(e,t){if(1&e){var n=s.Xb();s.Wb(0,"mat-icon",17),s.ec("click",(function(){s.Ec(n);var e=s.ic().index;return s.ic(2).remove(e)})),s.Pc(1," delete "),s.Vb()}}function T(e,t){if(1&e&&(s.Wb(0,"a",18),s.Wb(1,"mat-icon"),s.Pc(2,"help_outline"),s.Vb(),s.Vb()),2&e){var n=s.ic().$implicit,i=s.ic(2);s.rc("href",i.typeInfo(n).helpLink,s.Hc)}}var E=function(e,t,n){return{top:e,left:t,"min-width":n}};function N(e,t){if(1&e){var n=s.Xb();s.Wb(0,"div",3),s.Nc(1,q,3,0,"div",4),s.Wb(2,"mat-icon",5),s.Pc(3),s.Vb(),s.Wb(4,"div",6),s.ec("click",(function(){s.Ec(n);var e=t.$implicit;return s.ic(2).editName(e)})),s.Pc(5),s.Wb(6,"mat-icon",7),s.Pc(7,"edit "),s.Vb(),s.Vb(),s.Rb(8,"br"),s.Wb(9,"div",8),s.ec("click",(function(){s.Ec(n);var e=t.$implicit;return s.ic(2).editDescription(e)})),s.Pc(10),s.Wb(11,"mat-icon",7),s.Pc(12,"edit"),s.Vb(),s.Vb(),s.Rb(13,"br"),s.Wb(14,"div",9),s.Pc(15),s.Vb(),s.Nc(16,I,3,0,"div",10),s.Nc(17,W,2,0,"mat-icon",11),s.Nc(18,T,3,1,"a",12),s.Vb()}if(2&e){var i=t.$implicit,o=s.ic(2);s.sc("id","dataSource_",i.EntityGuid,""),s.qc("ngStyle",s.xc(13,E,i.VisualDesignerData.Top+"px",i.VisualDesignerData.Left+"px",i.VisualDesignerData.Width?i.VisualDesignerData.Width+"px":null)),s.Cb("guid",i.EntityGuid),s.Bb(1),s.qc("ngIf",!i.ReadOnly&&o.typeInfo(i).config),s.Bb(1),s.rc("title",o.typeInfo(i).notes),s.Bb(1),s.Qc(o.typeInfo(i).icon),s.Bb(2),s.Rc(" ",i.Name||"(no name)",""),s.Bb(5),s.Rc(" ",i.Description,""),s.Bb(4),s.rc("title",i.PartAssemblyAndType),s.Bb(1),s.Rc(" Type: ",o.typeNameFilter(i.PartAssemblyAndType,"className")," "),s.Bb(1),s.qc("ngIf",!i.ReadOnly&&o.typeInfo(i).dynamicOut),s.Bb(1),s.qc("ngIf",!i.ReadOnly),s.Bb(1),s.qc("ngIf",o.typeInfo(i).helpLink)}}function R(e,t){if(1&e&&(s.Wb(0,"div",1),s.Nc(1,N,19,17,"div",2),s.Vb()),2&e){var n=s.ic();s.Bb(1),s.qc("ngForOf",n.queryDef.data.DataSources)}}var B=function(){function e(e){this.queryDefinitionService=e}return e.prototype.ngOnInit=function(){},e.prototype.configureDataSource=function(e){},e.prototype.typeInfo=function(e){return this.queryDefinitionService.dsTypeInfo(e,this.queryDef)},e.prototype.editName=function(e){},e.prototype.editDescription=function(e){},e.prototype.typeNameFilter=function(e,t){return this.queryDefinitionService.typeNameFilter(e,t)},e.prototype.remove=function(e){},e.\u0275fac=function(t){return new(t||e)(s.Qb(b))},e.\u0275cmp=s.Kb({type:e,selectors:[["app-plumb-editor"]],inputs:{queryDef:"queryDef"},decls:1,vars:1,consts:[["id","pipelineContainer",4,"ngIf"],["id","pipelineContainer"],["datasource","","class","dataSource",3,"id","ngStyle",4,"ngFor","ngForOf"],["datasource","",1,"dataSource",3,"id","ngStyle"],["class","configure","title","Configure this DataSource",3,"click",4,"ngIf"],[1,"type-info",3,"title"],["title","Click to edit the Name",1,"name","noselect",3,"click"],[1,"show-hover-inline","eav-icon-pencil"],["title","Click to edit the Description",1,"description","noselect",3,"click"],[1,"typename",3,"title"],["class","add-endpoint","title","Drag a new Out-Connection from here",4,"ngIf"],["class","delete eav-icon-cancel","title","delete this",3,"click",4,"ngIf"],["class","help eav-icon-help-circled","title","help for this data source","target","_blank",3,"href",4,"ngIf"],["title","Configure this DataSource",1,"configure",3,"click"],[1,"eav-icon-settings"],["title","Drag a new Out-Connection from here",1,"add-endpoint"],[1,"new-connection","eav-icon-up-dir"],["title","delete this",1,"delete","eav-icon-cancel",3,"click"],["title","help for this data source","target","_blank",1,"help","eav-icon-help-circled",3,"href"]],template:function(e,t){1&e&&s.Nc(0,R,2,1,"div",0),2&e&&s.qc("ngIf",t.queryDef.data.DataSources)},directives:[i.t,i.s,i.w,o.a],styles:['.actions[_ngcontent-%COMP%]{width:215px;position:fixed;right:0}.actions[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin:4px 0}.actions[_ngcontent-%COMP%]   .panel-heading[_ngcontent-%COMP%]{height:45px;margin:0}.dataSource[_ngcontent-%COMP%]{height:50px;transition:box-shadow .15s ease-in 0s;min-width:250px;border:1px solid #346789;box-shadow:2px 2px 19px #aaa;-o-box-shadow:2px 2px 19px #aaa;-webkit-box-shadow:2px 2px 19px #aaa;-moz-box-shadow:2px 2px 19px #aaa;border-radius:.5em;border-top-left-radius:.8em;border-bottom-right-radius:.8em;filter:alpha(opacity=80);text-align:center;z-index:20;position:absolute;background-color:#eeeeef;color:#000;font-family:helvetica;padding:.5em;font-size:.9em}.dataSource[_ngcontent-%COMP%]:hover{box-shadow:2px 2px 19px #444;-o-box-shadow:2px 2px 19px #444;-webkit-box-shadow:2px 2px 19px #444;-moz-box-shadow:2px 2px 19px #444;cursor:move;filter:alpha(opacity=60)}.dataSource[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .dataSource[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{cursor:text!important;display:inline-block;max-width:215px;max-height:16px;overflow:hidden}.dataSource[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-top:2px;font-weight:700}.dataSource[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.8em}.dataSource[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .dataSource[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:xx-small}.dataSource[_ngcontent-%COMP%]   .typename[_ngcontent-%COMP%]{font-size:1em;background:#fff;opacity:.8;z-index:100;padding-top:25px;display:none}.dataSource[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{right:0}.dataSource[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%], .dataSource[_ngcontent-%COMP%]   .help[_ngcontent-%COMP%]{display:none;position:absolute;color:#aaa;top:32px}.dataSource[_ngcontent-%COMP%]   .help[_ngcontent-%COMP%]{left:0}.dataSource[_ngcontent-%COMP%]   .configure[_ngcontent-%COMP%]{display:none;position:absolute;top:0;left:0}.dataSource[_ngcontent-%COMP%]   .type-info[_ngcontent-%COMP%]{position:absolute;top:10px;left:0;padding:3px;font-size:large}.dataSource[_ngcontent-%COMP%]   .show-hover-inline[_ngcontent-%COMP%]{display:none}.dataSource[_ngcontent-%COMP%]:hover   .show-hover-inline[_ngcontent-%COMP%]{display:inline-block}.dataSource[_ngcontent-%COMP%]:hover   .add-endpoint[_ngcontent-%COMP%], .dataSource[_ngcontent-%COMP%]:hover   .configure[_ngcontent-%COMP%], .dataSource[_ngcontent-%COMP%]:hover   .delete[_ngcontent-%COMP%], .dataSource[_ngcontent-%COMP%]:hover   .help[_ngcontent-%COMP%], .dataSource[_ngcontent-%COMP%]:hover   .typename[_ngcontent-%COMP%]{cursor:pointer!important;display:block}.sourceEndpoint[_ngcontent-%COMP%]:after, .targetEndpoint[_ngcontent-%COMP%]:after{font-family:app-icons;content:"\\e856";margin-top:-10px;color:#000;font-size:16px;border-radius:10px;width:20px;display:inline-block;text-align:center}.endpointSourceLabel[_ngcontent-%COMP%], .endpointTargetLabel[_ngcontent-%COMP%], .jsplumb-endpoint[_ngcontent-%COMP%]{z-index:21;cursor:pointer}.sourceEndpoint.jsplumb-hover[_ngcontent-%COMP%], .targetEndpoint.jsplumb-hover[_ngcontent-%COMP%]{z-index:101}.jsplumb-endpoint[_ngcontent-%COMP%]{border-radius:30px}.dataSource.active[_ngcontent-%COMP%], .jsplumb-endpoint.active[_ngcontent-%COMP%]{border:1px dotted green}.dataSource.active.hover[_ngcontent-%COMP%], .jsplumb-endpoint.hover[_ngcontent-%COMP%]{box-shadow:2px 2px 20px red;-o-box-shadow:2px 2px 20px red;-webkit-box-shadow:2px 2px 20px red;-moz-box-shadow:2px 2px 20px red}.endpointSourceLabel[_ngcontent-%COMP%], .endpointTargetLabel[_ngcontent-%COMP%]{cursor:text!important;background-color:#fff;font:12px sans-serif;color:#444;opacity:.8;filter:alpha(opacity=80);cursor:pointer}.endpointSourceLabel.jsplumb-hover[_ngcontent-%COMP%], .endpointTargetLabel.jsplumb-hover[_ngcontent-%COMP%]{background-color:#5c96bc;padding:.4em;color:#fff;border:1px solid #fff;z-index:100;opacity:1}.streamEntitiesCount[_ngcontent-%COMP%]{background:#93ceff;color:#000;padding:2px;border-radius:25px;opacity:.8;min-width:25px;text-align:center}.add-endpoint[_ngcontent-%COMP%]{position:absolute;top:-15px;right:5px;width:1em;height:1em;cursor:pointer;font-size:large;color:orange;display:none}.add-endpoint[_ngcontent-%COMP%]:hover{color:#d98d00}.noselect[_ngcontent-%COMP%]{cursor:default;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}',"#pipelineContainer[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;overflow:auto;font-size:14px}#pipelineContainer[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:not(.mat-icon){box-sizing:border-box}#pipelineContainer[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}#pipelineContainer[_ngcontent-%COMP%]   .dataSource[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], #pipelineContainer[_ngcontent-%COMP%]   .dataSource[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:12px;width:12px;height:12px}","[_nghost-%COMP%] {display: block; width: 100%; height: 100%}"]}),e}();function L(e,t){if(1&e&&s.Rb(0,"app-run-explorer",9),2&e){var n=s.ic();s.qc("hidden",n.activeExplorer!==n.explorer.run)("queryDef",n.queryDef)}}function A(e,t){if(1&e&&s.Rb(0,"app-add-explorer",10),2&e){var n=s.ic();s.qc("hidden",n.activeExplorer!==n.explorer.add)("dataSources",n.queryDef.data.InstalledDataSources)}}function z(e,t){if(1&e&&s.Rb(0,"app-plumb-editor",11),2&e){var n=s.ic();s.qc("queryDef",n.queryDef)}}var j=function(e){return{active:e}},Q=[{path:"",component:function(){function e(e,t,n,i,o){this.context=e,this.route=t,this.queryDefinitionService=n,this.titleService=i,this.zone=o,this.explorer={run:"run",add:"add"},this.eventListeners=[],this.context.init(this.route);var a=this.route.snapshot.paramMap.get("pipelineId");this.pipelineId=parseInt(a,10),this.attachListeners()}return e.prototype.ngOnInit=function(){this.loadQuery()},e.prototype.ngOnDestroy=function(){this.detachListeners()},e.prototype.toggleExplorer=function(e){this.activeExplorer=this.activeExplorer===e?null:e},e.prototype.openHelp=function(){window.open("http://2sxc.org/help","_blank")},e.prototype.savePipeline=function(){},e.prototype.loadQuery=function(){var e=this;this.queryDefinitionService.loadQuery(this.pipelineId).then((function(t){console.log(t),e.queryDef=t,e.titleService.setTitle(e.queryDef.data.Pipeline.Name+" - Visual Query")}))},e.prototype.attachListeners=function(){var e=this;this.zone.runOutsideAngular((function(){var t=e.keyboardSave.bind(e);window.addEventListener("keydown",t),e.eventListeners.push({element:window,type:"keydown",listener:t})}))},e.prototype.detachListeners=function(){var e=this;this.zone.runOutsideAngular((function(){e.eventListeners.forEach((function(e){e.element.removeEventListener(e.type,e.listener)})),e.eventListeners=null}))},e.prototype.keyboardSave=function(e){var t=this;83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&(e.preventDefault(),this.zone.run((function(){t.savePipeline()})))},e.\u0275fac=function(t){return new(t||e)(s.Qb(d.a),s.Qb(l.a),s.Qb(b),s.Qb(m.d),s.Qb(s.z))},e.\u0275cmp=s.Kb({type:e,selectors:[["app-visual-query"]],decls:15,vars:9,consts:[[1,"editor-root"],[1,"editor-side-toolbar"],["matTooltip","Run",1,"button",3,"ngClass","click"],["matTooltip","Add",1,"button",3,"ngClass","click"],[1,"spacer"],["matTooltip","Help",1,"button",3,"click"],[3,"hidden","queryDef",4,"ngIf"],[3,"hidden","dataSources",4,"ngIf"],[3,"queryDef",4,"ngIf"],[3,"hidden","queryDef"],[3,"hidden","dataSources"],[3,"queryDef"]],template:function(e,t){1&e&&(s.Wb(0,"div",0),s.Wb(1,"div",1),s.Wb(2,"div",2),s.ec("click",(function(){return t.toggleExplorer(t.explorer.run)})),s.Wb(3,"mat-icon"),s.Pc(4,"play_arrow"),s.Vb(),s.Vb(),s.Wb(5,"div",3),s.ec("click",(function(){return t.toggleExplorer(t.explorer.add)})),s.Wb(6,"mat-icon"),s.Pc(7,"add"),s.Vb(),s.Vb(),s.Rb(8,"div",4),s.Wb(9,"div",5),s.ec("click",(function(){return t.openHelp()})),s.Wb(10,"mat-icon"),s.Pc(11,"help_outline"),s.Vb(),s.Vb(),s.Vb(),s.Nc(12,L,1,2,"app-run-explorer",6),s.Nc(13,A,1,2,"app-add-explorer",7),s.Nc(14,z,1,1,"app-plumb-editor",8),s.Vb()),2&e&&(s.Bb(2),s.qc("ngClass",s.vc(5,j,t.activeExplorer===t.explorer.run)),s.Bb(3),s.qc("ngClass",s.vc(7,j,t.activeExplorer===t.explorer.add)),s.Bb(7),s.qc("ngIf",t.queryDef),s.Bb(1),s.qc("ngIf",t.queryDef),s.Bb(1),s.qc("ngIf",t.queryDef))},directives:[a.a,i.q,o.a,i.t,_,V,B],styles:[".editor-side-toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:column}.editor-side-toolbar[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex-grow:1}"]}),e}()}],F=function(){function e(){}return e.\u0275mod=s.Ob({type:e}),e.\u0275inj=s.Nb({factory:function(t){return new(t||e)},imports:[[l.g.forChild(Q)],l.g]}),e}();n.d(t,"VisualQueryModule",(function(){return G}));var G=function(){function e(){}return e.\u0275mod=s.Ob({type:e}),e.\u0275inj=s.Nb({factory:function(t){return new(t||e)},providers:[d.a,b],imports:[[i.c,F,o.b,a.b,r.c,c.b]]}),e}()}}]);
//# sourceMappingURL=33.js.map