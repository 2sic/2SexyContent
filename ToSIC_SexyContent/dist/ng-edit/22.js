(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{Ti45:function(t,n,e){"use strict";e.r(n);var o=e("D57K"),c=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(n,t),n}(function(){return function(){}}()),i=e("zsK+"),a=e("WwKs"),r=e("1C3z"),s=e("BLjT"),p=e("5/c3"),b=e("/NRo"),u=e("2pW/"),l=e("8AiQ"),f=e("ZSGP"),d=e("hOvr"),h=e("TDrE"),g=e("FONI"),m=e("LuBX"),y=e("OeRG"),S=e("9HSk"),v=e("Qc/f"),C=e("Uk43"),W=e("udnq"),T=e("r4gC");function V(t,n){1&t&&(r.Wb(0,"app-field-hint",24),r.Pc(1,"This field is required"),r.Vb()),2&t&&r.qc("isError",!0)}function k(t,n){if(1&t&&(r.Wb(0,"app-field-hint",24),r.Pc(1),r.Vb()),2&t){var e=r.ic(3);r.qc("isError",!0),r.Bb(1),r.Qc(e.contentTypeNameError)}}function N(t,n){if(1&t&&(r.Ub(0),r.Nc(1,V,2,1,"app-field-hint",23),r.Nc(2,k,2,2,"app-field-hint",23),r.Tb()),2&t){r.ic();var e=r.Cc(7);r.Bb(1),r.qc("ngIf",e.errors.required),r.Bb(1),r.qc("ngIf",e.errors.pattern)}}function P(t,n){if(1&t&&(r.Wb(0,"mat-option",25),r.Pc(1),r.Vb()),2&t){var e=n.$implicit;r.qc("value",e.value),r.Bb(1),r.Rc("",e.name," ")}}function O(t,n){if(1&t){var e=r.Xb();r.Wb(0,"mat-icon",26),r.ec("click",(function(t){return r.Ec(e),r.ic(2).unlockScope(t)})),r.Pc(1,"lock"),r.Vb()}}function B(t,n){if(1&t){var e=r.Xb();r.Wb(0,"mat-icon",26),r.ec("click",(function(t){return r.Ec(e),r.ic(2).unlockScope(t)})),r.Pc(1,"lock_open"),r.Vb()}}function w(t,n){if(1&t&&(r.Wb(0,"div",5),r.Wb(1,"h3"),r.Pc(2,"Shared Content Type (Ghost)"),r.Vb(),r.Wb(3,"p"),r.Pc(4,"Note: this can't be edited in the UI, for now if you really know what you're doing, do it in the DB"),r.Vb(),r.Wb(5,"p"),r.Pc(6),r.Vb(),r.Vb()),2&t){var e=r.ic(2);r.Bb(6),r.Rc("Uses Type Definition of: ",e.contentType.SharedDefId,"")}}function q(t,n){if(1&t){var e=r.Xb();r.Wb(0,"form",3,4),r.ec("ngSubmit",(function(){return r.Ec(e),r.ic().onSubmit()})),r.Wb(2,"div",5),r.Wb(3,"mat-form-field",6),r.Wb(4,"mat-label"),r.Pc(5,"Name"),r.Vb(),r.Wb(6,"input",7,8),r.ec("ngModelChange",(function(t){return r.Ec(e),r.ic().contentType.Name=t})),r.Vb(),r.Vb(),r.Nc(8,N,3,2,"ng-container",9),r.Vb(),r.Wb(9,"mat-accordion"),r.Wb(10,"mat-expansion-panel",10),r.Wb(11,"mat-expansion-panel-header"),r.Wb(12,"mat-panel-title"),r.Pc(13,"Advanced"),r.Vb(),r.Rb(14,"mat-panel-description"),r.Vb(),r.Wb(15,"div",5),r.Wb(16,"mat-form-field",6),r.Wb(17,"mat-label"),r.Pc(18,"Description"),r.Vb(),r.Wb(19,"input",11),r.ec("ngModelChange",(function(t){return r.Ec(e),r.ic().contentType.Description=t})),r.Vb(),r.Vb(),r.Vb(),r.Wb(20,"div",5),r.Wb(21,"mat-form-field",6),r.Wb(22,"mat-label"),r.Pc(23,"Scope"),r.Vb(),r.Wb(24,"mat-select",12),r.ec("selectionChange",(function(t){return r.Ec(e),r.ic().changeScope(t)})),r.Nc(25,P,2,2,"mat-option",13),r.Wb(26,"mat-option",14),r.Pc(27,"Other..."),r.Vb(),r.Vb(),r.Wb(28,"button",15),r.Nc(29,O,2,0,"mat-icon",16),r.Nc(30,B,2,0,"mat-icon",16),r.Vb(),r.Vb(),r.Wb(31,"app-field-hint"),r.Pc(32," The scope should almost never be changed - "),r.Wb(33,"a",17),r.Pc(34,"see help"),r.Vb(),r.Vb(),r.Vb(),r.Wb(35,"div",5),r.Wb(36,"mat-form-field",6),r.Wb(37,"mat-label"),r.Pc(38,"Static Name"),r.Vb(),r.Rb(39,"input",18),r.Vb(),r.Vb(),r.Nc(40,w,7,1,"div",19),r.Vb(),r.Vb(),r.Wb(41,"div",20),r.Wb(42,"button",21),r.ec("click",(function(){return r.Ec(e),r.ic().closeDialog()})),r.Pc(43,"Cancel"),r.Vb(),r.Wb(44,"button",22),r.Pc(45,"Save"),r.Vb(),r.Vb(),r.Vb()}if(2&t){var o=r.Cc(1),c=r.Cc(7),i=r.ic();r.Bb(6),r.qc("pattern",i.contentTypeNamePattern)("ngModel",i.contentType.Name),r.Bb(2),r.qc("ngIf",c.touched&&c.errors),r.Bb(1),r.qc("@.disabled",i.disableAnimation),r.Bb(10),r.qc("ngModel",i.contentType.Description),r.Bb(5),r.qc("ngModel",i.contentType.Scope)("disabled",i.lockScope),r.Bb(1),r.qc("ngForOf",i.scopeOptions),r.Bb(3),r.qc("matTooltip",i.lockScope?"Unlock":"Lock"),r.Bb(1),r.qc("ngIf",i.lockScope),r.Bb(1),r.qc("ngIf",!i.lockScope),r.Bb(9),r.qc("ngModel",i.contentType.StaticName),r.Bb(1),r.qc("ngIf",i.contentType.SharedDefId),r.Bb(4),r.qc("disabled",!o.form.valid)}}e.d(n,"EditContentTypeComponent",(function(){return M}));var M=function(){function t(t,n,e,o){this.dialogRef=t,this.route=n,this.contentTypesService=e,this.snackBar=o,this.lockScope=!0,this.contentTypeNamePattern=a.b,this.contentTypeNameError=a.a,this.disableAnimation=!0,this.scope=this.route.snapshot.paramMap.get("scope"),this.scopeOptions=Object.keys(i.a.scopes).map((function(t){return i.a.scopes[t]})),this.id=parseInt(this.route.snapshot.paramMap.get("id"),10)}return t.prototype.ngAfterViewInit=function(){var t=this;setTimeout((function(){return t.disableAnimation=!1}))},t.prototype.ngOnInit=function(){this.id?this.fetchContentType():this.contentType=Object(o.a)(Object(o.a)({},new c),{StaticName:"",Name:"",Description:"",Scope:this.scope,ChangeStaticName:!1,NewStaticName:""})},t.prototype.changeScope=function(t){var n=t.value;"Other"===n&&((n=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason."))?this.scopeOptions.find((function(t){return t.value===n}))||this.scopeOptions.push({name:n,value:n}):n=i.a.scopes.default.value),this.contentType.Scope=n},t.prototype.unlockScope=function(t){t.stopPropagation(),this.lockScope=!this.lockScope,this.lockScope&&(this.contentType.Scope=this.scope)},t.prototype.onSubmit=function(){var t=this;this.snackBar.open("Saving..."),this.contentTypesService.save(this.contentType).subscribe((function(n){t.snackBar.open("Saved",null,{duration:2e3}),t.closeDialog()}))},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.fetchContentType=function(){var t=this;this.contentTypesService.retrieveContentTypes(this.scope).subscribe((function(n){var e=n.find((function(n){return n.Id===t.id}));t.contentType=Object(o.a)(Object(o.a)({},e),{ChangeStaticName:!1,NewStaticName:e.StaticName})}))},t.\u0275fac=function(n){return new(n||t)(r.Qb(s.h),r.Qb(p.a),r.Qb(b.a),r.Qb(u.b))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-edit-content-type"]],decls:4,vars:2,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],["ngForm","ngForm"],[1,"edit-input"],["appearance","standard","color","accent"],["matInput","","type","text","name","Name","required","",3,"pattern","ngModel","ngModelChange"],["name","ngModel"],[4,"ngIf"],["expanded","false"],["matInput","","type","text","name","Description",3,"ngModel","ngModelChange"],["name","Scope",3,"ngModel","disabled","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["value","Other"],["mat-icon-button","","type","button","matSuffix","",3,"matTooltip"],[3,"click",4,"ngIf"],["href","http://2sxc.org/help?tag=scope","target","_blank","appClickStopPropagation",""],["matInput","","type","text","name","StaticName","disabled","",3,"ngModel"],["class","edit-input",4,"ngIf"],[1,"dialog-actions-box"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","submit","color","accent",3,"disabled"],[3,"isError",4,"ngIf"],[3,"isError"],[3,"value"],[3,"click"]],template:function(t,n){1&t&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Pc(2),r.Vb(),r.Vb(),r.Nc(3,q,46,14,"form",2)),2&t&&(r.Bb(2),r.Qc(n.id?"Edit Content Type":"New Content Type"),r.Bb(1),r.qc("ngIf",n.contentType))},directives:[s.i,l.t,f.G,f.s,f.t,d.c,d.g,h.b,f.c,f.B,f.x,f.r,f.u,g.a,g.c,g.e,g.f,g.d,m.a,l.s,y.l,S.b,d.j,v.a,C.a,W.a,T.a],styles:[".edit-input[_ngcontent-%COMP%]{padding-bottom:8px}.mat-hint[_ngcontent-%COMP%]{font-size:12px}"]}),t}()},Uk43:function(t,n,e){"use strict";e.d(n,"a",(function(){return f}));var o=e("1C3z"),c=e("8AiQ"),i=e("hOvr");function a(t,n){1&t&&o.Sb(0)}function r(t,n){if(1&t&&(o.Wb(0,"mat-hint"),o.Nc(1,a,1,0,"ng-container",3),o.Vb()),2&t){o.ic();var e=o.Cc(4);o.Bb(1),o.qc("ngTemplateOutlet",e)}}function s(t,n){1&t&&o.Sb(0)}function p(t,n){if(1&t&&(o.Wb(0,"mat-error"),o.Nc(1,s,1,0,"ng-container",3),o.Vb()),2&t){o.ic();var e=o.Cc(4);o.Bb(1),o.qc("ngTemplateOutlet",e)}}function b(t,n){1&t&&o.oc(0)}var u=function(t){return{"hint-box__short":t}},l=["*"],f=function(){function t(){this.isError=!1,this.isShort=!0}return t.prototype.toggleIsShort=function(){this.isShort=!this.isShort},t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:l,decls:5,vars:6,consts:[[1,"hint-box",3,"ngClass","ngSwitch","click"],[4,"ngSwitchCase"],["content",""],[4,"ngTemplateOutlet"]],template:function(t,n){1&t&&(o.pc(),o.Wb(0,"div",0),o.ec("click",(function(){return n.toggleIsShort()})),o.Nc(1,r,2,1,"mat-hint",1),o.Nc(2,p,2,1,"mat-error",1),o.Vb(),o.Nc(3,b,1,0,"ng-template",null,2,o.Oc)),2&t&&(o.qc("ngClass",o.vc(4,u,n.isShort))("ngSwitch",n.isError),o.Bb(1),o.qc("ngSwitchCase",!1),o.Bb(1),o.qc("ngSwitchCase",!0))},directives:[c.q,c.x,c.y,i.f,c.A,i.b],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),t}()},udnq:function(t,n,e){"use strict";e.d(n,"a",(function(){return c}));var o=e("1C3z"),c=function(){function t(){}return t.prototype.onClick=function(t){t.stopPropagation()},t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=o.Lb({type:t,selectors:[["","appClickStopPropagation",""]],hostBindings:function(t,n){1&t&&o.ec("click",(function(t){return n.onClick(t)}))}}),t}()}}]);
//# sourceMappingURL=22.js.map