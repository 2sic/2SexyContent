(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{iluC:function(e,t,n){"use strict";n.r(t);var i=n("8AiQ"),o=n("ZSGP"),r=n("BLjT"),s=n("9HSk"),a=n("r4gC"),c=n("Qc/f"),l=n("2pW/"),p=n("LuBX"),u=n("OeRG"),d=n("5/c3"),f=n("D57K"),h=n("d3IL"),g=n("fa4O"),v=n("3riI"),b=n("1C3z"),m=n("Iv+g"),y=n("fQLH"),x=function(){function e(e){this.snackBar=e,this.defaultDuration=3e3,this.processingMessage=!1,this.messageQueue=[]}return e.prototype.add=function(e,t,n){void 0===n&&(n={duration:this.defaultDuration});var i=new y.a;return this.messageQueue.push({message:e,action:t,config:n,triggered:i}),this.processingMessage||this.displaySnackbar(),i},e.prototype.displaySnackbar=function(){var e=this,t=this.getNextMessage();if(t){this.processingMessage=!0;var n=this.snackBar.open(t.message,t.action,t.config);n.afterDismissed().subscribe((function(){e.displaySnackbar()})),n.onAction().subscribe((function(){t.triggered.next(!0),t.triggered.complete()}))}else this.processingMessage=!1},e.prototype.getNextMessage=function(){return this.messageQueue.length?this.messageQueue.shift():void 0},e.\u0275fac=function(t){return new(t||e)(b.ac(l.b))},e.\u0275prov=b.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),w=n("Jg5f"),C=n("t5c9"),O=n("dkRO"),S=function(){function e(e,t,n){this.http=e,this.context=t,this.dnnContext=n}return e.prototype.get=function(e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("app-sys/appassets/asset"),{params:this.calcParams(e)}).pipe(Object(w.a)((function(e){if("auto"===e.Type.toLowerCase())switch(e.Extension.toLowerCase()){case".cs":case".cshtml":e.Type="Razor";break;case".html":case".css":case".js":e.Type="Token"}return e})))},e.prototype.save=function(e,t){return this.http.post(this.dnnContext.$2sxc.http.apiUrl("app-sys/appassets/asset"),t,{params:this.calcParams(e)})},e.prototype.getTemplates=function(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("app-sys/appassets/list"),{params:{appId:this.context.appId.toString(),global:"false",withSubfolders:"true"}})},e.prototype.calcParams=function(e){return"number"==typeof e?{templateId:e.toString()}:{path:e}},e.\u0275fac=function(t){return new(t||e)(b.ac(C.b),b.ac(m.a),b.ac(O.a))},e.\u0275prov=b.Mb({token:e,factory:e.\u0275fac}),e}(),k=n("9RHM"),T=function(){function e(e,t){this.http=e,this.dnnContext=t,this.keyPrefixes=["@","["],this.keyPrefixIndex=function(e){return e.Type.indexOf("Razor")>-1?0:1}}return e.prototype.getSnippets=function(e){return Object(f.b)(this,void 0,void 0,(function(){var t,n,i;return Object(f.e)(this,(function(o){switch(o.label){case 0:return[4,this.http.get("../sxc-develop/snippets.json.js").toPromise()];case 1:return t=o.sent(),n=this.filterAwayNotNeededSnippetsList(t.snippets,e),i=this.extractInputTypeSnippets(n),[2,{sets:this.initSnippetsWithConfig(i.standardArray,e,i.inputTypeSnippets),list:i.standardArray}]}}))}))},e.prototype.filterAwayNotNeededSnippetsList=function(e,t){var n,i,o=[];try{for(var r=Object(f.i)(e),s=r.next();!s.done;s=r.next()){var a=s.value,c=this.keyPrefixes.indexOf(a.set[0]);-1!==c&&c!==this.keyPrefixIndex(t)||(c===this.keyPrefixIndex(t)&&(a.set=a.set.substr(1)),o.push(a))}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return o},e.prototype.extractInputTypeSnippets=function(e){var t,n,i=[],o=[];try{for(var r=Object(f.i)(e),s=r.next();!s.done;s=r.next()){var a=s.value;"\\"===a.set[0]?(a.set=a.set.substr(1),o.push(a)):i.push(a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{standardArray:i,inputTypeSnippets:this.catalogInputTypeSnippets(o)}},e.prototype.catalogInputTypeSnippets=function(e){var t,n,i={};try{for(var o=Object(f.i)(e),r=o.next();!r.done;r=o.next()){var s=r.value;void 0===i[s.subset]&&(i[s.subset]=[]),i[s.subset].push(s)}}catch(a){t={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},e.prototype.initSnippetsWithConfig=function(e,t,n){return(e=this.makeTree(e)).Content=Object.assign({},e.Content,{Fields:{},PresentationFields:{}}),t.TypeContent&&this.loadContentType(e.Content.Fields,t.TypeContent,"Content",t,n),t.TypeContentPresentation&&this.loadContentType(e.Content.PresentationFields,t.TypeContentPresentation,"Content.Presentation",t,n),t.HasList?(e.List=Object.assign({},e.List,{Fields:{},PresentationFields:{}}),t.TypeList&&this.loadContentType(e.List.Fields,t.TypeList,"ListContent",t,n),t.TypeListPresentation&&this.loadContentType(e.List.PresentationFields,t.TypeListPresentation,"ListContent.Presentation",t,n)):delete e.List,t.HasApp&&(e.App.Resources={},e.App.Settings={},this.loadContentType(e.App.Resources,"App-Resources","App.Resources",t,n),this.loadContentType(e.App.Settings,"App-Settings","App.Settings",t,n)),e},e.prototype.makeTree=function(e){var t,n,i={};try{for(var o=Object(f.i)(e),r=o.next();!r.done;r=o.next()){var s=r.value;void 0===i[s.set]&&(i[s.set]={}),void 0===i[s.set][s.subset]&&(i[s.set][s.subset]=[]);var a={key:s.name,label:this.label(s.set,s.subset,s.name),snip:s.content,help:s.help||this.help(s.set,s.subset,s.name),links:this.linksList(s.links)};i[s.set][s.subset].push(a)}}catch(c){t={error:c}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},e.prototype.label=function(e,t,n){var i=this.getHelpKey(e,t,n,".Key"),o=i;return o===i&&(o=n),o},e.prototype.getHelpKey=function(e,t,n,i){return"SourceEditorSnippets."+e+"."+t+"."+n+i},e.prototype.help=function(e,t,n){var i=this.getHelpKey(e,t,n,".Help"),o=i;return o===i&&(o=""),o},e.prototype.linksList=function(e){var t,n;if(!e)return null;var i=[],o=e.split("\n");try{for(var r=Object(f.i)(o),s=r.next();!s.done;s=r.next()){var a=s.value.split(":");3===a.length&&i.push({name:a[0].trim(),url:a[1].trim()+":"+a[2].trim()})}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return 0===i.length?null:i},e.prototype.loadContentType=function(e,t,n,i,o){var r=this;this.getFields(i.AppId,t).then((function(t){var s,a;try{for(var c=Object(f.i)(t),l=c.next();!l.done;l=c.next()){var p=l.value,u=p.StaticName;e[u]={key:u,label:u,snip:r.valuePlaceholder(n,u,i),help:p.Metadata.merged.Notes||" ("+p.Type.toLowerCase()+") "};var d=Object(k.a)(e[u]);r.attachSnippets(e,n,u,p.InputType,d,o)}}catch(v){s={error:v}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}var h=["EntityId","EntityTitle","EntityGuid","EntityType","IsPublished","Modified"];if(t.length)for(var g=0;g<h.length;g++)e[h[g]]={key:h[g],label:h[g],snip:r.valuePlaceholder(n,h[g],i),help:"SourceEditorSnippets.StandardFields."+h[g]+".Help"}}))},e.prototype.valuePlaceholder=function(e,t,n){return n.Type.indexOf("Razor")>-1?"@"+e+"."+t:"["+e.replace(".",":")+":"+t+"]"},e.prototype.getFields=function(e,t){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("eav/contenttype/getfields"),{params:{appid:e.toString(),staticName:t}}).toPromise().then((function(e){var t,n;if(e)try{for(var i=Object(f.i)(e),o=i.next();!o.done;o=i.next()){var r=o.value;if(r.Metadata){var s=r.Metadata,a=s.All,c=s[r.Type],l=s[r.InputType];s.merged=Object(f.a)(Object(f.a)(Object(f.a)({},a),c),l)}}}catch(p){t={error:p}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return e}))},e.prototype.attachSnippets=function(e,t,n,i,o,r){var s=r[i];if(i.indexOf("-")){var a=i.substr(0,i.indexOf("-"));if(a){var c=r[a];c&&(s=s?s.concat(c):c)}}if(s){void 0===e[n].more&&(e[n].more=[]);for(var l=e[n].more,p=0;p<s.length;p++)try{l[n+"-"+s[p].name]=Object.assign({},o,{key:n+" - "+s[p].name,label:s[p].name,snip:this.localizeGenericSnippet(s[p].content,t,n),collapse:!0})}finally{}}},e.prototype.localizeGenericSnippet=function(e,t,n){return e.replace(/(\$\{[0-9]+\:)var(\})/gi,"$1"+t+"$2").replace(/(\$\{[0-9]+\:)prop(\})/gi,"$1"+n+"$2")},e.\u0275fac=function(t){return new(t||e)(b.ac(C.b),b.ac(O.a))},e.\u0275prov=b.Mb({token:e,factory:e.\u0275fac}),e}(),P=n("Ata6"),I=n("H0VJ");function M(e,t){var n,i;if(!e||!t)return[];var o=[],r=e.split("/"),s=t,a=function(e){var t=s.find((function(t){return t.name===e}));return t?(o.push(t),t.children?void(s=t.children):"break"):"break"};try{for(var c=Object(f.i)(r),l=c.next();!l.done&&"break"!==a(l.value);l=c.next());}catch(p){n={error:p}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return o}function V(e,t){1&e&&b.Sb(0)}var _=function(e){return{item:e}};function j(e,t){if(1&e&&(b.Ub(0),b.Nc(1,V,1,0,"ng-container",3),b.Tb()),2&e){var n=t.$implicit;b.ic();var i=b.Cc(3);b.Bb(1),b.qc("ngTemplateOutlet",i)("ngTemplateOutletContext",b.vc(2,_,n))}}var B=function(e){return{active:e}};function z(e,t){if(1&e){var n=b.Xb();b.Wb(0,"div",7),b.ec("click",(function(){b.Ec(n);var e=b.ic().item;return b.ic().openTemplate(e.pathFromRoot)})),b.Pc(1),b.Vb()}if(2&e){var i=b.ic().item,o=b.ic();b.qc("ngClass",b.vc(3,B,o.toggledItems.includes(i)))("matTooltip",i.name),b.Bb(1),b.Rc(" ",i.name," ")}}function E(e,t){if(1&e){var n=b.Xb();b.Wb(0,"div",8),b.ec("click",(function(){b.Ec(n);var e=b.ic().item;return b.ic().toggleItem(e)})),b.Wb(1,"mat-icon"),b.Pc(2),b.Vb(),b.Wb(3,"span"),b.Pc(4),b.Vb(),b.Vb()}if(2&e){var i=b.ic().item,o=b.ic();b.qc("matTooltip",i.name),b.Bb(2),b.Qc(o.toggledItems.includes(i)?"keyboard_arrow_down":"keyboard_arrow_right"),b.Bb(2),b.Qc(i.name)}}function L(e,t){1&e&&b.Sb(0)}function F(e,t){if(1&e&&(b.Wb(0,"div",10),b.Nc(1,L,1,0,"ng-container",3),b.Vb()),2&e){var n=t.$implicit;b.ic(3);var i=b.Cc(3);b.Bb(1),b.qc("ngTemplateOutlet",i)("ngTemplateOutletContext",b.vc(2,_,n))}}function W(e,t){if(1&e&&(b.Ub(0),b.Nc(1,F,2,4,"div",9),b.Tb()),2&e){var n=b.ic().item;b.Bb(1),b.qc("ngForOf",n.children)}}function q(e,t){if(1&e&&(b.Nc(0,z,2,5,"div",4),b.Nc(1,E,5,3,"div",5),b.Nc(2,W,2,1,"ng-container",6)),2&e){var n=t.item,i=b.ic();b.qc("ngIf",!n.children),b.Bb(1),b.qc("ngIf",n.children),b.Bb(1),b.qc("ngIf",i.toggledItems.includes(n))}}var A=function(){function e(e){this.dialogService=e,this.toggledItems=[]}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){var t,n,i,o;(null===(t=e.templates)||void 0===t?void 0:t.currentValue)&&(this.tree=function(e){var t,n,i,o;if(!e)return[];var r=[];try{for(var s=Object(f.i)(e),a=s.next();!a.done;a=s.next()){var c=a.value,l=r,p=c.split("/"),u=p[p.length-1],d=function(e){var t=l.find((function(t){return t.name===e}));if(t)l=t.children;else{var n={name:e,children:e!==u?[]:null,pathFromRoot:c};l.push(n),l=n.children}};try{for(var h=(i=void 0,Object(f.i)(p)),g=h.next();!g.done;g=h.next())d(g.value)}catch(v){i={error:v}}finally{try{g&&!g.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}}}catch(b){t={error:b}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return r}(this.templates),this.toggledItems=M(null===(n=this.view)||void 0===n?void 0:n.FileName,this.tree)),(null===(i=e.view)||void 0===i?void 0:i.currentValue)&&(this.toggledItems=M(null===(o=this.view)||void 0===o?void 0:o.FileName,this.tree))},e.prototype.openTemplate=function(e){this.dialogService.openCodeFile(e)},e.prototype.toggleItem=function(e){!function(e,t){var n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1)}(e,this.toggledItems)},e.\u0275fac=function(t){return new(t||e)(b.Qb(I.a))},e.\u0275cmp=b.Kb({type:e,selectors:[["app-code-templates"]],inputs:{view:"view",templates:"templates"},features:[b.zb],decls:4,vars:1,consts:[[1,"editor-active-explorer","editor-fancy-scrollbar"],[4,"ngFor","ngForOf"],["collapsible",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","template-option","matTooltipShowDelay","750",3,"ngClass","matTooltip","click",4,"ngIf"],["class","collapsible","matTooltipShowDelay","750",3,"matTooltip","click",4,"ngIf"],[4,"ngIf"],["matTooltipShowDelay","750",1,"template-option",3,"ngClass","matTooltip","click"],["matTooltipShowDelay","750",1,"collapsible",3,"matTooltip","click"],["class","list",4,"ngFor","ngForOf"],[1,"list"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Nc(1,j,2,4,"ng-container",1),b.Nc(2,q,3,3,"ng-template",null,2,b.Oc),b.Vb()),2&e&&(b.Bb(1),b.qc("ngForOf",t.tree))},directives:[i.s,i.A,i.t,i.q,c.a,a.a],styles:[".template-option[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.template-option[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.template-option.active[_ngcontent-%COMP%]{background-color:#37373d}.list[_ngcontent-%COMP%]{padding-left:16px}.collapsible[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:3px 0}.collapsible[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}"],changeDetection:0}),e}();function N(e,t){var n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1)}var R=n("hOvr"),Q=n("Zfm5"),$=function(){function e(){}return e.prototype.transform=function(e){return typeof e!=typeof{}?e:Object.keys(e).map((function(t){return e[t]}))},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=b.Pb({name:"toarray",type:e,pure:!0}),e}();function D(e,t){if(1&e&&(b.Wb(0,"mat-option",6),b.Pc(1),b.Vb()),2&e){var n=t.$implicit;b.qc("value",n),b.Bb(1),b.Qc(n)}}function K(e,t){if(1&e&&(b.Wb(0,"div"),b.Wb(1,"a",18),b.Pc(2),b.Vb(),b.Vb()),2&e){var n=t.$implicit;b.Bb(1),b.rc("href",n.url,b.Hc),b.Bb(1),b.Qc(n.name)}}function H(e,t){if(1&e&&(b.Wb(0,"div",16),b.Wb(1,"div",17),b.Pc(2),b.Vb(),b.Nc(3,K,3,2,"div",5),b.Vb()),2&e){var n=b.ic().$implicit;b.Bb(2),b.Qc(n.help),b.Bb(1),b.qc("ngForOf",n.links)}}function U(e,t){if(1&e){var n=b.Xb();b.Wb(0,"li",11),b.Wb(1,"div",12),b.Wb(2,"div",13),b.ec("click",(function(){b.Ec(n);var e=t.$implicit;return b.ic(3).addSnippet(e.snip)})),b.Pc(3),b.Vb(),b.Wb(4,"mat-icon",14),b.ec("click",(function(){b.Ec(n);var e=t.$implicit;return b.ic(3).toggleInfo(e)})),b.Pc(5," info "),b.Vb(),b.Vb(),b.Nc(6,H,4,2,"div",15),b.Vb()}if(2&e){var i=t.$implicit,o=b.ic(3);b.Bb(2),b.qc("matTooltip",i.snip),b.Bb(1),b.Rc("",i.label," "),b.Bb(3),b.qc("ngIf",o.toggledInfos.includes(i))}}function X(e,t){if(1&e&&(b.Wb(0,"ul",9),b.Nc(1,U,7,3,"li",10),b.jc(2,"toarray"),b.Vb()),2&e){var n=b.ic().$implicit;b.Bb(1),b.qc("ngForOf",b.kc(2,1,n.value))}}function G(e,t){if(1&e){var n=b.Xb();b.Ub(0),b.Wb(1,"div",7),b.ec("click",(function(){b.Ec(n);var e=t.$implicit;return b.ic().toggleItem(e)})),b.Wb(2,"mat-icon"),b.Pc(3),b.Vb(),b.Wb(4,"span"),b.Pc(5),b.Vb(),b.Vb(),b.Nc(6,X,3,3,"ul",8),b.Tb()}if(2&e){var i=t.$implicit,o=b.ic();b.Bb(1),b.qc("matTooltip",i.key),b.Bb(2),b.Qc(o.toggledItems.includes(i)?"keyboard_arrow_down":"keyboard_arrow_right"),b.Bb(2),b.Qc(i.key),b.Bb(1),b.qc("ngIf",o.toggledItems.includes(i))}}var J=function(){function e(){this.insertSnippet=new b.n,this.selected="Content",this.toggledItems=[],this.toggledInfos=[]}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){var t,n=null===(t=e.snippets)||void 0===t?void 0:t.currentValue;n?(this.sets=Object.keys(n),this.activeSet=this.snippets[this.selected]):(this.sets=null,this.activeSet=null)},e.prototype.onSetChange=function(e){this.selected=e.value,this.activeSet=this.snippets[this.selected],this.toggledItems=[],this.toggledInfos=[]},e.prototype.addSnippet=function(e){this.insertSnippet.emit(e)},e.prototype.toggleItem=function(e){N(e,this.toggledItems)},e.prototype.toggleInfo=function(e){N(e,this.toggledInfos)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=b.Kb({type:e,selectors:[["app-code-snippets"]],inputs:{snippets:"snippets"},outputs:{insertSnippet:"insertSnippet"},features:[b.zb],decls:7,vars:5,consts:[[1,"editor-active-explorer","editor-fancy-scrollbar"],[1,"edit-input"],["appearance","standard","color","accent",1,"set-dropdown"],["name","selected",3,"ngModel","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"value"],["matTooltipShowDelay","750",1,"collapsible",3,"matTooltip","click"],["class","list",4,"ngIf"],[1,"list"],["class","list-item",4,"ngFor","ngForOf"],[1,"list-item"],[1,"list-item__label-wrapper"],["matRipple","","matTooltipShowDelay","750",1,"label",3,"matTooltip","click"],["matTooltip","Show Help","matTooltipShowDelay","750","appClickStopPropagation","",3,"click"],["class","list-item__help-wrapper",4,"ngIf"],[1,"list-item__help-wrapper"],[1,"text"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Wb(1,"div",1),b.Wb(2,"mat-form-field",2),b.Wb(3,"mat-select",3),b.ec("selectionChange",(function(e){return t.onSetChange(e)})),b.Nc(4,D,2,2,"mat-option",4),b.Vb(),b.Vb(),b.Vb(),b.Nc(5,G,7,4,"ng-container",5),b.jc(6,"keyvalue"),b.Vb()),2&e&&(b.Bb(3),b.qc("ngModel",t.selected),b.Bb(1),b.qc("ngForOf",t.sets),b.Bb(1),b.qc("ngForOf",b.kc(6,3,t.activeSet)))},directives:[R.c,p.a,o.r,o.u,i.s,u.l,c.a,a.a,i.t,u.q,Q.a],pipes:[i.l,$],styles:[".edit-input[_ngcontent-%COMP%]{background-color:#fff;height:44px;display:flex;align-items:flex-end}.set-dropdown[_ngcontent-%COMP%]{font-size:14px;height:auto}.collapsible[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:3px 0}.collapsible[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.list[_ngcontent-%COMP%]{list-style-type:none;margin:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{padding-right:8px}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.list[_ngcontent-%COMP%]   .list-item__label-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{cursor:pointer;padding:3px 0 3px 24px;flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;font-size:18px}.list[_ngcontent-%COMP%]   .list-item__help-wrapper[_ngcontent-%COMP%]{padding:3px 18px 3px 24px;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.list[_ngcontent-%COMP%]   .list-item__help-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;font-style:oblique}"],changeDetection:0}),e}(),Z={mode:"ace/mode/razor",wrap:!0,useSoftTabs:!0,theme:"ace/theme/sqlserver",fontSize:14,fontFamily:"Consolas, Courier New, monospace",showGutter:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0},Y=["editor"],ee=function(){function e(e){this.zone=e,this.value="",this.propagateChange=function(){},this.propagateTouched=function(){}}return e.prototype.ngOnInit=function(){!function e(t,n,i){void 0===i&&(i=0);var o=t.length===i+1?n:e.bind(this,t,n,i+1),r=t[i];if(window[r.globalVar])n();else{var s=document.querySelector('script[src="'+r.src+'"]');if(s)s.addEventListener("load",o,{once:!0});else{var a=document.createElement("script");a.src=r.src,a.addEventListener("load",o,{once:!0}),document.head.appendChild(a)}}}([{globalVar:"ace",src:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ace.min.js"},{globalVar:null,src:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ext-modelist.min.js"},{globalVar:null,src:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ext-language_tools.min.js"}],this.aceLoaded.bind(this))},e.prototype.ngOnChanges=function(e){var t,n,i,o,r,s=this,a=null===(t=e.filename)||void 0===t?void 0:t.currentValue,c=null===(n=e.snippets)||void 0===n?void 0:n.currentValue;if(this.updateValues(a,c),this.editor){(null===(i=e.toggleResize)||void 0===i?void 0:i.currentValue)!==(null===(o=e.toggleResize)||void 0===o?void 0:o.previousValue)&&this.zone.runOutsideAngular((function(){setTimeout((function(){s.editor.resize()}),50)}));var l=null===(r=e.insertSnippet)||void 0===r?void 0:r.currentValue;l&&this.zone.runOutsideAngular((function(){ace.require("ace/snippets").snippetManager.insertSnippet(s.editor,l),s.editor.focus()}))}},e.prototype.writeValue=function(e){var t=this;this.value=e||"",this.editor&&this.zone.runOutsideAngular((function(){var e=t.editor.getCursorPosition();t.editor.setValue(t.value,-1),t.editor.moveCursorToPosition(e)}))},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){this.propagateTouched=e},e.prototype.ngOnDestroy=function(){var e=this;this.zone.runOutsideAngular((function(){e.editor.destroy(),e.editor.container.remove(),e.editor=null}))},e.prototype.aceLoaded=function(){var e=this;this.zone.runOutsideAngular((function(){ace.config.set("basePath","https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11"),e.editor=ace.edit(e.editorRef.nativeElement,Z),e.editor.$blockScrolling=1/0,e.editor.session.setValue(e.value),e.updateValues(e.filename,e.snippets),e.editor.on("change",e.onEditorValueChange.bind(e)),e.editor.on("blur",e.onEditorBlurred.bind(e)),e.editor.focus()}))},e.prototype.onEditorValueChange=function(){var e=this;this.zone.run((function(){e.propagateChange(e.editor.getValue())}))},e.prototype.onEditorBlurred=function(){var e=this;this.zone.run((function(){e.propagateTouched(e.editor.getValue())}))},e.prototype.updateValues=function(e,t){var n=this;this.editor&&this.zone.runOutsideAngular((function(){if(e){var i=ace.require("ace/ext/modelist").getModeForPath(e).mode;n.editor.session.setMode(i)}t&&ace.require("ace/snippets").snippetManager.register(n.snippets)}))},e.\u0275fac=function(t){return new(t||e)(b.Qb(b.z))},e.\u0275cmp=b.Kb({type:e,selectors:[["app-ace-editor"]],viewQuery:function(e,t){var n;1&e&&b.Vc(Y,!0),2&e&&b.Bc(n=b.fc())&&(t.editorRef=n.first)},inputs:{filename:"filename",snippets:"snippets",insertSnippet:"insertSnippet",toggleResize:"toggleResize"},features:[b.Ab([{provide:o.p,useExisting:Object(b.T)((function(){return e})),multi:!0}]),b.zb],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["editor",""]],template:function(e,t){1&e&&b.Rb(0,"div",0,1)},styles:["[_nghost-%COMP%] {display: block; width: 100%; height: 100%}"],changeDetection:0}),e}();function te(e,t){if(1&e){var n=b.Xb();b.Wb(0,"app-ace-editor",8),b.ec("ngModelChange",(function(e){return b.Ec(n),b.ic().view.Code=e})),b.Vb()}if(2&e){var i=b.ic();b.qc("filename",i.view.FileName)("ngModel",i.view.Code)("snippets",i.editorSnipps)("insertSnippet",i.insertSnipp)("toggleResize",!i.activeExplorer)}}var ne=function(e){return{active:e}},ie=[{path:"",component:function(){function e(e,t,n,i,o,r,s,a,c){this.context=e,this.route=t,this.snackBar=n,this.snackBarStack=i,this.sourceService=o,this.snippetsService=r,this.zone=s,this.titleService=a,this.dialogService=c,this.explorer={templates:"templates",snippets:"snippets"},this.activeExplorer=this.explorer.templates,this.eventListeners=[],this.context.init(this.route),this.calculateViewKey(),this.attachListeners()}return e.prototype.ngOnInit=function(){var e=this,t=this.sourceService.get(this.viewKey).pipe(Object(g.a)()),n=this.sourceService.getTemplates().pipe(Object(g.a)());t.subscribe((function(t){e.view=t,e.savedCode=e.view.Code,e.titleService.setTitle(e.view.FileName+" - Code Editor"),e.snippetsService.getSnippets(e.view).then((function(t){e.explorerSnipps=t.sets,e.editorSnipps=t.list}))})),n.subscribe((function(t){e.templates=t})),Object(v.a)([t,n]).subscribe((function(t){var n=Object(f.f)(t,2);return e.showCodeAndEditionWarnings(n[0],n[1])}))},e.prototype.showCodeAndEditionWarnings=function(e,t){var n=this,i=e.FileName,o=i.indexOf("/")>-1?i.lastIndexOf("/")+1:0,r=0===o?"":i.substr(0,o),s=i.substr(o),a=s.substr(0,s.length-e.Extension.length)+".code"+e.Extension,c=t.find((function(e){return e===r+a})),l=t.filter((function(e){return e.endsWith(s)})).length-1;c&&this.snackBarStack.add("This template also has a code-behind file '"+c+"'.","Open").subscribe((function(e){return n.dialogService.openCodeFile(c)})),l&&this.snackBarStack.add("There are "+l+" other editions of this. You may be editing an edition which is not the one you see.","Help").subscribe((function(e){return window.open("https://r.2sxc.org/polymorphism","_blank")}))},e.prototype.ngOnDestroy=function(){this.detachListeners()},e.prototype.toggleExplorer=function(e){this.activeExplorer=this.activeExplorer===e?null:e},e.prototype.changeInsertSnipp=function(e){this.insertSnipp=e},e.prototype.save=function(){var e=this;this.snackBar.open("Saving...");var t=this.view.Code;this.sourceService.save(this.viewKey,this.view).subscribe({next:function(n){n?(e.savedCode=t,t=null,e.snackBar.open("Saved",null,{duration:2e3})):e.snackBar.open("Failed",null,{duration:2e3})},error:function(){e.snackBar.open("Failed",null,{duration:2e3})}})},e.prototype.calculateViewKey=function(){var e=sessionStorage.getItem(h.i),t=JSON.parse(e)[0];this.viewKey=t.EntityId||t.Path},e.prototype.attachListeners=function(){var e=this;this.zone.runOutsideAngular((function(){var t=e.stopClose.bind(e),n=e.keyboardSave.bind(e);window.addEventListener("beforeunload",t),window.addEventListener("keydown",n),e.eventListeners.push({element:window,type:"beforeunload",listener:t}),e.eventListeners.push({element:window,type:"keydown",listener:n})}))},e.prototype.detachListeners=function(){var e=this;this.zone.runOutsideAngular((function(){e.eventListeners.forEach((function(e){e.element.removeEventListener(e.type,e.listener)})),e.eventListeners=null}))},e.prototype.stopClose=function(e){this.savedCode!==this.view.Code&&(e.preventDefault(),e.returnValue="")},e.prototype.keyboardSave=function(e){var t=this;83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&(e.preventDefault(),this.zone.run((function(){t.save()})))},e.\u0275fac=function(t){return new(t||e)(b.Qb(m.a),b.Qb(d.a),b.Qb(l.b),b.Qb(x),b.Qb(S),b.Qb(T),b.Qb(b.z),b.Qb(P.d),b.Qb(I.a))},e.\u0275cmp=b.Kb({type:e,selectors:[["app-code-editor"]],decls:14,vars:12,consts:[[1,"editor-root"],[1,"editor-side-toolbar"],["matTooltip","Templates",1,"button",3,"ngClass","click"],["matTooltip","Snippets",1,"button",3,"ngClass","click"],[3,"hidden","view","templates"],[3,"hidden","snippets","insertSnippet"],[3,"filename","ngModel","snippets","insertSnippet","toggleResize","ngModelChange",4,"ngIf"],["mat-fab","","mat-elevation-z24","","matTooltip","Click to save or CTRL + S",3,"click"],[3,"filename","ngModel","snippets","insertSnippet","toggleResize","ngModelChange"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Wb(1,"div",1),b.Wb(2,"div",2),b.ec("click",(function(){return t.toggleExplorer(t.explorer.templates)})),b.Wb(3,"mat-icon"),b.Pc(4,"file_copy"),b.Vb(),b.Vb(),b.Wb(5,"div",3),b.ec("click",(function(){return t.toggleExplorer(t.explorer.snippets)})),b.Wb(6,"mat-icon"),b.Pc(7,"code"),b.Vb(),b.Vb(),b.Vb(),b.Rb(8,"app-code-templates",4),b.Wb(9,"app-code-snippets",5),b.ec("insertSnippet",(function(e){return t.changeInsertSnipp(e)})),b.Vb(),b.Nc(10,te,1,5,"app-ace-editor",6),b.Wb(11,"button",7),b.ec("click",(function(){return t.save()})),b.Wb(12,"mat-icon"),b.Pc(13,"done"),b.Vb(),b.Vb(),b.Vb()),2&e&&(b.Bb(2),b.qc("ngClass",b.vc(8,ne,t.activeExplorer===t.explorer.templates)),b.Bb(3),b.qc("ngClass",b.vc(10,ne,t.activeExplorer===t.explorer.snippets)),b.Bb(3),b.qc("hidden",t.activeExplorer!==t.explorer.templates)("view",t.view)("templates",t.templates),b.Bb(1),b.qc("hidden",t.activeExplorer!==t.explorer.snippets)("snippets",t.explorerSnipps),b.Bb(1),b.qc("ngIf",t.view))},directives:[c.a,i.q,a.a,A,J,i.t,s.b,ee,o.r,o.u],styles:[".mat-fab[_ngcontent-%COMP%]{position:absolute;right:48px;bottom:32px;z-index:10}"]}),e}()}],oe=function(){function e(){}return e.\u0275mod=b.Ob({type:e}),e.\u0275inj=b.Nb({factory:function(t){return new(t||e)},imports:[[d.g.forChild(ie)],d.g]}),e}(),re=n("O6Xb");n.d(t,"CodeEditorModule",(function(){return se}));var se=function(){function e(){}return e.\u0275mod=b.Ob({type:e}),e.\u0275inj=b.Nb({factory:function(t){return new(t||e)},providers:[m.a,S,I.a,T],imports:[[oe,re.a,i.c,r.g,s.c,a.b,c.b,l.d,o.l,p.b,u.r]]}),e}()}}]);
//# sourceMappingURL=code-editor-code-editor-module.3652f33c099fcac68526.js.map