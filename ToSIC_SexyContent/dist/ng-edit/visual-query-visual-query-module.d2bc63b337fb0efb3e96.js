(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{TpGC:function(e,t,n){"use strict";n.r(t);var i=n("8AiQ"),a=n("r4gC"),r=n("Qc/f"),o=n("9HSk"),c=n("F7GT"),s=n("2pW/"),u=n("BLjT"),l=n("5/c3"),d=n("LR82"),p=n("z5yO"),f=n("9RHM"),b=n("o9tz"),y=n("1C3z");function h(e,t){if(1&e&&(y.Wb(0,"li"),y.Oc(1),y.Vb()),2&e){var n=t.$implicit;y.Bb(1),y.Pc(n)}}function g(e,t){if(1&e&&(y.Wb(0,"li"),y.Wb(1,"b"),y.Oc(2),y.Vb(),y.Oc(3,"="),y.Wb(4,"em"),y.Oc(5),y.Vb(),y.Vb()),2&e){var n=t.$implicit;y.Bb(2),y.Pc(n.key),y.Bb(3),y.Pc(n.value)}}function v(e,t){if(1&e&&(y.Wb(0,"tr"),y.Wb(1,"td"),y.Wb(2,"pre"),y.Oc(3),y.Vb(),y.Vb(),y.Wb(4,"td"),y.Oc(5),y.Vb(),y.Wb(6,"td"),y.Wb(7,"ol"),y.Mc(8,g,6,2,"li",5),y.jc(9,"keyvalue"),y.Vb(),y.Vb(),y.Wb(10,"td"),y.Oc(11),y.Vb(),y.Vb()),2&e){var n=t.$implicit;y.Bb(3),y.Pc(n.value.Guid),y.Bb(2),y.Pc(n.value.Type),y.Bb(3),y.qc("ngForOf",y.kc(9,4,n.value.Configuration)),y.Bb(3),y.Pc(n.value.Error)}}function m(e,t){if(1&e&&(y.Wb(0,"tr"),y.Wb(1,"td"),y.Wb(2,"pre"),y.Oc(3),y.Vb(),y.Vb(),y.Wb(4,"td"),y.Wb(5,"pre"),y.Oc(6),y.Vb(),y.Vb(),y.Wb(7,"td"),y.Oc(8),y.Vb(),y.Wb(9,"td"),y.Oc(10),y.Vb(),y.Vb()),2&e){var n=t.$implicit;y.Bb(3),y.Pc(n.Source+":"+n.SourceOut),y.Bb(3),y.Pc(n.Target+":"+n.TargetIn),y.Bb(2),y.Pc(n.Count),y.Bb(2),y.Pc(n.Error)}}var D=function(){function e(e,t){this.data=e,this.dialogRef=t}return e.prototype.ngOnInit=function(){this.testParameters=this.data.testParameters,this.timeUsed=this.data.result.QueryTimer.Milliseconds,this.ticksUsed=this.data.result.QueryTimer.Ticks,this.result=this.data.result.Query,this.sources=this.data.result.Sources,this.streams=this.data.result.Streams},e.prototype.closeDialog=function(){this.dialogRef.close()},e.\u0275fac=function(t){return new(t||e)(y.Qb(u.a),y.Qb(u.h))},e.\u0275cmp=y.Kb({type:e,selectors:[["app-query-result"]],decls:55,vars:10,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","matTooltip","Close dialog",3,"click"],[1,"dialog-description"],[1,"description"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(y.Wb(0,"div",0),y.Wb(1,"div",1),y.Wb(2,"div"),y.Oc(3,"Query Results"),y.Vb(),y.Wb(4,"button",2),y.ec("click",(function(){return t.closeDialog()})),y.Wb(5,"mat-icon"),y.Oc(6,"close"),y.Vb(),y.Vb(),y.Vb(),y.Vb(),y.Wb(7,"p",3),y.Oc(8," The Full result was logged to the Browser Console. Further down you'll find more debug-infos.\n"),y.Vb(),y.Rb(9,"br"),y.Wb(10,"div",0),y.Wb(11,"div",1),y.Oc(12,"Parameters & Statistics"),y.Vb(),y.Vb(),y.Wb(13,"p",4),y.Oc(14),y.Vb(),y.Wb(15,"ul",4),y.Mc(16,h,2,1,"li",5),y.Vb(),y.Rb(17,"br"),y.Wb(18,"div",0),y.Wb(19,"div",1),y.Oc(20,"Query Results"),y.Vb(),y.Vb(),y.Wb(21,"pre"),y.Oc(22),y.jc(23,"json"),y.Vb(),y.Rb(24,"br"),y.Wb(25,"div",0),y.Wb(26,"div",1),y.Oc(27,"Sources"),y.Vb(),y.Vb(),y.Wb(28,"table",4),y.Wb(29,"tr"),y.Wb(30,"th"),y.Oc(31,"Guid"),y.Vb(),y.Wb(32,"th"),y.Oc(33,"Type"),y.Vb(),y.Wb(34,"th"),y.Oc(35,"Configuration"),y.Vb(),y.Wb(36,"th"),y.Oc(37,"Error"),y.Vb(),y.Vb(),y.Mc(38,v,12,6,"tr",5),y.jc(39,"keyvalue"),y.Vb(),y.Rb(40,"br"),y.Wb(41,"div",0),y.Wb(42,"div",1),y.Oc(43,"Streams"),y.Vb(),y.Vb(),y.Wb(44,"table",4),y.Wb(45,"tr"),y.Wb(46,"th"),y.Oc(47,"Source"),y.Vb(),y.Wb(48,"th"),y.Oc(49,"Target"),y.Vb(),y.Wb(50,"th"),y.Oc(51,"Items"),y.Vb(),y.Wb(52,"th"),y.Oc(53,"Error"),y.Vb(),y.Vb(),y.Mc(54,m,11,4,"tr",5),y.Vb()),2&e&&(y.Bb(14),y.Rc(" Executed in ",t.timeUsed,"ms (",t.ticksUsed," ticks)\n"),y.Bb(2),y.qc("ngForOf",null==t.testParameters?null:t.testParameters.split("\n")),y.Bb(6),y.Qc("  ",y.kc(23,6,t.result),"\n"),y.Bb(16),y.qc("ngForOf",y.kc(39,8,t.sources)),y.Bb(16),y.qc("ngForOf",t.streams))},directives:[u.i,o.b,r.a,a.a,i.s],pipes:[i.k,i.l],styles:[".description[_ngcontent-%COMP%]{font-size:14px}pre[_ngcontent-%COMP%]{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:1.42857143;color:#333;word-break:break-all;word-wrap:break-word;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px;overflow-x:auto}th[_ngcontent-%COMP%]{text-align:left}"],changeDetection:0}),e}(),O=n("Iv+g"),S=n("D57K"),P=n("t5c9"),C=n("dkRO"),w=function(){function e(e,t,n){this.http=e,this.context=t,this.dnnContext=n}return e.prototype.loadQuery=function(e){return Object(S.b)(this,void 0,void 0,(function(){var t,n,i,a;return Object(S.e)(this,(function(r){switch(r.label){case 0:return[4,this.http.get(this.dnnContext.$2sxc.http.apiUrl("eav/PipelineDesigner/GetPipeline"),{params:{appId:this.context.appId.toString(),id:e.toString()}}).toPromise()];case 1:return t=r.sent(),n=t,[4,this.http.get(this.dnnContext.$2sxc.http.apiUrl("eav/PipelineDesigner/GetInstalledDataSources")).toPromise()];case 2:return n.InstalledDataSources=r.sent(),e||(t.Pipeline={AllowEdit:"True"}),t.InstalledDataSources.push({PartAssemblyAndType:(i=b.a.pipelineDesigner.outDataSource).className,Name:i.name||i.className,In:i.in,Out:null,allowNew:!1,PrimaryType:"Target",DynamicOut:!1,Difficulty:100}),this.postProcessDataSources(t),(a={id:e,data:t,readOnly:!1}).id&&1!==a.data.DataSources.length?a.readOnly=!t.Pipeline.AllowEdit:(a.readOnly=!1,this.loadQueryFromDefaultTemplate(a)),[2,a]}}))}))},e.prototype.dataSourceIsPersisted=function(e){return-1===e.EntityGuid.indexOf("unsaved")},e.prototype.postProcessDataSources=function(e){var t,n,i=this;if(!e.DataSources.find((function(e){return"Out"===e.EntityGuid}))){var a=b.a.pipelineDesigner.outDataSource;e.DataSources.push({Name:a.name,Description:a.description,EntityGuid:"Out",PartAssemblyAndType:a.className,VisualDesignerData:a.visualDesignerData,ReadOnly:!0,Difficulty:100});var r=function(t){t.Definition=function(){return i.getDataSourceDefinitionProperty(e,t)},t.ReadOnly=t.ReadOnly||!e.Pipeline.AllowEdit,t.VisualDesignerData=t.VisualDesignerData||{Top:50,Left:50}};try{for(var o=Object(S.i)(e.DataSources),c=o.next();!c.done;c=o.next())r(c.value)}catch(s){t={error:s}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}},e.prototype.getDataSourceDefinitionProperty=function(e,t){var n=e.InstalledDataSources.filter((function(e){return e.PartAssemblyAndType===t.PartAssemblyAndType}))[0];if(!n)throw new Error("DataSource Definition not found: "+t.PartAssemblyAndType);return n},e.prototype.loadQueryFromDefaultTemplate=function(e){var t,n,i=b.a.pipelineDesigner.defaultPipeline.dataSources;try{for(var a=Object(S.i)(i),r=a.next();!r.done;r=a.next()){var o=r.value;this.addDataSource(e,o.partAssemblyAndType,o.visualDesignerData,o.entityGuid,null)}}catch(c){t={error:c}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}e.data.Pipeline.StreamWiring=b.a.pipelineDesigner.defaultPipeline.streamWiring},e.prototype.addDataSource=function(e,t,n,i,a){n||(n={Top:100,Left:100});var r={VisualDesignerData:n,Name:a||this.typeNameFilter(t,"className"),Description:"",PartAssemblyAndType:t,EntityGuid:i||"unsaved"+(e.dsCount+1)};r=Object.assign(r,this.getNewDataSource(e.data,r)),e.data.DataSources.push(r)},e.prototype.typeNameFilter=function(e,t){var n=e.match(/[^,\s]+/g);switch(t){case"classFullName":if(n)return n[0];break;case"className":if(n){var i=n[0].match(/[^\.]+/g);return i[i.length-1]}}return e},e.prototype.getNewDataSource=function(e,t){var n=this;return{Definition:function(){return n.getDataSourceDefinitionProperty(e,t)}}},e.prototype.dsTypeInfo=function(e,t){var n=e.EntityGuid;if(t._typeInfos||(t._typeInfos={}),t._typeInfos[n])return t._typeInfos[n];var i=null,a=t.data.InstalledDataSources.find((function(t){return t.PartAssemblyAndType===e.PartAssemblyAndType})),r=this.buildGuiTypes();if(a){var o=a,c=o.PrimaryType;i=Object.assign({},c?r[c]:r.Unknown),o.Icon&&(i.icon=r.iconPrefix+o.Icon),o.DynamicOut&&(i.dynamicOut=!0),o.HelpLink&&(i.helpLink=o.HelpLink),o.EnableConfig&&(i.config=o.EnableConfig)}return i||(i=r.Unknown),t._typeInfos[n]=i,i},e.prototype.buildGuiTypes=function(){var e={iconPrefix:""};function t(t,n,i){e[t]={name:t,icon:e.iconPrefix+n,notes:i}}return t("Unknown","fiber_manual_record","unknown type"),t("Cache","history","caching of data"),t("Filter","filter_list","filter data - usually returning less items than came in"),t("Logic","share","logic operations - usually choosing between different streams"),t("Lookup","search","lookup operation - usually looking for other data based on a criteria"),t("Modify","star_half","modify data - usually changing, adding or removing values"),t("Security","account_circle","security - usually limit what the user sees based on his identity"),t("Sort","sort","sort the items"),t("Source","cloud_upload","source of new data - usually SQL, CSV or similar"),t("Target","adjust","target - usually just a destination of data"),e},e.prototype.save=function(e){var t=[];e.data.DataSources.forEach((function(e){var n=Object(f.a)(e);delete n.ReadOnly,t.push(n)}));var n=e.data.Pipeline;return this.http.post(this.dnnContext.$2sxc.http.apiUrl("eav/PipelineDesigner/SavePipeline"),{pipeline:n,dataSources:t},{params:{appId:this.context.appId.toString(),Id:n.EntityId}})},e.prototype.queryPipeline=function(e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("eav/PipelineDesigner/QueryPipeline"),{params:{appId:this.context.appId.toString(),id:e.toString()}})},e.\u0275fac=function(t){return new(t||e)(y.ac(P.b),y.ac(O.a),y.ac(C.a))},e.\u0275prov=y.Mb({token:e,factory:e.\u0275fac}),e}(),V=n("Ata6"),W=n("ykZ8"),E=n("S36y"),k={lineWidth:4,strokeStyle:"#61B7CF",joinstyle:"round",outlineColor:"white",outlineWidth:2},x=0,I=["#009688","#00bcd4","#3f51b5","#9c27b0","#e91e63","#db4437","#ff9800","#60a917","#60a917","#008a00","#00aba9","#1ba1e2","#0050ef","#6a00ff","#aa00ff","#f472d0","#d80073","#a20025","#e51400","#fa6800","#f0a30a","#e3c800","#825a2c","#6d8764","#647687","#76608a","#a0522d"],q={},_=I.length-1;function T(e){return q[e]||(q[e]=Object.assign({},k,{strokeStyle:I[x++%_]}))}var M={Connector:["Bezier",{curviness:70}],HoverPaintStyle:{lineWidth:4,strokeStyle:"#216477",outlineWidth:2,outlineColor:"white"},PaintStyle:T("dummy"),Container:"pipelineContainer"},B=function(){function e(e,t,n){this.http=e,this.context=t,this.dnnContext=n,this.connectionsInitialized=!1}return e.prototype.buildInstance=function(e){var t=this,n=jsPlumb.getInstance(M);return n.bind("connectionDetached",(function(i){if("dataSource_Out"===i.targetId){var a=t.findDataSourceOfElement(i.target,e).dataSource.Definition().In,r=i.targetEndpoint.getOverlay("endpointLabel").label;-1===a.indexOf(r)&&setTimeout((function(){n.deleteEndpoint(i.targetEndpoint)}),0)}})),n.bind("connection",(function(e){if(t.connectionsInitialized){var i,a=e.targetEndpoint.getOverlay("endpointLabel"),r=a.getLabel();n.getEndpoints(e.target.id).forEach((function(t){t.getOverlay("endpointLabel").getLabel()===r&&e.targetEndpoint.id!==t.id&&t.canvas.classList.contains("targetEndpoint")&&(i=t)})),i&&a.setLabel("PleaseRename"+Math.floor(99999*Math.random()))}})),n},e.prototype.findDataSourceOfElement=function(e,t){var n=(e=this.fixElementNodeList(e)).attributes.guid.value;return t.data.DataSources.find((function(e){return e.EntityGuid===n}))},e.prototype.initWirings=function(e,t){var n,i=this;null===(n=e.data.Pipeline.StreamWiring)||void 0===n||n.forEach((function(n){var a="dataSource_"+n.From,r=a+"_out_"+n.Out,o="dataSource_"+n.To,c=o+"_in_"+n.In;t.getEndpoint(r)||i.addEndpoint(jsPlumb.getSelector("#"+a),n.Out,!1,e,t),t.getEndpoint(c)||i.addEndpoint(jsPlumb.getSelector("#"+o),n.In,!0,e,t);try{t.connect({uuids:[r,c],paintStyle:T(r)})}catch(s){console.error({message:"Connection failed",from:r,to:c})}}))},e.prototype.addEndpoint=function(e,t,n,i,a){if(e=this.fixElementNodeList(e)){var r=this.findDataSourceOfElement(e,i),o={uuid:e.id+(n?"_in_":"_out_")+t,enabled:!r.ReadOnly||"Out"===r.EntityGuid};a.addEndpoint(e,n?this.buildTargetEndpoint(i):this.buildSourceEndpoint(i),o).getOverlay("endpointLabel").setLabel(t)}else console.error({message:"Element not found",selector:e})},e.prototype.buildSourceEndpoint=function(e){return{paintStyle:{fillStyle:"transparent",radius:10,lineWidth:0},cssClass:"sourceEndpoint",maxConnections:-1,isSource:!0,anchor:["Continuous",{faces:["top"]}],overlays:this.getEndpointOverlays(!0,e.readOnly)}},e.prototype.buildTargetEndpoint=function(e){return{paintStyle:{fillStyle:"transparent",radius:10,lineWidth:0},cssClass:"targetEndpoint",maxConnections:1,isTarget:!0,anchor:["Continuous",{faces:["bottom"]}],overlays:this.getEndpointOverlays(!1,e.readOnly),dropOptions:{hoverClass:"hover",activeClass:"active"}}},e.prototype.getEndpointOverlays=function(e,t){return[["Label",{id:"endpointLabel",location:[.5,e?0:1],label:"Default",cssClass:"noselect "+(e?"endpointSourceLabel":"endpointTargetLabel"),events:{dblclick:function(e){if(!t){var n=prompt("Rename Stream",e.label);n&&e.setLabel(n)}}}}]]},e.prototype.makeSource=function(e,t,n,i,a){var r=this;t=this.fixElementNodeList(t),a.batch((function(){var o,c;i.readOnly||a.draggable(t,{grid:[20,20],drag:n});var s=e.Definition();if(s){if(null===(o=s.Out)||void 0===o||o.forEach((function(e){r.addEndpoint(t,e,!1,i,a)})),null===(c=s.In)||void 0===c||c.forEach((function(e){r.addEndpoint(t,e,!0,i,a)})),s.In){var u=r.buildTargetEndpoint(i);u.maxConnections=-1,a.makeTarget(t,u)}s.DynamicOut&&a.makeSource(t,r.buildSourceEndpoint(i),{filter:".add-endpoint .new-connection"})}}))},e.prototype.pushPlumbConfigToQueryDef=function(e,t){var n=[];e.getAllConnections().forEach((function(e){n.push({From:e.sourceId.substr("dataSource_".length),Out:e.endpoints[0].getOverlay("endpointLabel").label,To:e.targetId.substr("dataSource_".length),In:e.endpoints[1].getOverlay("endpointLabel").label})})),t.data.Pipeline.StreamWiring=n;var i=[];e.selectEndpoints({target:"dataSource_Out"}).each((function(e){i.push(e.getOverlay("endpointLabel").label)})),t.data.Pipeline.StreamsOut=i.join(",")},e.prototype.putEntityCountOnConnection=function(e,t,n){var i;null===(i=e.Streams)||void 0===i||i.forEach((function(e){var i,a="dataSource_"+e.Target;"00000000-0000-0000-0000-000000000000"!==e.Target&&e.Target!==t.data.Pipeline.EntityGuid||(a="dataSource_Out");var r=a+"_in_"+e.TargetIn,o=n.getEndpoint("dataSource_"+e.Source+"_out_"+e.SourceOut);o&&(null===(i=o.connections)||void 0===i||i.forEach((function(t){t.endpoints[1].getUuid()!==r||t.setLabel({label:e.Count.toString(),cssClass:"streamEntitiesCount"})})))}))},e.prototype.fixElementNodeList=function(e){return e instanceof NodeList?e[0]:e},e.\u0275fac=function(t){return new(t||e)(y.ac(P.b),y.ac(O.a),y.ac(C.a))},e.\u0275prov=y.Mb({token:e,factory:e.\u0275fac}),e}();function A(e,t){if(1&e&&(y.Wb(0,"li"),y.Oc(1),y.Vb()),2&e){var n=t.$implicit;y.Bb(1),y.Pc(n)}}function L(e,t){if(1&e&&(y.Wb(0,"li"),y.Oc(1),y.Vb()),2&e){var n=t.$implicit;y.Bb(1),y.Pc(n)}}function R(e,t){if(1&e&&(y.Wb(0,"li"),y.Oc(1),y.Vb()),2&e){var n=t.$implicit;y.Bb(1),y.Pc(n)}}function Q(e,t){if(1&e&&(y.Wb(0,"div",14),y.Wb(1,"div",7),y.Wb(2,"span"),y.Oc(3,"Warnings"),y.Vb(),y.Wb(4,"mat-icon",15),y.Oc(5,"warning"),y.Vb(),y.Vb(),y.Wb(6,"ol",10),y.Mc(7,R,2,1,"li",11),y.Vb(),y.Vb()),2&e){var n=y.ic(2);y.Bb(7),y.qc("ngForOf",n.warnings)}}function N(e,t){if(1&e&&(y.Wb(0,"div",16),y.Wb(1,"div",7),y.Oc(2,"Query Description"),y.Vb(),y.Wb(3,"div"),y.Oc(4),y.Vb(),y.Vb()),2&e){var n=y.ic(2);y.Bb(4),y.Pc(n.queryDef.data.Pipeline.Description)}}function F(e,t){if(1&e){var n=y.Xb();y.Wb(0,"div",1),y.Wb(1,"div",2),y.Wb(2,"div",3),y.Wb(3,"button",4),y.ec("click",(function(){return y.Dc(n),y.ic().saveAndRunQuery(!0,!0)})),y.Oc(4," Save and run "),y.Vb(),y.Wb(5,"button",5),y.ec("click",(function(){return y.Dc(n),y.ic().saveAndRunQuery(!1,!0)})),y.Oc(6,"Run"),y.Vb(),y.Wb(7,"button",5),y.ec("click",(function(){return y.Dc(n),y.ic().saveAndRunQuery(!0,!1)})),y.Oc(8,"Save"),y.Vb(),y.Wb(9,"button",5),y.ec("click",(function(){return y.Dc(n),y.ic().doRepaint()})),y.Oc(10,"Repaint"),y.Vb(),y.Vb(),y.Wb(11,"div",6),y.Wb(12,"div",7),y.Wb(13,"div"),y.Oc(14,"Parameters"),y.Vb(),y.Wb(15,"div"),y.Wb(16,"button",8),y.ec("click",(function(){return y.Dc(n),y.ic().editPipeline()})),y.Wb(17,"mat-icon"),y.Oc(18,"edit"),y.Vb(),y.Vb(),y.Wb(19,"button",9),y.ec("click",(function(){return y.Dc(n),y.ic().openParamsHelp()})),y.Wb(20,"mat-icon"),y.Oc(21,"info"),y.Vb(),y.Vb(),y.Vb(),y.Vb(),y.Wb(22,"ul",10),y.Mc(23,A,2,1,"li",11),y.Vb(),y.Vb(),y.Wb(24,"div",6),y.Wb(25,"div",7),y.Oc(26,"Test Parameters"),y.Vb(),y.Wb(27,"ul",10),y.Mc(28,L,2,1,"li",11),y.Vb(),y.Vb(),y.Mc(29,Q,8,1,"div",12),y.Mc(30,N,5,1,"div",13),y.Vb(),y.Vb()}if(2&e){var i=y.ic();y.Bb(23),y.qc("ngForOf",null==i.queryDef.data.Pipeline.Params?null:i.queryDef.data.Pipeline.Params.split("\n")),y.Bb(5),y.qc("ngForOf",null==i.queryDef.data.Pipeline.TestParameters?null:i.queryDef.data.Pipeline.TestParameters.split("\n")),y.Bb(1),y.qc("ngIf",i.warnings.length),y.Bb(1),y.qc("ngIf",i.queryDef.data.Pipeline.Description)}}var G=function(){function e(e){this.context=e,this.editPipelineEntity=new y.n,this.saveAndRun=new y.n,this.repaint=new y.n}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){var t;(null===(t=e.queryDef)||void 0===t?void 0:t.currentValue)&&(this.warnings=function(e,t){var n=[];try{var i=/^\[module:moduleid\]=([0-9]*)$/gim.exec(e.Pipeline.TestParameters)[1],a=t.moduleId.toString();i!==a&&n.push("Your test moduleid ("+i+") is different from the current moduleid ("+a+"). Note that 2sxc 9.33 automatically provides the moduleid - so you usually do not need to set it any more.")}catch(r){}return n}(this.queryDef.data,this.context))},e.prototype.editPipeline=function(){this.editPipelineEntity.emit()},e.prototype.openParamsHelp=function(){window.open("https://r.2sxc.org/QueryParams","_blank")},e.prototype.saveAndRunQuery=function(e,t){this.saveAndRun.emit({save:e,run:t})},e.prototype.doRepaint=function(){this.repaint.emit()},e.\u0275fac=function(t){return new(t||e)(y.Qb(O.a))},e.\u0275cmp=y.Kb({type:e,selectors:[["app-run-explorer"]],inputs:{queryDef:"queryDef"},outputs:{editPipelineEntity:"editPipelineEntity",saveAndRun:"saveAndRun",repaint:"repaint"},features:[y.zb],decls:1,vars:1,consts:[["class","editor-active-explorer editor-fancy-scrollbar",4,"ngIf"],[1,"editor-active-explorer","editor-fancy-scrollbar"],[1,"wrapper"],[1,"actions"],["mat-raised-button","","color","accent",1,"action",3,"click"],["mat-raised-button","",1,"action",3,"click"],[1,"parameters"],[1,"title"],["mat-icon-button","","matTooltip","Edit parameters",3,"click"],["mat-icon-button","","matTooltip","Query Params Docs",3,"click"],[1,"values"],[4,"ngFor","ngForOf"],["class","warnings",4,"ngIf"],["class","description",4,"ngIf"],[1,"warnings"],[2,"color","red"],[1,"description"]],template:function(e,t){1&e&&y.Mc(0,F,31,4,"div",0),2&e&&y.qc("ngIf",t.queryDef)},directives:[i.t,o.b,r.a,a.a,i.s],styles:[".wrapper[_ngcontent-%COMP%]{padding:24px}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-bottom:32px}.actions[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:8px}.description[_ngcontent-%COMP%], .parameters[_ngcontent-%COMP%], .warnings[_ngcontent-%COMP%]{margin:16px 0}.description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .parameters[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .warnings[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{height:40px;display:flex;align-items:center;justify-content:space-between;font-size:14px}.description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .parameters[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .warnings[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.parameters[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%], .warnings[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]{margin:0;padding-left:16px}.parameters[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .warnings[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1px 0}"],changeDetection:0}),e}();function j(e,t){var n,i,a=Object(f.a)(e).filter((function(e){return e.Difficulty<=t&&null==e.allowNew}));a.sort((function(e,t){return e.Name.toLocaleLowerCase().localeCompare(t.Name.toLocaleLowerCase())}));var r={};try{for(var o=Object(S.i)(a),c=o.next();!c.done;c=o.next()){var s=c.value,u=s.PrimaryType;r[u]?r[u].push(s):r[u]=[s]}}catch(l){n={error:l}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r}function z(e,t){if(1&e){var n=y.Xb();y.Wb(0,"div",8),y.ec("click",(function(){y.Dc(n);var e=t.$implicit;return y.ic(4).addDataSource(e)})),y.Oc(1),y.Vb()}if(2&e){var i=t.$implicit;y.qc("matTooltip",i.Name),y.Bb(1),y.Qc(" ",i.Name," ")}}function $(e,t){if(1&e&&(y.Wb(0,"div",6),y.Mc(1,z,2,2,"div",7),y.Vb()),2&e){var n=y.ic().$implicit;y.Bb(1),y.qc("ngForOf",n.value)}}function U(e,t){if(1&e){var n=y.Xb();y.Ub(0),y.Wb(1,"div",4),y.ec("click",(function(){y.Dc(n);var e=t.$implicit;return y.ic(2).toggleItem(e.key)})),y.Wb(2,"mat-icon"),y.Oc(3),y.Vb(),y.Wb(4,"span"),y.Oc(5),y.Vb(),y.Vb(),y.Mc(6,$,2,1,"div",5),y.Tb()}if(2&e){var i=t.$implicit,a=y.ic(2);y.Bb(1),y.qc("matTooltip",i.key),y.Bb(2),y.Pc(a.toggledItems.includes(i.key)?"keyboard_arrow_down":"keyboard_arrow_right"),y.Bb(2),y.Pc(i.key),y.Bb(1),y.qc("ngIf",a.toggledItems.includes(i.key))}}function X(e,t){if(1&e){var n=y.Xb();y.Wb(0,"div",1),y.Wb(1,"mat-slide-toggle",2),y.ec("change",(function(e){return y.Dc(n),y.ic().onDifficultyChanged(e)})),y.Oc(2," Show Advanced "),y.Vb(),y.Mc(3,U,7,4,"ng-container",3),y.jc(4,"keyvalue"),y.Vb()}if(2&e){var i=y.ic();y.Bb(3),y.qc("ngForOf",y.kc(4,1,i.sorted))}}var H=function(){function e(){this.addSelectedDataSource=new y.n,this.difficulty={default:100,advanced:200},this.activeDiff=this.difficulty.default,this.toggledItems=[]}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){var t;(null===(t=e.dataSources)||void 0===t?void 0:t.currentValue)&&(this.sorted=j(this.dataSources,this.activeDiff))},e.prototype.onDifficultyChanged=function(e){this.activeDiff=e.checked?this.difficulty.advanced:this.difficulty.default,this.sorted=j(this.dataSources,this.activeDiff)},e.prototype.addDataSource=function(e){this.addSelectedDataSource.emit(e)},e.prototype.toggleItem=function(e){!function(e,t){var n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1)}(e,this.toggledItems)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=y.Kb({type:e,selectors:[["app-add-explorer"]],inputs:{dataSources:"dataSources"},outputs:{addSelectedDataSource:"addSelectedDataSource"},features:[y.zb],decls:1,vars:1,consts:[["class","editor-active-explorer editor-fancy-scrollbar",4,"ngIf"],[1,"editor-active-explorer","editor-fancy-scrollbar"],["labelPosition","before",3,"change"],[4,"ngFor","ngForOf"],["matTooltipShowDelay","750",1,"collapsible",3,"matTooltip","click"],["class","list",4,"ngIf"],[1,"list"],["class","list-item","matTooltipShowDelay","750",3,"matTooltip","click",4,"ngFor","ngForOf"],["matTooltipShowDelay","750",1,"list-item",3,"matTooltip","click"]],template:function(e,t){1&e&&y.Mc(0,X,5,3,"div",0),2&e&&y.qc("ngIf",t.dataSources)},directives:[i.t,c.a,i.s,r.a,a.a],pipes:[i.l],styles:[".mat-slide-toggle[_ngcontent-%COMP%]{margin:6px}.collapsible[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:3px 0}.collapsible[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 24px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}"]}),e}(),K=n("h8mv"),J=["dataSourceElement"];function Y(e,t){if(1&e){var n=y.Xb();y.Wb(0,"div",14),y.ec("click",(function(){y.Dc(n);var e=y.ic().$implicit;return y.ic(2).configureDataSource(e)})),y.Wb(1,"mat-icon",15),y.Oc(2,"settings"),y.Vb(),y.Vb()}}function Z(e,t){1&e&&(y.Wb(0,"div",16),y.Wb(1,"mat-icon",17),y.Oc(2,"arrow_drop_up"),y.Vb(),y.Vb())}function ee(e,t){if(1&e){var n=y.Xb();y.Wb(0,"mat-icon",18),y.ec("click",(function(){y.Dc(n);var e=y.ic().index;return y.ic(2).remove(e)})),y.Oc(1," delete "),y.Vb()}}function te(e,t){if(1&e&&(y.Wb(0,"a",19),y.Wb(1,"mat-icon"),y.Oc(2,"help_outline"),y.Vb(),y.Vb()),2&e){var n=y.ic().$implicit,i=y.ic(2);y.rc("href",i.typeInfo(n).helpLink,y.Gc)}}var ne=function(e,t,n){return{top:e,left:t,"min-width":n}};function ie(e,t){if(1&e){var n=y.Xb();y.Wb(0,"div",3,4),y.Mc(2,Y,3,0,"div",5),y.Wb(3,"mat-icon",6),y.Oc(4),y.Vb(),y.Wb(5,"div",7),y.ec("click",(function(){y.Dc(n);var e=t.$implicit;return y.ic(2).editName(e)})),y.Oc(6),y.Wb(7,"mat-icon",8),y.Oc(8,"edit "),y.Vb(),y.Vb(),y.Rb(9,"br"),y.Wb(10,"div",9),y.ec("click",(function(){y.Dc(n);var e=t.$implicit;return y.ic(2).editDescription(e)})),y.Oc(11),y.Wb(12,"mat-icon",8),y.Oc(13,"edit"),y.Vb(),y.Vb(),y.Rb(14,"br"),y.Wb(15,"div",10),y.Oc(16),y.Vb(),y.Mc(17,Z,3,0,"div",11),y.Mc(18,ee,2,0,"mat-icon",12),y.Mc(19,te,3,1,"a",13),y.Vb()}if(2&e){var i=t.$implicit,a=y.ic(2);y.sc("id","dataSource_",i.EntityGuid,""),y.qc("ngStyle",y.xc(13,ne,i.VisualDesignerData.Top+"px",i.VisualDesignerData.Left+"px",i.VisualDesignerData.Width?i.VisualDesignerData.Width+"px":null)),y.Cb("guid",i.EntityGuid),y.Bb(2),y.qc("ngIf",!i.ReadOnly&&a.typeInfo(i).config),y.Bb(1),y.rc("title",a.typeInfo(i).notes),y.Bb(1),y.Pc(a.typeInfo(i).icon),y.Bb(2),y.Qc(" ",i.Name||"(no name)",""),y.Bb(5),y.Qc(" ",i.Description,""),y.Bb(4),y.rc("title",i.PartAssemblyAndType),y.Bb(1),y.Qc(" Type: ",a.typeNameFilter(i.PartAssemblyAndType,"className")," "),y.Bb(1),y.qc("ngIf",!i.ReadOnly&&a.typeInfo(i).dynamicOut),y.Bb(1),y.qc("ngIf",!i.ReadOnly),y.Bb(1),y.qc("ngIf",a.typeInfo(i).helpLink)}}function ae(e,t){if(1&e&&(y.Wb(0,"div",1),y.Mc(1,ie,20,17,"div",2),y.Vb()),2&e){var n=y.ic();y.Bb(1),y.qc("ngForOf",n.queryDef.data.DataSources)}}var re=function(){function e(e,t){this.queryDefinitionService=e,this.plumbGuiService=t,this.save=new y.n,this.editDataSourcePart=new y.n,this.instanceChanged=new y.n}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var e=this;jsPlumb.ready((function(){e.jsPlumbReady()})),this.dataSourceElements.changes.subscribe((function(t){e.instance.reset(),e.plumbGuiService.connectionsInitialized=!1,jsPlumb.ready((function(){e.jsPlumbReady()}))}))},e.prototype.jsPlumbReady=function(){var e=this;this.instance=this.plumbGuiService.buildInstance(this.queryDef),this.instanceChanged.emit(this.instance),this.plumbGuiService.connectionsInitialized||(this.dataSourceElements.forEach((function(t){var n=e.plumbGuiService.findDataSourceOfElement(t.nativeElement,e.queryDef);e.makeDataSource(n,t.nativeElement)})),this.instance.batch((function(){e.plumbGuiService.initWirings(e.queryDef,e.instance)})),this.instance.repaintEverything(),this.plumbGuiService.connectionsInitialized=!0)},e.prototype.makeDataSource=function(e,t){var n=this;this.plumbGuiService.makeSource(e,t,(function(e){n.dataSourceDrag(e)}),this.queryDef,this.instance),this.queryDef.dsCount++},e.prototype.dataSourceDrag=function(e){var t=this.getElementOffset(e.el),n=this.plumbGuiService.findDataSourceOfElement(e.el,this.queryDef);n.VisualDesignerData.Top=Math.round(t.top),n.VisualDesignerData.Left=Math.round(t.left)},e.prototype.configureDataSource=function(e){e.ReadOnly||(this.queryDefinitionService.dataSourceIsPersisted(e)?this.editDataSourcePart.emit(e):this.save.emit())},e.prototype.typeInfo=function(e){return this.queryDefinitionService.dsTypeInfo(e,this.queryDef)},e.prototype.typeNameFilter=function(e,t){return this.queryDefinitionService.typeNameFilter(e,t)},e.prototype.remove=function(e){var t=this.queryDef.data.DataSources[e];confirm("Delete DataSource "+(t.Name||"(unnamed)")+"?")&&(this.instance.selectEndpoints({element:"dataSource_"+t.EntityGuid}).remove(),this.queryDef.data.DataSources.splice(e,1))},e.prototype.editName=function(e){if(!e.ReadOnly){var t=prompt("Rename DataSource",e.Name);t&&t.trim()&&(e.Name=t.trim())}},e.prototype.editDescription=function(e){if(!e.ReadOnly){var t=prompt("Edit Description",e.Description);t&&t.trim()&&(e.Description=t.trim())}},e.prototype.getElementOffset=function(e){var t=document.documentElement,n=e.getBoundingClientRect();return{top:n.top+window.pageYOffset-t.clientTop,left:n.left+window.pageXOffset-t.clientLeft}},e.\u0275fac=function(t){return new(t||e)(y.Qb(w),y.Qb(B))},e.\u0275cmp=y.Kb({type:e,selectors:[["app-plumb-editor"]],viewQuery:function(e,t){var n;1&e&&y.Uc(J,!0),2&e&&y.Ac(n=y.fc())&&(t.dataSourceElements=n)},inputs:{queryDef:"queryDef"},outputs:{save:"save",editDataSourcePart:"editDataSourcePart",instanceChanged:"instanceChanged"},decls:1,vars:1,consts:[["id","pipelineContainer",4,"ngIf"],["id","pipelineContainer"],["datasource","","class","dataSource",3,"id","ngStyle",4,"ngFor","ngForOf"],["datasource","",1,"dataSource",3,"id","ngStyle"],["dataSourceElement",""],["class","configure","appMousedownStopPropagation","","title","Configure this DataSource",3,"click",4,"ngIf"],[1,"type-info",3,"title"],["title","Click to edit the Name","appMousedownStopPropagation","",1,"name","noselect",3,"click"],[1,"show-hover-inline","eav-icon-pencil"],["title","Click to edit the Description","appMousedownStopPropagation","",1,"description","noselect",3,"click"],[1,"typename",3,"title"],["class","add-endpoint","title","Drag a new Out-Connection from here",4,"ngIf"],["class","delete eav-icon-cancel","title","delete this","appMousedownStopPropagation","",3,"click",4,"ngIf"],["class","help eav-icon-help-circled","title","help for this data source","target","_blank",3,"href",4,"ngIf"],["appMousedownStopPropagation","","title","Configure this DataSource",1,"configure",3,"click"],[1,"eav-icon-settings"],["title","Drag a new Out-Connection from here",1,"add-endpoint"],[1,"new-connection","eav-icon-up-dir"],["title","delete this","appMousedownStopPropagation","",1,"delete","eav-icon-cancel",3,"click"],["title","help for this data source","target","_blank",1,"help","eav-icon-help-circled",3,"href"]],template:function(e,t){1&e&&y.Mc(0,ae,2,1,"div",0),2&e&&y.qc("ngIf",t.queryDef.data.DataSources)},directives:[i.t,i.s,i.w,a.a,K.a],styles:["","[_nghost-%COMP%] {display: block; width: 100%; height: 100%}"],changeDetection:0}),e}();function oe(e,t){if(1&e){var n=y.Xb();y.Wb(0,"app-run-explorer",9),y.ec("editPipelineEntity",(function(){return y.Dc(n),y.ic().editPipelineEntity()}))("saveAndRun",(function(e){return y.Dc(n),y.ic().saveAndRun(e)}))("repaint",(function(){return y.Dc(n),y.ic().repaint()})),y.Vb()}if(2&e){var i=y.ic();y.qc("hidden",i.activeExplorer!==i.explorer.run)("queryDef",i.queryDef)}}function ce(e,t){if(1&e){var n=y.Xb();y.Wb(0,"app-add-explorer",10),y.ec("addSelectedDataSource",(function(e){return y.Dc(n),y.ic().addSelectedDataSource(e)})),y.Vb()}if(2&e){var i=y.ic();y.qc("hidden",i.activeExplorer!==i.explorer.add)("dataSources",i.queryDef.data.InstalledDataSources)}}function se(e,t){if(1&e){var n=y.Xb();y.Wb(0,"app-plumb-editor",11),y.ec("save",(function(){return y.Dc(n),y.ic().savePipeline()}))("editDataSourcePart",(function(e){return y.Dc(n),y.ic().editDataSourcePart(e)}))("instanceChanged",(function(e){return y.Dc(n),y.ic().instanceChanged(e)})),y.Vb()}if(2&e){var i=y.ic();y.qc("queryDef",i.queryDef)}}var ue=function(e){return{active:e}},le=[{path:"",component:function(){function e(e,t,n,i,a,r,o,c,s,u,l,p){this.context=e,this.router=t,this.route=n,this.queryDefinitionService=i,this.titleService=a,this.snackBar=r,this.metadataService=o,this.contentTypesService=c,this.plumbGuiService=s,this.zone=u,this.dialog=l,this.viewContainerRef=p,this.explorer={run:"run",add:"add"},this.activeExplorer=this.explorer.run,this.subscription=new d.a,this.context.init(this.route),this.hasChild=!!this.route.snapshot.firstChild;var f=this.route.snapshot.paramMap.get("pipelineId");this.pipelineId=parseInt(f,10)}return e.prototype.ngOnInit=function(){this.loadQuery(),this.attachListeners(),this.refreshOnChildClosed()},e.prototype.ngOnDestroy=function(){this.detachListeners(),this.subscription.unsubscribe(),this.subscription=null},e.prototype.toggleExplorer=function(e){this.activeExplorer=this.activeExplorer===e?null:e},e.prototype.openHelp=function(){window.open("http://2sxc.org/help","_blank")},e.prototype.instanceChanged=function(e){this.instance=e},e.prototype.savePipeline=function(e){var t=this;this.snackBar.open("Saving..."),this.detachListeners(),this.queryDef.readOnly=!0,this.plumbGuiService.pushPlumbConfigToQueryDef(this.instance,this.queryDef),this.queryDefinitionService.save(this.queryDef).subscribe({next:function(n){t.snackBar.open("Saved",null,{duration:2e3});var i=Object(f.a)(t.queryDef);i.data.Pipeline=n.Pipeline,i.data.TestParameters=n.TestParameters,i.id=n.Pipeline.EntityId,t.router.navigateByUrl(t.router.url.replace("pipelineId",n.Pipeline.EntityId)),i.readOnly=!n.Pipeline.AllowEdit,i.data.DataSources=n.DataSources,t.queryDefinitionService.postProcessDataSources(i.data),t.queryDef=i,t.attachListeners(),e&&e()},error:function(e){t.snackBar.open("Save Pipeline failed",null,{duration:2e3}),t.queryDef.readOnly=!1,t.attachListeners()}})},e.prototype.editDataSourcePart=function(e){var t=this,n=this.queryDef.data.InstalledDataSources.find((function(t){return t.PartAssemblyAndType===e.PartAssemblyAndType})),i=n&&n.ContentType?n.ContentType:"|Config "+this.queryDefinitionService.typeNameFilter(e.PartAssemblyAndType,"classFullName"),a=e.EntityGuid;this.metadataService.getMetadata(b.a.metadata.entity.type,b.a.keyTypes.guid,a,i).subscribe((function(e){if(e.length){var n={items:[{EntityId:e[0].Id.toString()}]};t.router.navigate(["edit/"+JSON.stringify(n)],{relativeTo:t.route})}else t.contentTypesService.getDetails(i,{ignoreErrors:!0}).subscribe({next:function(e){t.router.navigate(["edit/"+JSON.stringify({items:[{ContentTypeName:i,For:{Target:b.a.metadata.entity.target,Guid:a}}]})],{relativeTo:t.route})},error:function(){alert("Server reports error - this usually means that this data-source doesn't have any configuration")}})}))},e.prototype.addSelectedDataSource=function(e){this.queryDefinitionService.addDataSource(this.queryDef,e.PartAssemblyAndType,null,null,e.Name),this.savePipeline()},e.prototype.editPipelineEntity=function(){var e=this;this.savePipeline((function(){e.detachListeners();var t={items:[{EntityId:e.queryDef.id.toString()}]};e.router.navigate(["edit/"+JSON.stringify(t)],{relativeTo:e.route})}))},e.prototype.repaint=function(){this.instance.repaintEverything()},e.prototype.saveAndRun=function(e){var t=this,n=e.save,i=e.run;n&&i?this.savePipeline((function(){t.runQuery()})):n?this.savePipeline():i&&this.runQuery()},e.prototype.runQuery=function(){var e=this;this.snackBar.open("Running query..."),this.queryDefinitionService.queryPipeline(this.queryDef.id).subscribe({next:function(t){e.snackBar.open("Query worked",null,{duration:2e3}),e.dialog.open(D,{data:{testParameters:e.queryDef.data.Pipeline.TestParameters,result:t},backdropClass:"dialog-backdrop",panelClass:["dialog-panel","dialog-panel-medium","no-scrollbar"],viewContainerRef:e.viewContainerRef,autoFocus:!1,closeOnNavigation:!1,position:{top:"0"}}),console.warn(t),setTimeout((function(){e.plumbGuiService.putEntityCountOnConnection(t,e.queryDef,e.instance)}),0)},error:function(t){e.snackBar.open("Query failed",null,{duration:2e3})}})},e.prototype.loadQuery=function(){var e=this;this.queryDefinitionService.loadQuery(this.pipelineId).then((function(t){e.queryDef=t,e.titleService.setTitle(e.queryDef.data.Pipeline.Name+" - Visual Query")}))},e.prototype.attachListeners=function(){var e=this;this.zone.runOutsideAngular((function(){var t=e.keyboardSave.bind(e);window.addEventListener("keydown",t),e.eventListeners=[],e.eventListeners.push({element:window,type:"keydown",listener:t})}))},e.prototype.detachListeners=function(){var e=this;this.zone.runOutsideAngular((function(){e.eventListeners.forEach((function(e){e.element.removeEventListener(e.type,e.listener)})),e.eventListeners=null}))},e.prototype.keyboardSave=function(e){var t=this;83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&(e.preventDefault(),this.zone.run((function(){t.savePipeline()})))},e.prototype.refreshOnChildClosed=function(){var e=this;this.subscription.add(this.router.events.pipe(Object(p.a)((function(e){return e instanceof l.b}))).subscribe((function(t){var n=e.hasChild;e.hasChild=!!e.route.snapshot.firstChild,!e.hasChild&&n&&e.loadQuery()})))},e.\u0275fac=function(t){return new(t||e)(y.Qb(O.a),y.Qb(l.c),y.Qb(l.a),y.Qb(w),y.Qb(V.d),y.Qb(s.b),y.Qb(W.a),y.Qb(E.a),y.Qb(B),y.Qb(y.z),y.Qb(u.b),y.Qb(y.O))},e.\u0275cmp=y.Kb({type:e,selectors:[["app-visual-query"]],decls:16,vars:9,consts:[[1,"editor-root"],[1,"editor-side-toolbar"],["matTooltip","Run",1,"button",3,"ngClass","click"],["matTooltip","Add",1,"button",3,"ngClass","click"],[1,"spacer"],["matTooltip","Help",1,"button",3,"click"],[3,"hidden","queryDef","editPipelineEntity","saveAndRun","repaint",4,"ngIf"],[3,"hidden","dataSources","addSelectedDataSource",4,"ngIf"],[3,"queryDef","save","editDataSourcePart","instanceChanged",4,"ngIf"],[3,"hidden","queryDef","editPipelineEntity","saveAndRun","repaint"],[3,"hidden","dataSources","addSelectedDataSource"],[3,"queryDef","save","editDataSourcePart","instanceChanged"]],template:function(e,t){1&e&&(y.Wb(0,"div",0),y.Wb(1,"div",1),y.Wb(2,"div",2),y.ec("click",(function(){return t.toggleExplorer(t.explorer.run)})),y.Wb(3,"mat-icon"),y.Oc(4,"play_arrow"),y.Vb(),y.Vb(),y.Wb(5,"div",3),y.ec("click",(function(){return t.toggleExplorer(t.explorer.add)})),y.Wb(6,"mat-icon"),y.Oc(7,"add"),y.Vb(),y.Vb(),y.Rb(8,"div",4),y.Wb(9,"div",5),y.ec("click",(function(){return t.openHelp()})),y.Wb(10,"mat-icon"),y.Oc(11,"help_outline"),y.Vb(),y.Vb(),y.Rb(12,"router-outlet"),y.Vb(),y.Mc(13,oe,1,2,"app-run-explorer",6),y.Mc(14,ce,1,2,"app-add-explorer",7),y.Mc(15,se,1,1,"app-plumb-editor",8),y.Vb()),2&e&&(y.Bb(2),y.qc("ngClass",y.vc(5,ue,t.activeExplorer===t.explorer.run)),y.Bb(3),y.qc("ngClass",y.vc(7,ue,t.activeExplorer===t.explorer.add)),y.Bb(8),y.qc("ngIf",t.queryDef),y.Bb(1),y.qc("ngIf",t.queryDef),y.Bb(1),y.qc("ngIf",t.queryDef))},directives:[r.a,i.q,a.a,l.h,i.t,G,H,re],styles:[".editor-side-toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:column}.editor-side-toolbar[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex-grow:1}"]}),e}(),children:[{matcher:n("it7M").a,loadChildren:function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(7),n.e(8),n.e(10),n.e(9),n.e(11),n.e(0),n.e(27)]).then(n.bind(null,"B+J5")).then((function(e){return e.EditModule}))}}]}],de=function(){function e(){}return e.\u0275mod=y.Ob({type:e}),e.\u0275inj=y.Nb({factory:function(t){return new(t||e)},imports:[[l.g.forChild(le)],l.g]}),e}(),pe=n("O6Xb");n.d(t,"VisualQueryModule",(function(){return fe}));var fe=function(){function e(){}return e.\u0275mod=y.Ob({type:e}),e.\u0275inj=y.Nb({factory:function(t){return new(t||e)},providers:[O.a,w,B,W.a,E.a],imports:[[i.c,pe.a,de,a.b,r.b,o.c,c.b,s.d,u.g]]}),e}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.01.00/ng-edit/visual-query-visual-query-module.d2bc63b337fb0efb3e96.js.map