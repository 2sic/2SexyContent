(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{H0VJ:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("d3IL"),o=n("1C3z"),r=n("Iv+g"),a=function(){function t(t){this.context=t}return t.prototype.openCode=function(t){var e=sessionStorage.getItem(i.u),n=new URL(e),o=n.origin+n.pathname+n.search,r=this.buildHashParam(i.y,this.context.zoneId.toString()).replace("&","#")+this.buildHashParam(i.a,this.context.appId.toString())+this.buildHashParam(i.t,this.context.tabId.toString())+this.buildHashParam(i.n,this.context.moduleId.toString())+this.buildHashParam(i.c,this.context.contentBlockId.toString())+this.buildHashParam(i.j)+this.buildHashParam(i.k)+this.buildHashParam(i.l)+this.buildHashParam(i.q)+this.buildHashParam(i.x)+this.buildHashParam(i.o)+this.buildHashParam(i.v)+this.buildHashParam(i.w)+this.buildHashParam(i.b)+this.buildHashParam(i.g)+this.buildHashParam(i.s)+this.buildHashParam(i.f,"develop")+this.buildHashParam(i.i,JSON.stringify(t.items))+(sessionStorage.getItem(i.e)?this.buildHashParam(i.e):"")+"";window.open(o+r,"_blank")},t.prototype.openQueryDesigner=function(t,e){var n=sessionStorage.getItem(i.u),o=new URL(n),r=o.origin+o.pathname+o.search,a=this.buildHashParam(i.y,this.context.zoneId.toString()).replace("&","#")+this.buildHashParam(i.a,this.context.appId.toString())+this.buildHashParam(i.t,this.context.tabId.toString())+this.buildHashParam(i.n,this.context.moduleId.toString())+this.buildHashParam(i.c,this.context.contentBlockId.toString())+this.buildHashParam(i.j)+this.buildHashParam(i.k)+this.buildHashParam(i.l)+this.buildHashParam(i.q)+this.buildHashParam(i.x)+this.buildHashParam(i.o)+this.buildHashParam(i.v)+this.buildHashParam(i.w)+this.buildHashParam(i.b)+this.buildHashParam(i.g)+this.buildHashParam(i.s)+this.buildHashParam(i.f,"pipeline-designer")+this.buildHashParam(i.p,e.toString())+this.buildHashParam(i.i,JSON.stringify(t.items))+(sessionStorage.getItem(i.e)?this.buildHashParam(i.e):"")+"";window.open(r+a,"_blank")},t.prototype.buildHashParam=function(t,e){var n=t.replace(i.z,""),o=void 0!==e?e:sessionStorage.getItem(t);return"&"+n+"="+encodeURIComponent(o)},t.\u0275fac=function(e){return new(e||t)(o.ac(r.a))},t.\u0275prov=o.Mb({token:t,factory:t.\u0275fac}),t}()},iluC:function(t,e,n){"use strict";n.r(e);var i=n("8AiQ"),o=n("ZSGP"),r=n("BLjT"),a=n("9HSk"),s=n("r4gC"),c=n("Qc/f"),l=n("2pW/"),p=n("LuBX"),u=n("OeRG"),d=n("5/c3"),h=n("d3IL"),f=n("1C3z"),g=n("Iv+g"),b=n("Jg5f"),v=n("t5c9"),m=n("dkRO"),y=function(){function t(t,e,n){this.http=t,this.context=e,this.dnnContext=n}return t.prototype.get=function(t){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("app-sys/appassets/asset"),{params:this.calcParams(t)}).pipe(Object(b.a)((function(t){if("auto"===t.Type.toLowerCase())switch(t.Extension.toLowerCase()){case".cs":case".cshtml":t.Type="Razor";break;case".html":case".css":case".js":t.Type="Token"}return t})))},t.prototype.save=function(t,e){return this.http.post(this.dnnContext.$2sxc.http.apiUrl("app-sys/appassets/asset"),e,{params:this.calcParams(t)})},t.prototype.getTemplates=function(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("app-sys/appassets/list"),{params:{appId:this.context.appId.toString(),global:"false",withSubfolders:"true"}})},t.prototype.calcParams=function(t){return"number"==typeof t?{templateId:t.toString()}:{path:t}},t.\u0275fac=function(e){return new(e||t)(f.ac(v.b),f.ac(g.a),f.ac(m.a))},t.\u0275prov=f.Mb({token:t,factory:t.\u0275fac}),t}(),x=n("D57K"),w=n("9RHM"),C=function(){function t(t,e){this.http=t,this.dnnContext=e,this.keyPrefixes=["@","["],this.keyPrefixIndex=function(t){return t.Type.indexOf("Razor")>-1?0:1}}return t.prototype.getSnippets=function(t){return Object(x.b)(this,void 0,void 0,(function(){var e,n,i;return Object(x.e)(this,(function(o){switch(o.label){case 0:return[4,this.http.get("../sxc-develop/snippets.json.js").toPromise()];case 1:return e=o.sent(),n=this.filterAwayNotNeededSnippetsList(e.snippets,t),i=this.extractInputTypeSnippets(n),[2,{sets:this.initSnippetsWithConfig(i.standardArray,t,i.inputTypeSnippets),list:i.standardArray}]}}))}))},t.prototype.filterAwayNotNeededSnippetsList=function(t,e){var n,i,o=[];try{for(var r=Object(x.i)(t),a=r.next();!a.done;a=r.next()){var s=a.value,c=this.keyPrefixes.indexOf(s.set[0]);-1!==c&&c!==this.keyPrefixIndex(e)||(c===this.keyPrefixIndex(e)&&(s.set=s.set.substr(1)),o.push(s))}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return o},t.prototype.extractInputTypeSnippets=function(t){var e,n,i=[],o=[];try{for(var r=Object(x.i)(t),a=r.next();!a.done;a=r.next()){var s=a.value;"\\"===s.set[0]?(s.set=s.set.substr(1),o.push(s)):i.push(s)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{standardArray:i,inputTypeSnippets:this.catalogInputTypeSnippets(o)}},t.prototype.catalogInputTypeSnippets=function(t){var e,n,i={};try{for(var o=Object(x.i)(t),r=o.next();!r.done;r=o.next()){var a=r.value;void 0===i[a.subset]&&(i[a.subset]=[]),i[a.subset].push(a)}}catch(s){e={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},t.prototype.initSnippetsWithConfig=function(t,e,n){return(t=this.makeTree(t)).Content=Object.assign({},t.Content,{Fields:{},PresentationFields:{}}),e.TypeContent&&this.loadContentType(t.Content.Fields,e.TypeContent,"Content",e,n),e.TypeContentPresentation&&this.loadContentType(t.Content.PresentationFields,e.TypeContentPresentation,"Content.Presentation",e,n),e.HasList?(t.List=Object.assign({},t.List,{Fields:{},PresentationFields:{}}),e.TypeList&&this.loadContentType(t.List.Fields,e.TypeList,"ListContent",e,n),e.TypeListPresentation&&this.loadContentType(t.List.PresentationFields,e.TypeListPresentation,"ListContent.Presentation",e,n)):delete t.List,e.HasApp&&(t.App.Resources={},t.App.Settings={},this.loadContentType(t.App.Resources,"App-Resources","App.Resources",e,n),this.loadContentType(t.App.Settings,"App-Settings","App.Settings",e,n)),t},t.prototype.makeTree=function(t){var e,n,i={};try{for(var o=Object(x.i)(t),r=o.next();!r.done;r=o.next()){var a=r.value;void 0===i[a.set]&&(i[a.set]={}),void 0===i[a.set][a.subset]&&(i[a.set][a.subset]=[]);var s={key:a.name,label:this.label(a.set,a.subset,a.name),snip:a.content,help:a.help||this.help(a.set,a.subset,a.name),links:this.linksList(a.links)};i[a.set][a.subset].push(s)}}catch(c){e={error:c}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},t.prototype.label=function(t,e,n){var i=this.getHelpKey(t,e,n,".Key"),o=i;return o===i&&(o=n),o},t.prototype.getHelpKey=function(t,e,n,i){return"SourceEditorSnippets."+t+"."+e+"."+n+i},t.prototype.help=function(t,e,n){var i=this.getHelpKey(t,e,n,".Help"),o=i;return o===i&&(o=""),o},t.prototype.linksList=function(t){var e,n;if(!t)return null;var i=[],o=t.split("\n");try{for(var r=Object(x.i)(o),a=r.next();!a.done;a=r.next()){var s=a.value.split(":");3===s.length&&i.push({name:s[0].trim(),url:s[1].trim()+":"+s[2].trim()})}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return 0===i.length?null:i},t.prototype.loadContentType=function(t,e,n,i,o){var r=this;this.getFields(i.AppId,e).then((function(e){var a,s;try{for(var c=Object(x.i)(e),l=c.next();!l.done;l=c.next()){var p=l.value,u=p.StaticName;t[u]={key:u,label:u,snip:r.valuePlaceholder(n,u,i),help:p.Metadata.merged.Notes||" ("+p.Type.toLowerCase()+") "};var d=Object(w.a)(t[u]);r.attachSnippets(t,n,u,p.InputType,d,o)}}catch(g){a={error:g}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}var h=["EntityId","EntityTitle","EntityGuid","EntityType","IsPublished","Modified"];if(e.length)for(var f=0;f<h.length;f++)t[h[f]]={key:h[f],label:h[f],snip:r.valuePlaceholder(n,h[f],i),help:"SourceEditorSnippets.StandardFields."+h[f]+".Help"}}))},t.prototype.valuePlaceholder=function(t,e,n){return n.Type.indexOf("Razor")>-1?"@"+t+"."+e:"["+t.replace(".",":")+":"+e+"]"},t.prototype.getFields=function(t,e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("eav/contenttype/getfields"),{params:{appid:t.toString(),staticName:e}}).toPromise().then((function(t){var e,n;if(t)try{for(var i=Object(x.i)(t),o=i.next();!o.done;o=i.next()){var r=o.value;if(r.Metadata){var a=r.Metadata,s=a.All,c=a[r.Type],l=a[r.InputType];a.merged=Object(x.a)(Object(x.a)(Object(x.a)({},s),c),l)}}}catch(p){e={error:p}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return t}))},t.prototype.attachSnippets=function(t,e,n,i,o,r){var a=r[i];if(i.indexOf("-")){var s=i.substr(0,i.indexOf("-"));if(s){var c=r[s];c&&(a=a?a.concat(c):c)}}if(a){void 0===t[n].more&&(t[n].more=[]);for(var l=t[n].more,p=0;p<a.length;p++)try{l[n+"-"+a[p].name]=Object.assign({},o,{key:n+" - "+a[p].name,label:a[p].name,snip:this.localizeGenericSnippet(a[p].content,e,n),collapse:!0})}finally{}}},t.prototype.localizeGenericSnippet=function(t,e,n){return t.replace(/(\$\{[0-9]+\:)var(\})/gi,"$1"+e+"$2").replace(/(\$\{[0-9]+\:)prop(\})/gi,"$1"+n+"$2")},t.\u0275fac=function(e){return new(e||t)(f.ac(v.b),f.ac(m.a))},t.\u0275prov=f.Mb({token:t,factory:t.\u0275fac}),t}(),P=n("Ata6");function S(t,e){var n,i;if(!t||!e)return[];var o=[],r=t.split("/"),a=e,s=function(t){var e=a.find((function(e){return e.name===t}));return e?(o.push(e),e.children?void(a=e.children):"break"):"break"};try{for(var c=Object(x.i)(r),l=c.next();!l.done&&"break"!==s(l.value);l=c.next());}catch(p){n={error:p}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return o}var O=n("H0VJ");function k(t,e){1&t&&f.Sb(0)}var T=function(t){return{item:t}};function I(t,e){if(1&t&&(f.Ub(0),f.Nc(1,k,1,0,"ng-container",3),f.Tb()),2&t){var n=e.$implicit;f.ic();var i=f.Cc(3);f.Bb(1),f.qc("ngTemplateOutlet",i)("ngTemplateOutletContext",f.vc(2,T,n))}}var V=function(t){return{active:t}};function _(t,e){if(1&t){var n=f.Xb();f.Wb(0,"div",7),f.ec("click",(function(){f.Ec(n);var t=f.ic().item;return f.ic().openTemplate(t.pathFromRoot)})),f.Pc(1),f.Vb()}if(2&t){var i=f.ic().item,o=f.ic();f.qc("ngClass",f.vc(3,V,o.toggledItems.includes(i)))("matTooltip",i.name),f.Bb(1),f.Rc(" ",i.name," ")}}function M(t,e){if(1&t){var n=f.Xb();f.Wb(0,"div",8),f.ec("click",(function(){f.Ec(n);var t=f.ic().item;return f.ic().toggleItem(t)})),f.Wb(1,"mat-icon"),f.Pc(2),f.Vb(),f.Wb(3,"span"),f.Pc(4),f.Vb(),f.Vb()}if(2&t){var i=f.ic().item,o=f.ic();f.qc("matTooltip",i.name),f.Bb(2),f.Qc(o.toggledItems.includes(i)?"keyboard_arrow_down":"keyboard_arrow_right"),f.Bb(2),f.Qc(i.name)}}function H(t,e){1&t&&f.Sb(0)}function z(t,e){if(1&t&&(f.Wb(0,"div",10),f.Nc(1,H,1,0,"ng-container",3),f.Vb()),2&t){var n=e.$implicit;f.ic(3);var i=f.Cc(3);f.Bb(1),f.qc("ngTemplateOutlet",i)("ngTemplateOutletContext",f.vc(2,T,n))}}function j(t,e){if(1&t&&(f.Ub(0),f.Nc(1,z,2,4,"div",9),f.Tb()),2&t){var n=f.ic().item;f.Bb(1),f.qc("ngForOf",n.children)}}function B(t,e){if(1&t&&(f.Nc(0,_,2,5,"div",4),f.Nc(1,M,5,3,"div",5),f.Nc(2,j,2,1,"ng-container",6)),2&t){var n=e.item,i=f.ic();f.qc("ngIf",!n.children),f.Bb(1),f.qc("ngIf",n.children),f.Bb(1),f.qc("ngIf",i.toggledItems.includes(n))}}var L=function(){function t(t){this.dialogService=t,this.toggledItems=[]}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(t){var e,n,i,o;(null===(e=t.templates)||void 0===e?void 0:e.currentValue)&&(this.tree=function(t){var e,n,i,o;if(!t)return[];var r=[];try{for(var a=Object(x.i)(t),s=a.next();!s.done;s=a.next()){var c=s.value,l=r,p=c.split("/"),u=p[p.length-1],d=function(t){var e=l.find((function(e){return e.name===t}));if(e)l=e.children;else{var n={name:t,children:t!==u?[]:null,pathFromRoot:c};l.push(n),l=n.children}};try{for(var h=(i=void 0,Object(x.i)(p)),f=h.next();!f.done;f=h.next())d(f.value)}catch(g){i={error:g}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}}}catch(b){e={error:b}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return r}(this.templates),this.toggledItems=S(null===(n=this.view)||void 0===n?void 0:n.FileName,this.tree)),(null===(i=t.view)||void 0===i?void 0:i.currentValue)&&(this.toggledItems=S(null===(o=this.view)||void 0===o?void 0:o.FileName,this.tree))},t.prototype.openTemplate=function(t){this.dialogService.openCode({items:[{Path:t}]})},t.prototype.toggleItem=function(t){!function(t,e){var n=e.indexOf(t);-1===n?e.push(t):e.splice(n,1)}(t,this.toggledItems)},t.\u0275fac=function(e){return new(e||t)(f.Qb(O.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-code-templates"]],inputs:{view:"view",templates:"templates"},features:[f.zb],decls:4,vars:1,consts:[[1,"editor-active-explorer","editor-fancy-scrollbar"],[4,"ngFor","ngForOf"],["collapsible",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","template-option","matTooltipShowDelay","750",3,"ngClass","matTooltip","click",4,"ngIf"],["class","collapsible","matTooltipShowDelay","750",3,"matTooltip","click",4,"ngIf"],[4,"ngIf"],["matTooltipShowDelay","750",1,"template-option",3,"ngClass","matTooltip","click"],["matTooltipShowDelay","750",1,"collapsible",3,"matTooltip","click"],["class","list",4,"ngFor","ngForOf"],[1,"list"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Nc(1,I,2,4,"ng-container",1),f.Nc(2,B,3,3,"ng-template",null,2,f.Oc),f.Vb()),2&t&&(f.Bb(1),f.qc("ngForOf",e.tree))},directives:[i.s,i.A,i.t,i.q,c.a,s.a],styles:[".template-option[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.template-option[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.template-option.active[_ngcontent-%COMP%]{background-color:#37373d}.list[_ngcontent-%COMP%]{padding-left:16px}.collapsible[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:3px 0}.collapsible[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}"],changeDetection:0}),t}();function E(t,e){var n=e.indexOf(t);-1===n?e.push(t):e.splice(n,1)}var q=n("hOvr"),F=n("udnq"),W=function(){function t(){}return t.prototype.transform=function(t){return typeof t!=typeof{}?t:Object.keys(t).map((function(e){return t[e]}))},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=f.Pb({name:"toarray",type:t,pure:!0}),t}();function N(t,e){if(1&t&&(f.Wb(0,"mat-option",6),f.Pc(1),f.Vb()),2&t){var n=e.$implicit;f.qc("value",n),f.Bb(1),f.Qc(n)}}function A(t,e){if(1&t&&(f.Wb(0,"div"),f.Wb(1,"a",18),f.Pc(2),f.Vb(),f.Vb()),2&t){var n=e.$implicit;f.Bb(1),f.rc("href",n.url,f.Hc),f.Bb(1),f.Qc(n.name)}}function R(t,e){if(1&t&&(f.Wb(0,"div",16),f.Wb(1,"div",17),f.Pc(2),f.Vb(),f.Nc(3,A,3,2,"div",5),f.Vb()),2&t){var n=f.ic().$implicit;f.Bb(2),f.Qc(n.help),f.Bb(1),f.qc("ngForOf",n.links)}}function $(t,e){if(1&t){var n=f.Xb();f.Wb(0,"li",11),f.Wb(1,"div",12),f.Wb(2,"div",13),f.ec("click",(function(){f.Ec(n);var t=e.$implicit;return f.ic(3).addSnippet(t.snip)})),f.Pc(3),f.Vb(),f.Wb(4,"mat-icon",14),f.ec("click",(function(){f.Ec(n);var t=e.$implicit;return f.ic(3).toggleInfo(t)})),f.Pc(5," info "),f.Vb(),f.Vb(),f.Nc(6,R,4,2,"div",15),f.Vb()}if(2&t){var i=e.$implicit,o=f.ic(3);f.Bb(2),f.qc("matTooltip",i.snip),f.Bb(1),f.Rc("",i.label," "),f.Bb(3),f.qc("ngIf",o.toggledInfos.includes(i))}}function Q(t,e){if(1&t&&(f.Wb(0,"ul",9),f.Nc(1,$,7,3,"li",10),f.jc(2,"toarray"),f.Vb()),2&t){var n=f.ic().$implicit;f.Bb(1),f.qc("ngForOf",f.kc(2,1,n.value))}}function D(t,e){if(1&t){var n=f.Xb();f.Ub(0),f.Wb(1,"div",7),f.ec("click",(function(){f.Ec(n);var t=e.$implicit;return f.ic().toggleItem(t)})),f.Wb(2,"mat-icon"),f.Pc(3),f.Vb(),f.Wb(4,"span"),f.Pc(5),f.Vb(),f.Vb(),f.Nc(6,Q,3,3,"ul",8),f.Tb()}if(2&t){var i=e.$implicit,o=f.ic();f.Bb(1),f.qc("matTooltip",i.key),f.Bb(2),f.Qc(o.toggledItems.includes(i)?"keyboard_arrow_down":"keyboard_arrow_right"),f.Bb(2),f.Qc(i.key),f.Bb(1),f.qc("ngIf",o.toggledItems.includes(i))}}var K=function(){function t(){this.insertSnippet=new f.n,this.selected="Content",this.toggledItems=[],this.toggledInfos=[]}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(t){var e,n=null===(e=t.snippets)||void 0===e?void 0:e.currentValue;n?(this.sets=Object.keys(n),this.activeSet=this.snippets[this.selected]):(this.sets=null,this.activeSet=null)},t.prototype.onSetChange=function(t){this.selected=t.value,this.activeSet=this.snippets[this.selected],this.toggledItems=[],this.toggledInfos=[]},t.prototype.addSnippet=function(t){this.insertSnippet.emit(t)},t.prototype.toggleItem=function(t){E(t,this.toggledItems)},t.prototype.toggleInfo=function(t){E(t,this.toggledInfos)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Kb({type:t,selectors:[["app-code-snippets"]],inputs:{snippets:"snippets"},outputs:{insertSnippet:"insertSnippet"},features:[f.zb],decls:7,vars:5,consts:[[1,"editor-active-explorer","editor-fancy-scrollbar"],[1,"edit-input"],["appearance","standard","color","accent",1,"set-dropdown"],["name","selected",3,"ngModel","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"value"],["matTooltipShowDelay","750",1,"collapsible",3,"matTooltip","click"],["class","list",4,"ngIf"],[1,"list"],["class","list-item",4,"ngFor","ngForOf"],[1,"list-item"],[1,"list-item__label-wrapper"],["matRipple","","matTooltipShowDelay","750",1,"label",3,"matTooltip","click"],["matTooltip","Show Help","matTooltipShowDelay","750","appClickStopPropagation","",3,"click"],["class","list-item__help-wrapper",4,"ngIf"],[1,"list-item__help-wrapper"],[1,"text"],["target","_blank",3,"href"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"div",1),f.Wb(2,"mat-form-field",2),f.Wb(3,"mat-select",3),f.ec("selectionChange",(function(t){return e.onSetChange(t)})),f.Nc(4,N,2,2,"mat-option",4),f.Vb(),f.Vb(),f.Vb(),f.Nc(5,D,7,4,"ng-container",5),f.jc(6,"keyvalue"),f.Vb()),2&t&&(f.Bb(3),f.qc("ngModel",e.selected),f.Bb(1),f.qc("ngForOf",e.sets),f.Bb(1),f.qc("ngForOf",f.kc(6,3,e.activeSet)))},directives:[q.c,p.a,o.r,o.u,i.s,u.l,c.a,s.a,i.t,u.q,F.a],pipes:[i.l,W],styles:[".edit-input[_ngcontent-%COMP%]{background-color:#fff;height:44px;display:flex;align-items:flex-end}.set-dropdown[_ngcontent-%COMP%]{font-size:14px;height:auto}.collapsible[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:3px 0}.collapsible[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.list[_ngcontent-%COMP%]{list-style-type:none;margin:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{padding-right:8px}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.list[_ngcontent-%COMP%]   .list-item__label-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{cursor:pointer;padding:3px 0 3px 24px;flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;font-size:18px}.list[_ngcontent-%COMP%]   .list-item__help-wrapper[_ngcontent-%COMP%]{padding:3px 18px 3px 24px;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.list[_ngcontent-%COMP%]   .list-item__help-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;font-style:oblique}"],changeDetection:0}),t}(),U={mode:"ace/mode/razor",wrap:!0,useSoftTabs:!0,theme:"ace/theme/sqlserver",fontSize:14,fontFamily:"Consolas, Courier New, monospace",showGutter:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0},J=["editor"],X=function(){function t(t){this.zone=t,this.value="",this.propagateChange=function(){},this.propagateTouched=function(){}}return t.prototype.ngOnInit=function(){!function t(e,n,i){void 0===i&&(i=0);var o=e.length===i+1?n:t.bind(this,e,n,i+1),r=e[i];if(window[r.globalVar])n();else{var a=document.querySelector('script[src="'+r.src+'"]');if(a)a.addEventListener("load",o,{once:!0});else{var s=document.createElement("script");s.src=r.src,s.addEventListener("load",o,{once:!0}),document.head.appendChild(s)}}}([{globalVar:"ace",src:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ace.min.js"},{globalVar:null,src:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ext-modelist.min.js"},{globalVar:null,src:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ext-language_tools.min.js"}],this.aceLoaded.bind(this))},t.prototype.ngOnChanges=function(t){var e,n,i,o,r,a=this,s=null===(e=t.filename)||void 0===e?void 0:e.currentValue,c=null===(n=t.snippets)||void 0===n?void 0:n.currentValue;if(this.updateValues(s,c),this.editor){(null===(i=t.toggleResize)||void 0===i?void 0:i.currentValue)!==(null===(o=t.toggleResize)||void 0===o?void 0:o.previousValue)&&this.zone.runOutsideAngular((function(){setTimeout((function(){a.editor.resize()}),50)}));var l=null===(r=t.insertSnippet)||void 0===r?void 0:r.currentValue;l&&this.zone.runOutsideAngular((function(){ace.require("ace/snippets").snippetManager.insertSnippet(a.editor,l),a.editor.focus()}))}},t.prototype.writeValue=function(t){var e=this;this.value=t||"",this.editor&&this.zone.runOutsideAngular((function(){var t=e.editor.getCursorPosition();e.editor.setValue(e.value,-1),e.editor.moveCursorToPosition(t)}))},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){this.propagateTouched=t},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.editor.destroy(),t.editor.container.remove(),t.editor=null}))},t.prototype.aceLoaded=function(){var t=this;this.zone.runOutsideAngular((function(){ace.config.set("basePath","https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11"),t.editor=ace.edit(t.editorRef.nativeElement,U),t.editor.$blockScrolling=1/0,t.editor.session.setValue(t.value),t.updateValues(t.filename,t.snippets),t.editor.on("change",t.onEditorValueChange.bind(t)),t.editor.on("blur",t.onEditorBlurred.bind(t)),t.editor.focus()}))},t.prototype.onEditorValueChange=function(){var t=this;this.zone.run((function(){t.propagateChange(t.editor.getValue())}))},t.prototype.onEditorBlurred=function(){var t=this;this.zone.run((function(){t.propagateTouched(t.editor.getValue())}))},t.prototype.updateValues=function(t,e){var n=this;this.editor&&this.zone.runOutsideAngular((function(){if(t){var i=ace.require("ace/ext/modelist").getModeForPath(t).mode;n.editor.session.setMode(i)}e&&ace.require("ace/snippets").snippetManager.register(n.snippets)}))},t.\u0275fac=function(e){return new(e||t)(f.Qb(f.z))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-ace-editor"]],viewQuery:function(t,e){var n;1&t&&f.Vc(J,!0),2&t&&f.Bc(n=f.fc())&&(e.editorRef=n.first)},inputs:{filename:"filename",snippets:"snippets",insertSnippet:"insertSnippet",toggleResize:"toggleResize"},features:[f.Ab([{provide:o.p,useExisting:Object(f.T)((function(){return t})),multi:!0}]),f.zb],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["editor",""]],template:function(t,e){1&t&&f.Rb(0,"div",0,1)},styles:["[_nghost-%COMP%] {display: block; width: 100%; height: 100%}"],changeDetection:0}),t}();function G(t,e){if(1&t){var n=f.Xb();f.Wb(0,"app-ace-editor",8),f.ec("ngModelChange",(function(t){return f.Ec(n),f.ic().view.Code=t})),f.Vb()}if(2&t){var i=f.ic();f.qc("filename",i.view.FileName)("ngModel",i.view.Code)("snippets",i.editorSnipps)("insertSnippet",i.insertSnipp)("toggleResize",!i.activeExplorer)}}var Z=function(t){return{active:t}},Y=[{path:"",component:function(){function t(t,e,n,i,o,r,a){this.context=t,this.route=e,this.snackBar=n,this.sourceService=i,this.snippetsService=o,this.zone=r,this.titleService=a,this.explorer={templates:"templates",snippets:"snippets"},this.eventListeners=[],this.context.init(this.route),this.calculateViewKey(),this.attachListeners()}return t.prototype.ngOnInit=function(){var t=this;this.sourceService.get(this.viewKey).subscribe((function(e){t.view=e,t.savedCode=t.view.Code,t.titleService.setTitle(t.view.FileName+" - Code Editor"),t.snippetsService.getSnippets(t.view).then((function(e){t.explorerSnipps=e.sets,t.editorSnipps=e.list}))})),this.sourceService.getTemplates().subscribe((function(e){t.templates=e}))},t.prototype.ngOnDestroy=function(){this.detachListeners()},t.prototype.toggleExplorer=function(t){this.activeExplorer=this.activeExplorer===t?null:t},t.prototype.changeInsertSnipp=function(t){this.insertSnipp=t},t.prototype.save=function(){var t=this;this.snackBar.open("Saving...");var e=this.view.Code;this.sourceService.save(this.viewKey,this.view).subscribe({next:function(n){n?(t.savedCode=e,e=null,t.snackBar.open("Saved",null,{duration:2e3})):t.snackBar.open("Failed",null,{duration:2e3})},error:function(){t.snackBar.open("Failed",null,{duration:2e3})}})},t.prototype.calculateViewKey=function(){var t=sessionStorage.getItem(h.i),e=JSON.parse(t)[0];this.viewKey=e.EntityId||e.Path},t.prototype.attachListeners=function(){var t=this;this.zone.runOutsideAngular((function(){var e=t.stopClose.bind(t),n=t.keyboardSave.bind(t);window.addEventListener("beforeunload",e),window.addEventListener("keydown",n),t.eventListeners.push({element:window,type:"beforeunload",listener:e}),t.eventListeners.push({element:window,type:"keydown",listener:n})}))},t.prototype.detachListeners=function(){var t=this;this.zone.runOutsideAngular((function(){t.eventListeners.forEach((function(t){t.element.removeEventListener(t.type,t.listener)})),t.eventListeners=null}))},t.prototype.stopClose=function(t){this.savedCode!==this.view.Code&&(t.preventDefault(),t.returnValue="")},t.prototype.keyboardSave=function(t){var e=this;83===t.keyCode&&(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&(t.preventDefault(),this.zone.run((function(){e.save()})))},t.\u0275fac=function(e){return new(e||t)(f.Qb(g.a),f.Qb(d.a),f.Qb(l.b),f.Qb(y),f.Qb(C),f.Qb(f.z),f.Qb(P.d))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-code-editor"]],decls:14,vars:12,consts:[[1,"editor-root"],[1,"editor-side-toolbar"],["matTooltip","Templates",1,"button",3,"ngClass","click"],["matTooltip","Snippets",1,"button",3,"ngClass","click"],[3,"hidden","view","templates"],[3,"hidden","snippets","insertSnippet"],[3,"filename","ngModel","snippets","insertSnippet","toggleResize","ngModelChange",4,"ngIf"],["mat-fab","","mat-elevation-z24","","matTooltip","Click to save or CTRL + S",3,"click"],[3,"filename","ngModel","snippets","insertSnippet","toggleResize","ngModelChange"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"div",1),f.Wb(2,"div",2),f.ec("click",(function(){return e.toggleExplorer(e.explorer.templates)})),f.Wb(3,"mat-icon"),f.Pc(4,"file_copy"),f.Vb(),f.Vb(),f.Wb(5,"div",3),f.ec("click",(function(){return e.toggleExplorer(e.explorer.snippets)})),f.Wb(6,"mat-icon"),f.Pc(7,"code"),f.Vb(),f.Vb(),f.Vb(),f.Rb(8,"app-code-templates",4),f.Wb(9,"app-code-snippets",5),f.ec("insertSnippet",(function(t){return e.changeInsertSnipp(t)})),f.Vb(),f.Nc(10,G,1,5,"app-ace-editor",6),f.Wb(11,"button",7),f.ec("click",(function(){return e.save()})),f.Wb(12,"mat-icon"),f.Pc(13,"done"),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.Bb(2),f.qc("ngClass",f.vc(8,Z,e.activeExplorer===e.explorer.templates)),f.Bb(3),f.qc("ngClass",f.vc(10,Z,e.activeExplorer===e.explorer.snippets)),f.Bb(3),f.qc("hidden",e.activeExplorer!==e.explorer.templates)("view",e.view)("templates",e.templates),f.Bb(1),f.qc("hidden",e.activeExplorer!==e.explorer.snippets)("snippets",e.explorerSnipps),f.Bb(1),f.qc("ngIf",e.view))},directives:[c.a,i.q,s.a,L,K,i.t,a.b,X,o.r,o.u],styles:[".mat-fab[_ngcontent-%COMP%]{position:absolute;right:48px;bottom:32px;z-index:10}"]}),t}()}],tt=function(){function t(){}return t.\u0275mod=f.Ob({type:t}),t.\u0275inj=f.Nb({factory:function(e){return new(e||t)},imports:[[d.g.forChild(Y)],d.g]}),t}(),et=n("O6Xb");n.d(e,"CodeEditorModule",(function(){return nt}));var nt=function(){function t(){}return t.\u0275mod=f.Ob({type:t}),t.\u0275inj=f.Nb({factory:function(e){return new(e||t)},providers:[g.a,y,O.a,C],imports:[[tt,et.a,i.c,r.g,a.c,s.b,c.b,l.d,o.l,p.b,u.r]]}),t}()},udnq:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("1C3z"),o=function(){function t(){}return t.prototype.onClick=function(t){t.stopPropagation()},t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Lb({type:t,selectors:[["","appClickStopPropagation",""]],hostBindings:function(t,e){1&t&&i.ec("click",(function(t){return e.onClick(t)}))}}),t}()}}]);
//# sourceMappingURL=27.js.map