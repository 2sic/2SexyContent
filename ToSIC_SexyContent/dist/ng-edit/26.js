(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"1vCq":function(t,e,n){"use strict";(function(t){var i=n("fw2E"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,r=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=r&&r.exports===o?i.a.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var n=t.length,i=s?s(n):new t.constructor(n);return t.copy(i),i}}).call(this,n("cyaT")(t))},H0VJ:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("d3IL"),o=n("1C3z"),r=n("Iv+g"),a=function(){function t(t){this.context=t}return t.prototype.openCode=function(t){var e=sessionStorage.getItem(i.u),n=new URL(e),o=n.origin+n.pathname+n.search,r=this.buildHashParam(i.y,this.context.zoneId.toString()).replace("&","#")+this.buildHashParam(i.a,this.context.appId.toString())+this.buildHashParam(i.t,this.context.tabId.toString())+this.buildHashParam(i.n,this.context.moduleId.toString())+this.buildHashParam(i.c,this.context.contentBlockId.toString())+this.buildHashParam(i.j)+this.buildHashParam(i.k)+this.buildHashParam(i.l)+this.buildHashParam(i.q)+this.buildHashParam(i.x)+this.buildHashParam(i.o)+this.buildHashParam(i.v)+this.buildHashParam(i.w)+this.buildHashParam(i.b)+this.buildHashParam(i.g)+this.buildHashParam(i.s)+this.buildHashParam(i.f,"develop")+this.buildHashParam(i.i,JSON.stringify(t.items))+(sessionStorage.getItem(i.e)?this.buildHashParam(i.e):"")+"";window.open(o+r,"_blank")},t.prototype.openQueryDesigner=function(t,e){var n=sessionStorage.getItem(i.u),o=new URL(n),r=o.origin+o.pathname+o.search,a=this.buildHashParam(i.y,this.context.zoneId.toString()).replace("&","#")+this.buildHashParam(i.a,this.context.appId.toString())+this.buildHashParam(i.t,this.context.tabId.toString())+this.buildHashParam(i.n,this.context.moduleId.toString())+this.buildHashParam(i.c,this.context.contentBlockId.toString())+this.buildHashParam(i.j)+this.buildHashParam(i.k)+this.buildHashParam(i.l)+this.buildHashParam(i.q)+this.buildHashParam(i.x)+this.buildHashParam(i.o)+this.buildHashParam(i.v)+this.buildHashParam(i.w)+this.buildHashParam(i.b)+this.buildHashParam(i.g)+this.buildHashParam(i.s)+this.buildHashParam(i.f,"pipeline-designer")+this.buildHashParam(i.p,e.toString())+this.buildHashParam(i.i,JSON.stringify(t.items))+(sessionStorage.getItem(i.e)?this.buildHashParam(i.e):"")+"";window.open(r+a,"_blank")},t.prototype.buildHashParam=function(t,e){var n=t.replace(i.z,""),o=void 0!==e?e:sessionStorage.getItem(t);return"&"+n+"="+encodeURIComponent(o)},t.\u0275fac=function(e){return new(e||t)(o.ac(r.a))},t.\u0275prov=o.Mb({token:t,factory:t.\u0275fac}),t}()},iluC:function(t,e,n){"use strict";n.r(e);var i=n("8AiQ"),o=n("ZSGP"),r=n("BLjT"),a=n("9HSk"),s=n("r4gC"),c=n("Qc/f"),l=n("2pW/"),p=n("LuBX"),u=n("OeRG"),d=n("5/c3"),f=n("d3IL"),h=n("1C3z"),b=n("Iv+g"),g=n("Jg5f"),v=n("t5c9"),m=n("dkRO"),y=function(){function t(t,e,n){this.http=t,this.context=e,this.dnnContext=n}return t.prototype.get=function(t){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("app-sys/appassets/asset"),{params:this.calcParams(t)}).pipe(Object(g.a)((function(t){if("auto"===t.Type.toLowerCase())switch(t.Extension.toLowerCase()){case".cs":case".cshtml":t.Type="Razor";break;case".html":case".css":case".js":t.Type="Token"}return t})))},t.prototype.save=function(t,e){return this.http.post(this.dnnContext.$2sxc.http.apiUrl("app-sys/appassets/asset"),e,{params:this.calcParams(t)})},t.prototype.getTemplates=function(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("app-sys/appassets/list"),{params:{appId:this.context.appId.toString(),global:"false",withSubfolders:"true"}})},t.prototype.calcParams=function(t){return"number"==typeof t?{templateId:t.toString()}:{path:t}},t.\u0275fac=function(e){return new(e||t)(h.ac(v.b),h.ac(b.a),h.ac(m.a))},t.\u0275prov=h.Mb({token:t,factory:t.\u0275fac}),t}(),O=n("D57K"),x=n("DHAC"),w=n("y7Du"),C=function(){try{var t=Object(w.a)(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),P=function(t,e,n){"__proto__"==e&&C?C(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},j=n("HVAe"),S=Object.prototype.hasOwnProperty,k=function(t,e,n){var i=t[e];S.call(t,e)&&Object(j.a)(i,n)&&(void 0!==n||e in t)||P(t,e,n)},I=function(t,e,n,i){var o=!n;n||(n={});for(var r=-1,a=e.length;++r<a;){var s=e[r],c=i?i(n[s],t[s],s,n,t):void 0;void 0===c&&(c=t[s]),o?P(n,s,c):k(n,s,c)}return n},_=n("FoV5"),T=n("/ciH"),M=n("gDU4"),V=n("Rmop"),A=Object.prototype.hasOwnProperty,H=n("GIvL"),B=function(t){return Object(H.a)(t)?Object(T.a)(t,!0):function(t){if(!Object(M.a)(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Object(V.a)(t),n=[];for(var i in t)("constructor"!=i||!e&&A.call(t,i))&&n.push(i);return n}(t)},z=n("1vCq"),E=n("qd5q"),F=n("gFym"),L=n("CrBj"),q=Object(L.a)(Object.getPrototypeOf,Object),W=n("NUo7"),N=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Object(F.a)(e,Object(E.a)(t)),t=q(t);return e}:W.a,R=n("BaCy"),D=n("lnqP"),$=function(t){return Object(D.a)(t,B,N)},U=n("EaxY"),Q=Object.prototype.hasOwnProperty,K=n("mY74"),G=function(t){var e=new t.constructor(t.byteLength);return new K.a(e).set(new K.a(t)),e},J=/\w*$/,X=n("GAvS"),Y=X.a?X.a.prototype:void 0,Z=Y?Y.valueOf:void 0,tt=Object.create,et=function(){function t(){}return function(e){if(!Object(M.a)(e))return{};if(tt)return tt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),nt=n("SEb4"),it=n("TPB+"),ot=n("gfy7"),rt=n("clBK"),at=n("Af8m"),st=at.a&&at.a.isMap,ct=st?Object(rt.a)(st):function(t){return Object(ot.a)(t)&&"[object Map]"==Object(U.a)(t)},lt=at.a&&at.a.isSet,pt=lt?Object(rt.a)(lt):function(t){return Object(ot.a)(t)&&"[object Set]"==Object(U.a)(t)},ut={};ut["[object Arguments]"]=ut["[object Array]"]=ut["[object ArrayBuffer]"]=ut["[object DataView]"]=ut["[object Boolean]"]=ut["[object Date]"]=ut["[object Float32Array]"]=ut["[object Float64Array]"]=ut["[object Int8Array]"]=ut["[object Int16Array]"]=ut["[object Int32Array]"]=ut["[object Map]"]=ut["[object Number]"]=ut["[object Object]"]=ut["[object RegExp]"]=ut["[object Set]"]=ut["[object String]"]=ut["[object Symbol]"]=ut["[object Uint8Array]"]=ut["[object Uint8ClampedArray]"]=ut["[object Uint16Array]"]=ut["[object Uint32Array]"]=!0,ut["[object Error]"]=ut["[object Function]"]=ut["[object WeakMap]"]=!1;var dt=function t(e,n,i,o,r,a){var s,c=1&n,l=2&n,p=4&n;if(i&&(s=r?i(e,o,r,a):i(e)),void 0!==s)return s;if(!Object(M.a)(e))return e;var u=Object(nt.a)(e);if(u){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Q.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!c)return function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}(e,s)}else{var d=Object(U.a)(e),f="[object Function]"==d||"[object GeneratorFunction]"==d;if(Object(it.a)(e))return Object(z.a)(e,c);if("[object Object]"==d||"[object Arguments]"==d||f&&!r){if(s=l||f?{}:function(t){return"function"!=typeof t.constructor||Object(V.a)(t)?{}:et(q(t))}(e),!c)return l?function(t,e){return I(t,N(t),e)}(e,function(t,e){return t&&I(e,B(e),t)}(s,e)):function(t,e){return I(t,Object(E.a)(t),e)}(e,function(t,e){return t&&I(e,Object(_.a)(e),t)}(s,e))}else{if(!ut[d])return r?e:{};s=function(t,e,n){var i,o,r=t.constructor;switch(e){case"[object ArrayBuffer]":return G(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return function(t,e){var n=e?G(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var n=e?G(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return(o=new(i=t).constructor(i.source,J.exec(i))).lastIndex=i.lastIndex,o;case"[object Set]":return new r;case"[object Symbol]":return Z?Object(Z.call(t)):{}}}(e,d,c)}}a||(a=new x.a);var h=a.get(e);if(h)return h;a.set(e,s),pt(e)?e.forEach((function(o){s.add(t(o,n,i,o,e,a))})):ct(e)&&e.forEach((function(o,r){s.set(r,t(o,n,i,r,e,a))}));var b=p?l?$:R.a:l?keysIn:_.a,g=u?void 0:b(e);return function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n););}(g||e,(function(o,r){g&&(o=e[r=o]),k(s,r,t(o,n,i,r,e,a))})),s},ft=function(t){return dt(t,5)},ht=function(){function t(t,e){this.http=t,this.dnnContext=e,this.keyPrefixes=["@","["],this.keyPrefixIndex=function(t){return t.Type.indexOf("Razor")>-1?0:1}}return t.prototype.getSnippets=function(t){return Object(O.b)(this,void 0,void 0,(function(){var e,n,i;return Object(O.e)(this,(function(o){switch(o.label){case 0:return[4,this.http.get("../sxc-develop/snippets.json.js").toPromise()];case 1:return e=o.sent(),n=this.filterAwayNotNeededSnippetsList(e.snippets,t),i=this.extractInputTypeSnippets(n),[2,{sets:this.initSnippetsWithConfig(i.standardArray,t,i.inputTypeSnippets),list:i.standardArray}]}}))}))},t.prototype.filterAwayNotNeededSnippetsList=function(t,e){var n,i,o=[];try{for(var r=Object(O.i)(t),a=r.next();!a.done;a=r.next()){var s=a.value,c=this.keyPrefixes.indexOf(s.set[0]);-1!==c&&c!==this.keyPrefixIndex(e)||(c===this.keyPrefixIndex(e)&&(s.set=s.set.substr(1)),o.push(s))}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return o},t.prototype.extractInputTypeSnippets=function(t){var e,n,i=[],o=[];try{for(var r=Object(O.i)(t),a=r.next();!a.done;a=r.next()){var s=a.value;"\\"===s.set[0]?(s.set=s.set.substr(1),o.push(s)):i.push(s)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{standardArray:i,inputTypeSnippets:this.catalogInputTypeSnippets(o)}},t.prototype.catalogInputTypeSnippets=function(t){var e,n,i={};try{for(var o=Object(O.i)(t),r=o.next();!r.done;r=o.next()){var a=r.value;void 0===i[a.subset]&&(i[a.subset]=[]),i[a.subset].push(a)}}catch(s){e={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},t.prototype.initSnippetsWithConfig=function(t,e,n){return(t=this.makeTree(t)).Content=Object.assign({},t.Content,{Fields:{},PresentationFields:{}}),e.TypeContent&&this.loadContentType(t.Content.Fields,e.TypeContent,"Content",e,n),e.TypeContentPresentation&&this.loadContentType(t.Content.PresentationFields,e.TypeContentPresentation,"Content.Presentation",e,n),e.HasList?(t.List=Object.assign({},t.List,{Fields:{},PresentationFields:{}}),e.TypeList&&this.loadContentType(t.List.Fields,e.TypeList,"ListContent",e,n),e.TypeListPresentation&&this.loadContentType(t.List.PresentationFields,e.TypeListPresentation,"ListContent.Presentation",e,n)):delete t.List,e.HasApp&&(t.App.Resources={},t.App.Settings={},this.loadContentType(t.App.Resources,"App-Resources","App.Resources",e,n),this.loadContentType(t.App.Settings,"App-Settings","App.Settings",e,n)),t},t.prototype.makeTree=function(t){var e,n,i={};try{for(var o=Object(O.i)(t),r=o.next();!r.done;r=o.next()){var a=r.value;void 0===i[a.set]&&(i[a.set]={}),void 0===i[a.set][a.subset]&&(i[a.set][a.subset]=[]);var s={key:a.name,label:this.label(a.set,a.subset,a.name),snip:a.content,help:a.help||this.help(a.set,a.subset,a.name),links:this.linksList(a.links)};i[a.set][a.subset].push(s)}}catch(c){e={error:c}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},t.prototype.label=function(t,e,n){var i=this.getHelpKey(t,e,n,".Key"),o=i;return o===i&&(o=n),o},t.prototype.getHelpKey=function(t,e,n,i){return"SourceEditorSnippets."+t+"."+e+"."+n+i},t.prototype.help=function(t,e,n){var i=this.getHelpKey(t,e,n,".Help"),o=i;return o===i&&(o=""),o},t.prototype.linksList=function(t){var e,n;if(!t)return null;var i=[],o=t.split("\n");try{for(var r=Object(O.i)(o),a=r.next();!a.done;a=r.next()){var s=a.value.split(":");3===s.length&&i.push({name:s[0].trim(),url:s[1].trim()+":"+s[2].trim()})}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return 0===i.length?null:i},t.prototype.loadContentType=function(t,e,n,i,o){var r=this;this.getFields(i.AppId,e).then((function(e){var a,s;try{for(var c=Object(O.i)(e),l=c.next();!l.done;l=c.next()){var p=l.value,u=p.StaticName;t[u]={key:u,label:u,snip:r.valuePlaceholder(n,u,i),help:p.Metadata.merged.Notes||" ("+p.Type.toLowerCase()+") "};var d=ft(t[u]);r.attachSnippets(t,n,u,p.InputType,d,o)}}catch(b){a={error:b}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}var f=["EntityId","EntityTitle","EntityGuid","EntityType","IsPublished","Modified"];if(e.length)for(var h=0;h<f.length;h++)t[f[h]]={key:f[h],label:f[h],snip:r.valuePlaceholder(n,f[h],i),help:"SourceEditorSnippets.StandardFields."+f[h]+".Help"}}))},t.prototype.valuePlaceholder=function(t,e,n){return n.Type.indexOf("Razor")>-1?"@"+t+"."+e:"["+t.replace(".",":")+":"+e+"]"},t.prototype.getFields=function(t,e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("eav/contenttype/getfields"),{params:{appid:t.toString(),staticName:e}}).toPromise().then((function(t){var e,n;if(t)try{for(var i=Object(O.i)(t),o=i.next();!o.done;o=i.next()){var r=o.value;if(r.Metadata){var a=r.Metadata,s=a.All,c=a[r.Type],l=a[r.InputType];a.merged=Object(O.a)(Object(O.a)(Object(O.a)({},s),c),l)}}}catch(p){e={error:p}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return t}))},t.prototype.attachSnippets=function(t,e,n,i,o,r){var a=r[i];if(i.indexOf("-")){var s=i.substr(0,i.indexOf("-"));if(s){var c=r[s];c&&(a=a?a.concat(c):c)}}if(a){void 0===t[n].more&&(t[n].more=[]);for(var l=t[n].more,p=0;p<a.length;p++)try{l[n+"-"+a[p].name]=Object.assign({},o,{key:n+" - "+a[p].name,label:a[p].name,snip:this.localizeGenericSnippet(a[p].content,e,n),collapse:!0})}finally{}}},t.prototype.localizeGenericSnippet=function(t,e,n){return t.replace(/(\$\{[0-9]+\:)var(\})/gi,"$1"+e+"$2").replace(/(\$\{[0-9]+\:)prop(\})/gi,"$1"+n+"$2")},t.\u0275fac=function(e){return new(e||t)(h.ac(v.b),h.ac(m.a))},t.\u0275prov=h.Mb({token:t,factory:t.\u0275fac}),t}(),bt=n("Ata6");function gt(t,e){var n,i;if(!t||!e)return[];var o=[],r=t.split("/"),a=e,s=function(t){var e=a.find((function(e){return e.name===t}));return e?(o.push(e),e.children?void(a=e.children):"break"):"break"};try{for(var c=Object(O.i)(r),l=c.next();!l.done&&"break"!==s(l.value);l=c.next());}catch(p){n={error:p}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return o}var vt=n("H0VJ");function mt(t,e){1&t&&h.Sb(0)}var yt=function(t){return{item:t}};function Ot(t,e){if(1&t&&(h.Ub(0),h.Nc(1,mt,1,0,"ng-container",3),h.Tb()),2&t){var n=e.$implicit;h.ic();var i=h.Cc(3);h.Bb(1),h.qc("ngTemplateOutlet",i)("ngTemplateOutletContext",h.vc(2,yt,n))}}var xt=function(t){return{active:t}};function wt(t,e){if(1&t){var n=h.Xb();h.Wb(0,"div",7),h.ec("click",(function(){h.Ec(n);var t=h.ic().item;return h.ic().openTemplate(t.pathFromRoot)})),h.Pc(1),h.Vb()}if(2&t){var i=h.ic().item,o=h.ic();h.qc("ngClass",h.vc(3,xt,o.toggledItems.includes(i)))("matTooltip",i.name),h.Bb(1),h.Rc(" ",i.name," ")}}function Ct(t,e){if(1&t){var n=h.Xb();h.Wb(0,"div",8),h.ec("click",(function(){h.Ec(n);var t=h.ic().item;return h.ic().toggleItem(t)})),h.Wb(1,"mat-icon"),h.Pc(2),h.Vb(),h.Wb(3,"span"),h.Pc(4),h.Vb(),h.Vb()}if(2&t){var i=h.ic().item,o=h.ic();h.qc("matTooltip",i.name),h.Bb(2),h.Qc(o.toggledItems.includes(i)?"keyboard_arrow_down":"keyboard_arrow_right"),h.Bb(2),h.Qc(i.name)}}function Pt(t,e){1&t&&h.Sb(0)}function jt(t,e){if(1&t&&(h.Wb(0,"div",10),h.Nc(1,Pt,1,0,"ng-container",3),h.Vb()),2&t){var n=e.$implicit;h.ic(3);var i=h.Cc(3);h.Bb(1),h.qc("ngTemplateOutlet",i)("ngTemplateOutletContext",h.vc(2,yt,n))}}function St(t,e){if(1&t&&(h.Ub(0),h.Nc(1,jt,2,4,"div",9),h.Tb()),2&t){var n=h.ic().item;h.Bb(1),h.qc("ngForOf",n.children)}}function kt(t,e){if(1&t&&(h.Nc(0,wt,2,5,"div",4),h.Nc(1,Ct,5,3,"div",5),h.Nc(2,St,2,1,"ng-container",6)),2&t){var n=e.item,i=h.ic();h.qc("ngIf",!n.children),h.Bb(1),h.qc("ngIf",n.children),h.Bb(1),h.qc("ngIf",i.toggledItems.includes(n))}}var It=function(){function t(t){this.dialogService=t,this.toggledItems=[]}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(t){var e,n,i,o;(null===(e=t.templates)||void 0===e?void 0:e.currentValue)&&(this.tree=function(t){var e,n,i,o;if(!t)return[];var r=[];try{for(var a=Object(O.i)(t),s=a.next();!s.done;s=a.next()){var c=s.value,l=r,p=c.split("/"),u=p[p.length-1],d=function(t){var e=l.find((function(e){return e.name===t}));if(e)l=e.children;else{var n={name:t,children:t!==u?[]:null,pathFromRoot:c};l.push(n),l=n.children}};try{for(var f=(i=void 0,Object(O.i)(p)),h=f.next();!h.done;h=f.next())d(h.value)}catch(b){i={error:b}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}}}catch(g){e={error:g}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return r}(this.templates),this.toggledItems=gt(null===(n=this.view)||void 0===n?void 0:n.FileName,this.tree)),(null===(i=t.view)||void 0===i?void 0:i.currentValue)&&(this.toggledItems=gt(null===(o=this.view)||void 0===o?void 0:o.FileName,this.tree))},t.prototype.openTemplate=function(t){this.dialogService.openCode({items:[{Path:t}]})},t.prototype.toggleItem=function(t){!function(t,e){var n=e.indexOf(t);-1===n?e.push(t):e.splice(n,1)}(t,this.toggledItems)},t.\u0275fac=function(e){return new(e||t)(h.Qb(vt.a))},t.\u0275cmp=h.Kb({type:t,selectors:[["app-code-templates"]],inputs:{view:"view",templates:"templates"},features:[h.zb],decls:4,vars:1,consts:[[1,"active-explorer","fancy-scrollbar"],[4,"ngFor","ngForOf"],["collapsible",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","template-option","matTooltipShowDelay","750",3,"ngClass","matTooltip","click",4,"ngIf"],["class","collapsible","matTooltipShowDelay","750",3,"matTooltip","click",4,"ngIf"],[4,"ngIf"],["matTooltipShowDelay","750",1,"template-option",3,"ngClass","matTooltip","click"],["matTooltipShowDelay","750",1,"collapsible",3,"matTooltip","click"],["class","list",4,"ngFor","ngForOf"],[1,"list"]],template:function(t,e){1&t&&(h.Wb(0,"div",0),h.Nc(1,Ot,2,4,"ng-container",1),h.Nc(2,kt,3,3,"ng-template",null,2,h.Oc),h.Vb()),2&t&&(h.Bb(1),h.qc("ngForOf",e.tree))},directives:[i.s,i.A,i.t,i.q,c.a,s.a],styles:[".template-option[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.template-option[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.template-option.active[_ngcontent-%COMP%]{background-color:#37373d}.list[_ngcontent-%COMP%]{padding-left:16px}.collapsible[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:3px 0}.collapsible[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}"],changeDetection:0}),t}(),_t=n("hOvr"),Tt=n("udnq"),Mt=function(){function t(){}return t.prototype.transform=function(t){return typeof t!=typeof{}?t:Object.keys(t).map((function(e){return t[e]}))},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=h.Pb({name:"toarray",type:t,pure:!0}),t}();function Vt(t,e){if(1&t&&(h.Wb(0,"mat-option",6),h.Pc(1),h.Vb()),2&t){var n=e.$implicit;h.qc("value",n),h.Bb(1),h.Qc(n)}}function At(t,e){if(1&t&&(h.Wb(0,"div"),h.Wb(1,"a",18),h.Pc(2),h.Vb(),h.Vb()),2&t){var n=e.$implicit;h.Bb(1),h.rc("href",n.url,h.Hc),h.Bb(1),h.Qc(n.name)}}function Ht(t,e){if(1&t&&(h.Wb(0,"div",16),h.Wb(1,"div",17),h.Pc(2),h.Vb(),h.Nc(3,At,3,2,"div",5),h.Vb()),2&t){var n=h.ic().$implicit;h.Bb(2),h.Qc(n.help),h.Bb(1),h.qc("ngForOf",n.links)}}function Bt(t,e){if(1&t){var n=h.Xb();h.Wb(0,"li",11),h.Wb(1,"div",12),h.Wb(2,"div",13),h.ec("click",(function(){h.Ec(n);var t=e.$implicit;return h.ic(3).addSnippet(t.snip)})),h.Pc(3),h.Vb(),h.Wb(4,"mat-icon",14),h.ec("click",(function(){h.Ec(n);var t=e.$implicit;return h.ic(3).toggleInfo(t)})),h.Pc(5," info "),h.Vb(),h.Vb(),h.Nc(6,Ht,4,2,"div",15),h.Vb()}if(2&t){var i=e.$implicit,o=h.ic(3);h.Bb(2),h.qc("matTooltip",i.snip),h.Bb(1),h.Rc("",i.label," "),h.Bb(3),h.qc("ngIf",o.toggledInfos.includes(i))}}function zt(t,e){if(1&t&&(h.Wb(0,"ul",9),h.Nc(1,Bt,7,3,"li",10),h.jc(2,"toarray"),h.Vb()),2&t){var n=h.ic().$implicit;h.Bb(1),h.qc("ngForOf",h.kc(2,1,n.value))}}function Et(t,e){if(1&t){var n=h.Xb();h.Ub(0),h.Wb(1,"div",7),h.ec("click",(function(){h.Ec(n);var t=e.$implicit;return h.ic().toggleItem(t)})),h.Wb(2,"mat-icon"),h.Pc(3),h.Vb(),h.Wb(4,"span"),h.Pc(5),h.Vb(),h.Vb(),h.Nc(6,zt,3,3,"ul",8),h.Tb()}if(2&t){var i=e.$implicit,o=h.ic();h.Bb(1),h.qc("matTooltip",i.key),h.Bb(2),h.Qc(o.toggledItems.includes(i)?"keyboard_arrow_down":"keyboard_arrow_right"),h.Bb(2),h.Qc(i.key),h.Bb(1),h.qc("ngIf",o.toggledItems.includes(i))}}var Ft=function(){function t(){this.insertSnippet=new h.n,this.selected="Content",this.toggledItems=[],this.toggledInfos=[]}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(t){var e,n=null===(e=t.snippets)||void 0===e?void 0:e.currentValue;n?(this.sets=Object.keys(n),this.activeSet=this.snippets[this.selected]):(this.sets=null,this.activeSet=null)},t.prototype.onSetChange=function(t){this.selected=t.value,this.activeSet=this.snippets[this.selected],this.toggledItems=[],this.toggledInfos=[]},t.prototype.addSnippet=function(t){this.insertSnippet.emit(t)},t.prototype.toggleItem=function(t){this.toggleInArray(t,this.toggledItems)},t.prototype.toggleInfo=function(t){this.toggleInArray(t,this.toggledInfos)},t.prototype.toggleInArray=function(t,e){var n=e.indexOf(t);-1===n?e.push(t):e.splice(n,1)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=h.Kb({type:t,selectors:[["app-code-snippets"]],inputs:{snippets:"snippets"},outputs:{insertSnippet:"insertSnippet"},features:[h.zb],decls:7,vars:5,consts:[[1,"active-explorer","fancy-scrollbar"],[1,"edit-input"],["appearance","standard","color","accent",1,"set-dropdown"],["name","selected",3,"ngModel","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"value"],["matTooltipShowDelay","750",1,"collapsible",3,"matTooltip","click"],["class","list",4,"ngIf"],[1,"list"],["class","list-item",4,"ngFor","ngForOf"],[1,"list-item"],[1,"list-item__label-wrapper"],["matRipple","","matTooltipShowDelay","750",1,"label",3,"matTooltip","click"],["matTooltip","Show Help","matTooltipShowDelay","750","appClickStopPropagation","",3,"click"],["class","list-item__help-wrapper",4,"ngIf"],[1,"list-item__help-wrapper"],[1,"text"],["target","_blank",3,"href"]],template:function(t,e){1&t&&(h.Wb(0,"div",0),h.Wb(1,"div",1),h.Wb(2,"mat-form-field",2),h.Wb(3,"mat-select",3),h.ec("selectionChange",(function(t){return e.onSetChange(t)})),h.Nc(4,Vt,2,2,"mat-option",4),h.Vb(),h.Vb(),h.Vb(),h.Nc(5,Et,7,4,"ng-container",5),h.jc(6,"keyvalue"),h.Vb()),2&t&&(h.Bb(3),h.qc("ngModel",e.selected),h.Bb(1),h.qc("ngForOf",e.sets),h.Bb(1),h.qc("ngForOf",h.kc(6,3,e.activeSet)))},directives:[_t.c,p.a,o.r,o.u,i.s,u.l,c.a,s.a,i.t,u.q,Tt.a],pipes:[i.l,Mt],styles:[".edit-input[_ngcontent-%COMP%]{background-color:#fff;height:44px;display:flex;align-items:flex-end}.set-dropdown[_ngcontent-%COMP%]{font-size:14px;height:auto}.collapsible[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:3px 0}.collapsible[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.list[_ngcontent-%COMP%]{list-style-type:none;margin:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{padding-right:8px}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.list[_ngcontent-%COMP%]   .list-item__label-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{cursor:pointer;padding:3px 0 3px 24px;flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;font-size:18px}.list[_ngcontent-%COMP%]   .list-item__help-wrapper[_ngcontent-%COMP%]{padding:3px 18px 3px 24px;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.list[_ngcontent-%COMP%]   .list-item__help-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;font-style:oblique}.list[_ngcontent-%COMP%]   .list-item__help-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .list[_ngcontent-%COMP%]   .list-item__help-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .list[_ngcontent-%COMP%]   .list-item__help-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link, .list[_ngcontent-%COMP%]   .list-item__help-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#fff}"],changeDetection:0}),t}(),Lt={mode:"ace/mode/razor",wrap:!0,useSoftTabs:!0,theme:"ace/theme/sqlserver",fontSize:14,fontFamily:"Consolas, Courier New, monospace",showGutter:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0},qt=["editor"],Wt=function(){function t(t){this.zone=t,this.value="",this.propagateChange=function(){},this.propagateTouched=function(){}}return t.prototype.ngOnInit=function(){!function t(e,n,i){void 0===i&&(i=0);var o=e.length===i+1?n:t.bind(this,e,n,i+1),r=e[i];if(window[r.globalVar])n();else{var a=document.querySelector('script[src="'+r.src+'"]');if(a)a.addEventListener("load",o,{once:!0});else{var s=document.createElement("script");s.src=r.src,s.addEventListener("load",o,{once:!0}),document.head.appendChild(s)}}}([{globalVar:"ace",src:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ace.min.js"},{globalVar:null,src:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ext-modelist.min.js"},{globalVar:null,src:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ext-language_tools.min.js"}],this.aceLoaded.bind(this))},t.prototype.ngOnChanges=function(t){var e,n,i,o,r,a=this,s=null===(e=t.filename)||void 0===e?void 0:e.currentValue,c=null===(n=t.snippets)||void 0===n?void 0:n.currentValue;if(this.updateValues(s,c),this.editor){(null===(i=t.toggleResize)||void 0===i?void 0:i.currentValue)!==(null===(o=t.toggleResize)||void 0===o?void 0:o.previousValue)&&this.zone.runOutsideAngular((function(){setTimeout((function(){a.editor.resize()}),50)}));var l=null===(r=t.insertSnippet)||void 0===r?void 0:r.currentValue;l&&this.zone.runOutsideAngular((function(){ace.require("ace/snippets").snippetManager.insertSnippet(a.editor,l),a.editor.focus()}))}},t.prototype.writeValue=function(t){var e=this;this.value=t||"",this.editor&&this.zone.runOutsideAngular((function(){var t=e.editor.getCursorPosition();e.editor.setValue(e.value,-1),e.editor.moveCursorToPosition(t)}))},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){this.propagateTouched=t},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.editor.destroy(),t.editor.container.remove(),t.editor=null}))},t.prototype.aceLoaded=function(){var t=this;this.zone.runOutsideAngular((function(){ace.config.set("basePath","https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11"),t.editor=ace.edit(t.editorRef.nativeElement,Lt),t.editor.$blockScrolling=1/0,t.editor.session.setValue(t.value),t.updateValues(t.filename,t.snippets),t.editor.on("change",t.onEditorValueChange.bind(t)),t.editor.on("blur",t.onEditorBlurred.bind(t)),t.editor.focus()}))},t.prototype.onEditorValueChange=function(){var t=this;this.zone.run((function(){t.propagateChange(t.editor.getValue())}))},t.prototype.onEditorBlurred=function(){var t=this;this.zone.run((function(){t.propagateTouched(t.editor.getValue())}))},t.prototype.updateValues=function(t,e){var n=this;this.editor&&this.zone.runOutsideAngular((function(){if(t){var i=ace.require("ace/ext/modelist").getModeForPath(t).mode;n.editor.session.setMode(i)}e&&ace.require("ace/snippets").snippetManager.register(n.snippets)}))},t.\u0275fac=function(e){return new(e||t)(h.Qb(h.z))},t.\u0275cmp=h.Kb({type:t,selectors:[["app-ace-editor"]],viewQuery:function(t,e){var n;1&t&&h.Vc(qt,!0),2&t&&h.Bc(n=h.fc())&&(e.editorRef=n.first)},inputs:{filename:"filename",snippets:"snippets",insertSnippet:"insertSnippet",toggleResize:"toggleResize"},features:[h.Ab([{provide:o.p,useExisting:Object(h.T)((function(){return t})),multi:!0}]),h.zb],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["editor",""]],template:function(t,e){1&t&&h.Rb(0,"div",0,1)},styles:["[_nghost-%COMP%] {display: block; width: 100%; height: 100%}"],changeDetection:0}),t}();function Nt(t,e){if(1&t){var n=h.Xb();h.Wb(0,"app-ace-editor",8),h.ec("ngModelChange",(function(t){return h.Ec(n),h.ic().view.Code=t})),h.Vb()}if(2&t){var i=h.ic();h.qc("filename",i.view.FileName)("ngModel",i.view.Code)("snippets",i.editorSnipps)("insertSnippet",i.insertSnipp)("toggleResize",!i.activeExplorer)}}var Rt=function(t){return{active:t}},Dt=[{path:"",component:function(){function t(t,e,n,i,o,r,a){this.context=t,this.route=e,this.snackBar=n,this.sourceService=i,this.snippetsService=o,this.zone=r,this.titleService=a,this.explorer={templates:"templates",snippets:"snippets"},this.eventListeners=[],this.context.init(this.route),this.calculateViewKey(),this.attachListeners()}return t.prototype.ngOnInit=function(){var t=this;this.sourceService.get(this.viewKey).subscribe((function(e){t.view=e,t.savedCode=t.view.Code,t.titleService.setTitle("Code Editor - "+t.view.FileName),t.snippetsService.getSnippets(t.view).then((function(e){t.explorerSnipps=e.sets,t.editorSnipps=e.list}))})),this.sourceService.getTemplates().subscribe((function(e){t.templates=e}))},t.prototype.ngOnDestroy=function(){this.detachListeners()},t.prototype.toggleExplorer=function(t){this.activeExplorer=this.activeExplorer===t?null:t},t.prototype.changeInsertSnipp=function(t){this.insertSnipp=t},t.prototype.save=function(){var t=this;this.snackBar.open("Saving...");var e=this.view.Code;this.sourceService.save(this.viewKey,this.view).subscribe({next:function(n){n?(t.savedCode=e,e=null,t.snackBar.open("Saved",null,{duration:2e3})):t.snackBar.open("Failed",null,{duration:2e3})},error:function(){t.snackBar.open("Failed",null,{duration:2e3})}})},t.prototype.calculateViewKey=function(){var t=sessionStorage.getItem(f.i),e=JSON.parse(t)[0];this.viewKey=e.EntityId||e.Path},t.prototype.attachListeners=function(){var t=this;this.zone.runOutsideAngular((function(){var e=t.stopClose.bind(t),n=t.keyboardSave.bind(t);window.addEventListener("beforeunload",e),window.addEventListener("keydown",n),t.eventListeners.push({element:window,type:"beforeunload",listener:e}),t.eventListeners.push({element:window,type:"keydown",listener:n})}))},t.prototype.detachListeners=function(){var t=this;this.zone.runOutsideAngular((function(){t.eventListeners.forEach((function(t){t.element.removeEventListener(t.type,t.listener)})),t.eventListeners=null}))},t.prototype.stopClose=function(t){this.savedCode!==this.view.Code&&(t.preventDefault(),t.returnValue="")},t.prototype.keyboardSave=function(t){var e=this;83===t.keyCode&&(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&(t.preventDefault(),this.zone.run((function(){e.save()})))},t.\u0275fac=function(e){return new(e||t)(h.Qb(b.a),h.Qb(d.a),h.Qb(l.b),h.Qb(y),h.Qb(ht),h.Qb(h.z),h.Qb(bt.d))},t.\u0275cmp=h.Kb({type:t,selectors:[["app-code-editor"]],decls:14,vars:12,consts:[[1,"editor-root"],[1,"toolbar"],["matTooltip","Templates",1,"toolbar-button",3,"ngClass","click"],["matTooltip","Snippets",1,"toolbar-button",3,"ngClass","click"],[3,"hidden","view","templates"],[3,"hidden","snippets","insertSnippet"],[3,"filename","ngModel","snippets","insertSnippet","toggleResize","ngModelChange",4,"ngIf"],["mat-fab","","mat-elevation-z24","","matTooltip","Click to save or CTRL + S",3,"click"],[3,"filename","ngModel","snippets","insertSnippet","toggleResize","ngModelChange"]],template:function(t,e){1&t&&(h.Wb(0,"div",0),h.Wb(1,"div",1),h.Wb(2,"div",2),h.ec("click",(function(){return e.toggleExplorer(e.explorer.templates)})),h.Wb(3,"mat-icon"),h.Pc(4,"file_copy"),h.Vb(),h.Vb(),h.Wb(5,"div",3),h.ec("click",(function(){return e.toggleExplorer(e.explorer.snippets)})),h.Wb(6,"mat-icon"),h.Pc(7,"code"),h.Vb(),h.Vb(),h.Vb(),h.Rb(8,"app-code-templates",4),h.Wb(9,"app-code-snippets",5),h.ec("insertSnippet",(function(t){return e.changeInsertSnipp(t)})),h.Vb(),h.Nc(10,Nt,1,5,"app-ace-editor",6),h.Wb(11,"button",7),h.ec("click",(function(){return e.save()})),h.Wb(12,"mat-icon"),h.Pc(13,"done"),h.Vb(),h.Vb(),h.Vb()),2&t&&(h.Bb(2),h.qc("ngClass",h.vc(8,Rt,e.activeExplorer===e.explorer.templates)),h.Bb(3),h.qc("ngClass",h.vc(10,Rt,e.activeExplorer===e.explorer.snippets)),h.Bb(3),h.qc("hidden",e.activeExplorer!==e.explorer.templates)("view",e.view)("templates",e.templates),h.Bb(1),h.qc("hidden",e.activeExplorer!==e.explorer.snippets)("snippets",e.explorerSnipps),h.Bb(1),h.qc("ngIf",e.view))},directives:[c.a,i.q,s.a,It,Ft,i.t,a.b,Wt,o.r,o.u],styles:[".editor-root[_ngcontent-%COMP%]{position:relative;height:100vh;display:flex}.toolbar[_ngcontent-%COMP%]{background-color:#333}.toolbar-button[_ngcontent-%COMP%]{width:48px;height:48px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;color:#858585}.toolbar-button[_ngcontent-%COMP%]:hover{color:#fff}.toolbar-button.active[_ngcontent-%COMP%]{border-left:1px solid #fff;color:#fff}.mat-fab[_ngcontent-%COMP%]{position:absolute;right:48px;bottom:32px;z-index:10}"]}),t}()}],$t=function(){function t(){}return t.\u0275mod=h.Ob({type:t}),t.\u0275inj=h.Nb({factory:function(e){return new(e||t)},imports:[[d.g.forChild(Dt)],d.g]}),t}(),Ut=n("O6Xb");n.d(e,"CodeEditorModule",(function(){return Qt}));var Qt=function(){function t(){}return t.\u0275mod=h.Ob({type:t}),t.\u0275inj=h.Nb({factory:function(e){return new(e||t)},providers:[b.a,y,vt.a,ht],imports:[[$t,Ut.a,i.c,r.g,a.c,s.b,c.b,l.d,o.l,p.b,u.r]]}),t}()}}]);
//# sourceMappingURL=26.js.map